/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/*(c) aac services 2019. All Rights reserved)*/
"use strict";var __extends=this&&this.__extends||function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,i,s){var o,l=arguments.length,a=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var n=e.length-1;0<=n;n--)(o=e[n])&&(a=(l<3?o(a):3<l?o(t,i,a):o(t,i))||a);return 3<l&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(i,s){return function(e,t){s(e,t,i)}};Object.defineProperty(exports,"__esModule",{value:!0});var common_1=require("@angular/common"),core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),rxjs_1=require("rxjs"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),directives_1=require("../directives/directives"),objectfields_1=require("../objectfields/objectfields"),globalcomponents_1=require("../globalcomponents/globalcomponents"),systemcomponents_1=require("../systemcomponents/systemcomponents"),services_1=require("../services/services"),listfilters=function(){function e(){this.loadedBasefilter="",this.basefilter="",this.loadedFilters=[],this.filters=[]}return e.prototype.isDirty=function(){return this.loadedBasefilter!==this.basefilter||btoa(JSON.stringify(this.filters))!==btoa(JSON.stringify(this.loadedFilters))},e.prototype.setSaved=function(){this.loadedBasefilter=this.basefilter,this.loadedFilters=this.filters},e.prototype.cancelEdit=function(){this.basefilter=this.loadedBasefilter,this.filters=this.loadedFilters},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.listfilters=listfilters;var objectimport=function(){function e(){this.fileName="",this.fileId="",this.fileHeader=[],this.fileData=[],this.fileMapping={},this.fileRows="",this.fixedFields=[],this.importAction="new",this.checkFields=[],this.savedImports=[],this.importDuplicateAction="ignore",this.result={},this.fileTooBig=!1,this.importTemplateAction="none",this.idfield="",this.idFieldAction="auto",this.templateName=void 0,this.enclosure="none",this.separator="semicolon",this.stepLongText=""}return Object.defineProperty(e.prototype,"idField",{get:function(){return this.idfield},set:function(e){this.fileMapping[e]&&delete this.fileMapping[e],this.idfield=e},enumerable:!0,configurable:!0}),e.prototype.resetSettings=function(){this.fileMapping={},this.fixedFields=[],this.checkFields=[],this.idField="",this.result={}},e.prototype.addFixed=function(){this.fixedFields.push({field:void 0})},e.prototype.getFixed=function(e){var t=this.fixedFields.indexOf(e);return-1<t?this.fixedFields[t].field:""},e.prototype.setFixedField=function(e,t){this.fixedFields[e].field=t},e.prototype.removeFixed=function(e){this.fixedFields.splice(e,1)},e.prototype.addCheck=function(){this.checkFields.push({field:void 0})},e.prototype.getCheckField=function(e){return this.checkFields[e]&&this.checkFields[e].field?this.checkFields[e].field:""},e.prototype.setCheckField=function(e,t){this.checkFields[e].field=t},e.prototype.removeCheck=function(e){this.checkFields.splice(e,1)},e.prototype.getMapping=function(e){return 0<Object.keys(this.fileMapping).length&&this.fileMapping[e]?this.fileMapping[e]:""},e.prototype.setMapping=function(e,t){""!=t?this.fileMapping[e]=t:delete this.fileMapping[e]},e.prototype.setSavedImport=function(i){var s=this;this.resetSettings(),this.savedImports.some(function(e){if(e.id===i){for(var t in e.mappings)-1!=s.fileHeader.indexOf(t)&&(s.fileMapping[t]=e.mappings[t]);return s.fixedFields=e.fixed,s.checkFields=e.checks,!0}})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.objectimport=objectimport;var objectmerge=function(){function e(e){this.metadata=e,this.masterId="",this.masterModule="",this.mergeFields=[],this.mergeSource={}}return e.prototype.setModule=function(e){this.masterModule=e,this.getMergeFields()},e.prototype.getMergeFields=function(){this.mergeFields=[];var e=this.metadata.getModuleFields(this.masterModule);for(var t in e)e.hasOwnProperty(t)&&"disabled"!==e[t].duplicate_merge&&"non-db"!=e[t].source&&"id"!=e[t].type&&this.mergeFields.push(e[t])},e.prototype.setAllfieldSources=function(e){this.mergeSource={};for(var t=0,i=this.mergeFields;t<i.length;t++){var s=i[t];this.mergeSource[s.name]=e}},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.objectmerge=objectmerge;var objectnote=function(){function e(e,t){this.backend=e,this.modelutilities=t,this.notes=[],this.module="",this.id=""}return e.prototype.getNotes=function(){var o=this;this.backend.getRequest("module/"+this.module+"/"+this.id+"/note").subscribe(function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];s.date=moment.utc(s.date),s.global="1"===s.global||!0===s.global,o.notes.push(s)}})},e.prototype.addNote=function(e,t){var o=this;this.backend.postRequest("module/"+this.module+"/"+this.id+"/note",{},{text:e,global:!t}).subscribe(function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];s.date=moment.utc(s.date),s.global="1"===s.global||!0===s.global,o.notes.unshift(s)}})},e.prototype.deleteNote=function(i){var s=this;this.backend.deleteRequest("module/"+this.module+"/"+this.id+"/note/"+i).subscribe(function(e){s.notes.some(function(e,t){if(e.id===i)return s.notes.splice(t,1),!0})})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.modelutilities])],e)}();exports.objectnote=objectnote;var ObjectListViewHeader=function(){function ObjectListViewHeader(e,t,i,s,o,l){var a=this;this.metadata=e,this.activatedRoute=t,this.router=i,this.modellist=s,this.language=o,this.model=l,this.parentconfig=[],this.headerevent=new core_1.EventEmitter,this.actionSet={},this.panelButtonState="",this.moduleName="",this.listTypeSubscription=this.modellist.listtype$.subscribe(function(e){a.configChange()});var n=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=n.actionset}return ObjectListViewHeader.prototype.ngOnDestroy=function(){this.listTypeSubscription.unsubscribe()},ObjectListViewHeader.prototype.configChange=function(){"filter"===this.panelButtonState&&this.filterDisabled()&&(this.panelButtonState=""),"aggregates"===this.panelButtonState&&this.aggregatesDisabled()&&(this.panelButtonState="")},ObjectListViewHeader.prototype.setPanelButton=function(e){this.panelButtonState===e?this.panelButtonState="":this.panelButtonState=e},ObjectListViewHeader.prototype.changeList=function(e){this.headerevent.emit({event:"changelist",list:e})},ObjectListViewHeader.prototype.getPanelButtonClass=function(e){return e===this.panelButtonState?"slds-is-selected":""},ObjectListViewHeader.prototype.getFilterPanelStyle=function(){return{right:"filter"===this.panelButtonState?"0px":"-320px"}},ObjectListViewHeader.prototype.getAggregatesPanelStyle=function(){return{right:"aggregates"===this.panelButtonState?"0px":"-320px"}},ObjectListViewHeader.prototype.filterDisabled=function(){return!this.modellist.filterEnabled()},ObjectListViewHeader.prototype.aggregatesDisabled=function(){return!this.modellist.aggregatesEnabled()},ObjectListViewHeader.prototype.onKeyUp=function(e){var t=this;switch(e.key){case"Enter":this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.modellist.reLoadList();break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.modellist.reLoadList()},1e3)}},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectListViewHeader.prototype,"parentconfig",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],ObjectListViewHeader.prototype,"headerevent",void 0),ObjectListViewHeader=__decorate([core_1.Component({selector:"object-listview-header",template:'<div class="slds-page-header slds-page-header--object-home" role="banner"><div class="slds-grid slds-p-bottom--xx-small"><div class="slds-grid slds-grid--vertical-align-center slds-no-space"><system-icon [module]="model.module"></system-icon><object-list-types></object-list-types></div><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left slds-grow slds-p-right--small"><system-utility-icon [icon]="\'search\'" [addclasses]="\'slds-input__icon\'"></system-utility-icon><input spiceuiautofocus [disabled]="!modellist.showSearch()" style="max-width: 400px;" class="slds-input slds-lookup__search-input" type="search" [placeholder]="language.getLabel(\'LBL_SEARCH\') + \' \' + moduleName" [(ngModel)]="modellist.searchTerm" (keyup)="onKeyUp($event)"></div><object-action-container class="slds-col--bump-left" [actionset]="actionSet"></object-action-container></div><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-col slds-align-bottom"><p class="slds-text-body--small"><span class="slds-hide--medium">{{modellist.getListTypeName()}} •</span> {{modellist.listData.list.length}} {{language.getLabel(\'LBL_OF\')}} {{modellist.listData.totalcount}} <span class="slds-show--medium">{{language.getLabel(\'LBL_ITEMS\')}} • {{language.getLabel(\'LBL_SORTEDBY\')}} {{language.getFieldDisplayName(model.module, modellist.sortfield)}} • {{language.getLabel(\'LBL_LASTUPDATE\')}} {{modellist.getLastLoadTime()}}</span></p></div><div class="slds-col slds-no-flex slds-grid slds-align-bottom"><object-listview-settings class="slds-show--medium"></object-listview-settings><object-listview-header-list-selector [parentconfig]="parentconfig" (changelist)="changeList($event)"></object-listview-header-list-selector><button class="slds-button slds-m-left--xx-small slds-button--icon-border" title="Refresh" (click)="modellist.reLoadList()"><system-button-icon [icon]="\'refresh\'"></system-button-icon></button><div class="slds-button-group" role="group"><button class="slds-button slds-button--icon-border" [disabled]="aggregatesDisabled()" [ngClass]="getPanelButtonClass(\'aggregates\')" (click)="setPanelButton(\'aggregates\')"><system-button-icon icon="bucket"></system-button-icon></button><button class="slds-button slds-button--icon-border" [disabled]="filterDisabled()" [ngClass]="getPanelButtonClass(\'filter\')" (click)="setPanelButton(\'filter\')"><system-button-icon icon="filterList"></system-button-icon></button></div></div></div></div><object-listview-filter-panel [ngStyle]="getFilterPanelStyle()"></object-listview-filter-panel><object-listview-aggregates-panel [ngStyle]="getAggregatesPanelStyle()"></object-listview-aggregates-panel>'}),__metadata("design:paramtypes",[services_1.metadata,router_1.ActivatedRoute,router_1.Router,services_1.modellist,services_1.language,services_1.model])],ObjectListViewHeader)}();exports.ObjectListViewHeader=ObjectListViewHeader;var ObjectListViewHeaderListSelector=function(){function e(e,t,i,s,o,l,a){this.metadata=e,this.activatedRoute=t,this.modellist=i,this.language=s,this.model=o,this.elementRef=l,this.renderer=a,this.parentconfig=[],this.changelist=new core_1.EventEmitter,this.showMenu=!1,this.currentList=""}return e.prototype.ngOnInit=function(){this.currentList=this.parentconfig.defaultlist},e.prototype.toggleMenu=function(){var t=this;this.showMenu=!this.showMenu,this.showMenu?this.clickListener=this.renderer.listenGlobal("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1,this.clickListener())},e.prototype.getIcon=function(){var t=this,i="";return this.parentconfig.lists&&this.parentconfig.lists.some(function(e){if(e.component==t.currentList)return i=e.icon,!0}),i},e.prototype.disabled=function(){return!(1<this.parentconfig.lists.length)},e.prototype.getLists=function(){return this.parentconfig.lists},e.prototype.setListtype=function(e){this.currentList=e,this.changelist.emit(e)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parentconfig",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"changelist",void 0),e=__decorate([core_1.Component({selector:"object-listview-header-list-selector",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click slds-m-left--xx-small" aria-expanded="false" [ngClass]="{\'slds-is-open\': showMenu}"><button class="slds-button slds-button--icon-more" aria-haspopup="true" title="Change view" [disabled]="disabled()" (click)="toggleMenu()" style="height: 1.875rem;"><system-button-icon [icon]="getIcon()" [size]="\'small\'"></system-button-icon><system-button-icon [icon]="\'down\'" [size]="\'x-small\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right slds-dropdown--small" (click)="toggleMenu()"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps">{{language.getLabel(\'LBL_DISPLAYAS\')}}</span></li><li *ngFor="let list of parentconfig.lists" class="slds-dropdown__item slds-is-selected" role="presentation" (click)="setListtype(list.component)"><a href="javascript:void(0);" role="menuitemcheckbox" aria-checked="true" tabindex="0"><span class="slds-truncate">{{language.getLabel(list.label)}}</span><system-utility-icon [icon]="list.icon" [size]="\'x-small\'"></system-utility-icon></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,router_1.ActivatedRoute,services_1.modellist,services_1.language,services_1.model,core_1.ElementRef,core_1.Renderer])],e)}();exports.ObjectListViewHeaderListSelector=ObjectListViewHeaderListSelector;var ObjectList=function(){function ObjectList(e,t,i,s,o){var l=this;this.router=e,this.metadata=t,this.modellist=i,this.language=s,this.layout=o,this.allFields=[],this.listFields=[],this.module="",this.modellistsubscribe=void 0,this.componentconfig={},this.module=this.modellist.module,this.setFieldDefs(),this.loadList(),this.modellistsubscribe=this.modellist.listtype$.subscribe(function(e){return l.switchListtype()})}return Object.defineProperty(ObjectList.prototype,"isloading",{get:function(){return this.modellist.isLoading},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectList.prototype,"actionset",{get:function(){return this.componentconfig.actionset},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectList.prototype,"rowselect",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectList.prototype,"inlineedit",{get:function(){return this.componentconfig.inlineedit},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectList.prototype,"issmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),ObjectList.prototype.ngOnDestroy=function(){this.modellistsubscribe.unsubscribe()},ObjectList.prototype.switchListtype=function(){this.setFieldDefs(),this.loadList()},ObjectList.prototype.setFieldDefs=function(){this.listFields=[];var i=this.modellist.getFieldDefs();this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),this.allFields=this.metadata.getFieldSetFields(this.componentconfig.fieldset);for(var e=0,t=this.allFields;e<t.length;e++){var s=t[e];(0<i.length&&0<=i.indexOf(s.field)||0===i.length&&!1!==s.fieldconfig.default)&&this.listFields.push(s)}0<i.length&&this.listFields.sort(function(e,t){return i.indexOf(e.field)-i.indexOf(t.field)})},ObjectList.prototype.navigateDetail=function(e){this.router.navigate(["/module/"+this.module+"/"+e])},ObjectList.prototype.loadList=function(){for(var e=[],t=0,i=this.allFields;t<i.length;t++){var s=i[t];e.push(s.field)}this.modellist.getListData(e)},ObjectList.prototype.onScroll=function(e){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectList.prototype,"tablecontent",void 0),ObjectList=__decorate([core_1.Component({selector:"object-list",template:'<script src="../components/objectlistheader.ts"><\/script><div><object-list-header [listfields]="listFields" [actionset]="actionset"></object-list-header><div #tablecontent tobottom (scroll)="onScroll($event)"><table class="slds-table slds-table--fixed-layout slds-max-medium-table--stacked-horizontal" [ngClass]="{\'slds-table--bordered\':!issmall}" role="grid"><tbody><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="listFields" [listItem]="listItem" [inlineedit]="inlineedit" [rowselect]="rowselect" class="slds-hint-parent"></tr></tbody><tbody system-table-stencils [columns]="listFields?.length" [select]="rowselect" [tools]="true" [rows]="20" *ngIf="isloading"></tbody></table></div></div>'}),__metadata("design:paramtypes",[router_1.Router,services_1.metadata,services_1.modellist,services_1.language,services_1.layout])],ObjectList)}();exports.ObjectList=ObjectList;var ObjectListViewContainer=function(){function ObjectListViewContainer(e,t,i){var s=this;this.activatedRoute=e,this.metadata=t,this.broadcast=i,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.listViewDefs=[],this.fieldSet="",this.listFields=[],this.componentSubscriptions=[],this.activatedRoute.params.subscribe(function(e){s.moduleName=e.module,s.initialized&&s.buildContainer()}),this.componentSubscriptions.push(this.broadcast.message$.subscribe(function(e){s.handleMessage(e)}))}return ObjectListViewContainer.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":this.buildContainer()}},ObjectListViewContainer.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectListViewContainer.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var i=0,s=this.componentSubscriptions;i<s.length;i++){s[i].unsubscribe()}},ObjectListViewContainer.prototype.buildContainer=function(){for(var i=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}this.componentRefs=[];for(var s=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName),o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){t.componentconfig&&0<t.componentconfig.length?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=i.metadata.getComponentConfig(t.component,i.moduleName),i.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(s.componentset);a<n.length;a++){o(n[a])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectListViewContainer.prototype,"container",void 0),ObjectListViewContainer=__decorate([core_1.Component({selector:"object-listview-container",template:"<div #container></div>"}),__metadata("design:paramtypes",[router_1.ActivatedRoute,services_1.metadata,services_1.broadcast])],ObjectListViewContainer)}();exports.ObjectListViewContainer=ObjectListViewContainer;var ObjectListView=function(){function ObjectListView(e,t,i,s,o){this.navigation=e,this.activatedRoute=t,this.metadata=i,this.modellist=s,this.model=o,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.componentconfig={lists:[]},this.currentList="",this.currentListComponent=void 0,this.moduleName=this.activatedRoute.params.value.module,this.model.module=this.moduleName,this.navigation.setActiveModule(this.moduleName),this.modellist.setModule(this.moduleName),this.initialized&&this.buildContainer()}return ObjectListView.prototype.ngOnInit=function(){if(0==this.lists.length)if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig.lists=[];for(var t=0,i=e;t<i.length;t++){var s=i[t];this.componentconfig.lists.push({component:s.component,icon:s.componentconfig.icon,label:s.componentconfig.name})}this.componentconfig.defaultlist=this.componentconfig.lists[0].component}else{var o=this.metadata.getComponentConfig("ObjectListView",this.model.module);e=this.metadata.getComponentSetObjects(o.componentset);this.componentconfig={lists:[]};for(var l=0,a=e;l<a.length;l++){s=a[l];this.componentconfig.lists.push({component:s.component,icon:s.componentconfig.icon,label:s.componentconfig.name})}this.componentconfig.defaultlist=this.componentconfig.lists[0].component}},Object.defineProperty(ObjectListView.prototype,"lists",{get:function(){try{return this.componentconfig.lists?this.componentconfig.lists:[]}catch(e){return[]}},enumerable:!0,configurable:!0}),ObjectListView.prototype.ngAfterViewInit=function(){this.initialized=!0,this.currentList=this.componentconfig.defaultlist,this.buildContainer()},ObjectListView.prototype.buildContainer=function(){for(var t=this,e=0,i=this.componentRefs;e<i.length;e++){i[e].destroy()}this.componentconfig.defaultlist&&this.metadata.addComponent(this.currentList,this.container).subscribe(function(e){t.componentRefs.push(e)})},ObjectListView.prototype.getContainerStyle=function(){return{height:"calc(100vh - "+this.container.element.nativeElement.getBoundingClientRect().top+"px)","overflow-y":"hidden"}},ObjectListView.prototype.handleHeaderEvent=function(e){e.event&&"changelist"==e.event&&(this.currentList=e.list,this.buildContainer())},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectListView.prototype,"container",void 0),ObjectListView=__decorate([core_1.Component({selector:"object-listview",template:'<div><object-listview-header [parentconfig]="componentconfig" (headerevent)="handleHeaderEvent($event)"></object-listview-header></div><div [ngStyle]="getContainerStyle()"><div #container></div></div>',providers:[services_1.modellist,services_1.model]}),__metadata("design:paramtypes",[services_1.navigation,router_1.ActivatedRoute,services_1.metadata,services_1.modellist,services_1.model])],ObjectListView)}();exports.ObjectListView=ObjectListView;var ObjectListHeader=function(){function e(e,t,i){this.modellist=e,this.language=t,this.view=i,this.listfields=[],this.actionset="",this.module="",this.module=this.modellist.module,this.view.labels="short"}return e.prototype.ngOnInit=function(){},e.prototype.isSortable=function(e){return!0===e.fieldconfig.sortable},e.prototype.setSortField=function(e){this.isSortable(e)&&this.modellist.setSortField(e.field)},e.prototype.getSortIcon=function(){return"ASC"===this.modellist.sortdirection?"arrowdown":"arrowup"},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),e=__decorate([core_1.Component({selector:"object-list-header",template:'<table style="margin-bottom: 0px; width: calc(100% - 15px);" class="slds-table slds-table--bordered slds-table--fixed-layout slds-show--medium" role="grid"><thead><tr class="slds-text-title--caps"><th class="slds-cell-shrink" scope="col"><object-list-header-actionmenu [actionset]="actionset"></object-list-header-actionmenu></th><th *ngFor="let item of listfields" [ngClass]="{\'slds-is-sortable\' : isSortable(item)}" scope="col"><ng-container *ngIf="isSortable(item); else nosort"><a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" (click)="setSortField(item)"><field-label addclasses="slds-truncate" [fieldname]="item.field" [fieldconfig]="item.fieldconfig"></field-label><system-utility-icon [icon]="getSortIcon()" addclasses="slds-is-sortable__icon" size="x-small"></system-utility-icon></a></ng-container><ng-template #nosort><field-label [fieldname]="item.field" [fieldconfig]="item.fieldconfig" addclasses="slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small"></field-label></ng-template></th><th class="slds-cell-shrink" scope="col"></th></tr></thead></table>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.modellist,services_1.language,services_1.view])],e)}();exports.ObjectListHeader=ObjectListHeader;var ObjectListHeaderActionMenu=function(){function e(e,t,i,s){this.modellist=e,this.language=t,this.renderer=i,this.elementRef=s,this.actionset="",this.menuOpen=!1}return Object.defineProperty(e.prototype,"selectAll",{get:function(){return"all"===this.modellist.listSelected.type},enumerable:!0,configurable:!0}),e.prototype.setAllSelected=function(){this.menuOpen=!1,this.modellist.setAllSelected()},e.prototype.setAllUnselected=function(){this.menuOpen=!1,this.modellist.setAllUnselected()},e.prototype.toggleMenu=function(){var t=this;this.menuOpen=!this.menuOpen,this.menuOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.menuOpen=!1)},e.prototype.hasSelection=function(){return 0<this.modellist.getSelectedCount()},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),e=__decorate([core_1.Component({selector:"object-list-header-actionmenu",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': menuOpen}"><button class="slds-button slds-button--icon" title="settings" (click)="toggleMenu()"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--left"><ul class="slds-dropdown__list" role="menu"><li *ngIf="!selectAll" class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" (click)="setAllSelected()"><span class="slds-truncate">Select All</span></a></li><li *ngIf="selectAll" class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" (click)="setAllUnselected()"><span class="slds-truncate">Select None</span></a></li><ng-container *ngIf="hasSelection() && actionset"><li class="slds-has-divider--top-space" role="separator"></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">Add to target List</span></a></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">Merge Duplicates</span></a></li></ng-container></ul></div></div>'}),__metadata("design:paramtypes",[services_1.modellist,services_1.language,core_1.Renderer2,core_1.ElementRef])],e)}();exports.ObjectListHeaderActionMenu=ObjectListHeaderActionMenu;var ObjectListItem=function(){function e(e,t,i,s,o,l){this.model=e,this.modelutilities=t,this.modellist=i,this.view=s,this.router=o,this.language=l,this.rowselect=!1,this.rowselectdisabled=!1,this.listFields=[],this.listItem={},this.inlineedit=!1,this.displaylinks=!0,this.showActionMenu=!0}return e.prototype.ngOnInit=function(){this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.data=this.modelutilities.backendModel2spice(this.modellist.module,this.listItem),this.model.initializeFieldsStati(),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks},e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"rowselect",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"rowselectdisabled",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listFields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"inlineedit",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displaylinks",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showActionMenu",void 0),e=__decorate([core_1.Component({selector:"[object-list-item]",template:'<td *ngIf="rowselect" role="gridcell" class="slds-cell-shrink slds-show--medium"><label class="slds-checkbox"><input type="checkbox" [disabled]="rowselectdisabled" [(ngModel)]="listItem.selected"> <span class="slds-checkbox--faux"></span></label></td><td *ngFor="let item of listFields" scope="row" [attr.data-label]="language.getFieldDisplayName(model.module, item.field)"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate slds-p-horizontal--x-small\'"></field-container></td><td *ngIf="showActionMenu" role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view],styles:[":host /deep/ field-container global-button-icon {display:none;}",":host:hover /deep/ field-container global-button-icon {display:inline;}"]}),__metadata("design:paramtypes",[services_1.model,services_1.modelutilities,services_1.modellist,services_1.view,router_1.Router,services_1.language])],e)}();exports.ObjectListItem=ObjectListItem;var ObjectListItemField=function(){function e(e,t,i){this.model=e,this.language=t,this.metadata=i,this.field=""}return e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.buildContainer=function(){var t=this;this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe(function(e){e.instance.fieldname=t.field})},__decorate([core_1.ViewChild("fieldcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"fieldcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"object-list-item--field",template:'<div class="slds-truncate" title="{{field}}"><div #fieldcontainer></div></div>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata])],e)}();exports.ObjectListItemField=ObjectListItemField;var ObjectActionMenu=function(){function e(e,t,i,s,o,l,a,n,d){this.language=e,this.broadcast=t,this.model=i,this.view=s,this.metadata=o,this.elementRef=l,this.renderer=a,this.helper=n,this.layout=d,this.buttonsize="",this.addactions=[],this.addeditactions=[],this.standardactions=!0,this.standardeditactions=!0,this.action=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"isSmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),e.prototype.isEditMode=function(){return this.view.isEditMode()},e.prototype.hasNoActions=function(){return!(0<this.addactions.length)&&!(!this.standardactions||!this.model.data.acl||!1!==this.model.data.acl.edit||!1!==this.model.data.acl.delete)},e.prototype.canEdit=function(){return this.model.checkAccess("edit")},e.prototype.canView=function(){return this.model.checkAccess("detail")},e.prototype.canDelete=function(){return this.model.checkAccess("delete")},e.prototype.cancelEdit=function(){this.model.cancelEdit(),this.view.setViewMode()},e.prototype.saveModel=function(){var t=this;this.model.save(!0).subscribe(function(e){t.view.setViewMode()})},e.prototype.editModel=function(){this.canEdit()&&this.model.edit(!0)},e.prototype.confirmDelete=function(){var t=this;this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe(function(e){e&&t.deleteModel()})},e.prototype.deleteModel=function(){this.model.delete().subscribe(function(e){})},e.prototype.viewModel=function(){this.model.goDetail()},e.prototype.doCustomAction=function(e){this.action.emit(e)},e.prototype.getButtonSizeClass=function(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize},e.prototype.getDropdownLocationClass=function(){var e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"buttonsize",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"addactions",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"addeditactions",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"standardactions",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"standardeditactions",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"object-action-menu",template:'<div *ngIf="!isSmall; else smallformfactor" class="slds-dropdown-trigger slds-dropdown-trigger--click" dropdowntrigger><button class="slds-button slds-button--icon-border-filled" [ngClass]="getButtonSizeClass()" aria-haspopup="true" [disabled]="hasNoActions()"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right" [ngClass]="getDropdownLocationClass()"><ul class="slds-dropdown__list" role="menu"><ng-container *ngIf="!isEditMode()"><ng-container *ngIf="standardactions"><li *ngIf="canEdit()" class="slds-dropdown__item" role="presentation" (click)="editModel()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate">{{language.getLabel(\'LBL_EDIT\')}}</span></a></li><li *ngIf="canDelete()" class="slds-dropdown__item" role="presentation" (click)="confirmDelete()"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate">{{language.getLabel(\'LBL_DELETE\')}}</span></a></li><li class="slds-dropdown__item" role="presentation" (click)="viewModel()"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate">{{language.getLabel(\'LBL_OPEN\')}}</span></a></li></ng-container><ng-container *ngIf="addactions.length > 0"><li *ngFor="let addaction of addactions" class="slds-dropdown__item" role="presentation" (click)="doCustomAction(addaction.action)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate">{{addaction.name}}</span></a></li></ng-container></ng-container><ng-container *ngIf="isEditMode()"><ng-container *ngIf="standardeditactions"><li *ngIf="canEdit()" class="slds-dropdown__item" role="presentation" (click)="cancelEdit()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate">{{language.getLabel(\'LBL_CANCEL\')}}</span></a></li><li *ngIf="canEdit()" class="slds-dropdown__item" role="presentation" (click)="saveModel()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate">{{language.getLabel(\'LBL_SAVE\')}}</span></a></li></ng-container><ng-container *ngIf="addeditactions.length > 0"><li *ngFor="let addaction of addeditactions" class="slds-dropdown__item" role="presentation" (click)="doCustomAction(addaction.action)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate">{{addaction.name}}</span></a></li></ng-container></ng-container></ul></div></div><ng-template #smallformfactor><div class="slds-text-align--right slds-p-top--xx-small slds-p-horizontal--xx-small"><div *ngIf="!isEditMode()" class="slds-button-group" role="group"><button class="slds-button slds-button_neutral" *ngIf="canEdit()" (click)="editModel()">{{language.getLabel(\'LBL_EDIT\')}}</button> <button class="slds-button slds-button_neutral" *ngIf="canDelete()" (click)="confirmDelete()">{{language.getLabel(\'LBL_DELETE\')}}</button> <button class="slds-button slds-button_neutral" *ngIf="canView()" (click)="viewModel()">{{language.getLabel(\'LBL_OPEN\')}}</button></div><div *ngIf="isEditMode()" class="slds-button-group" role="group"><button class="slds-button slds-button_neutral" *ngIf="canEdit()" (click)="cancelEdit()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button_neutral" *ngIf="canDelete()" (click)="saveModel()">{{language.getLabel(\'LBL_SAVE\')}}</button></div></div></ng-template>',providers:[services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.broadcast,services_1.model,services_1.view,services_1.metadata,core_1.ElementRef,core_1.Renderer2,services_1.helper,services_1.layout])],e)}();exports.ObjectActionMenu=ObjectActionMenu;var ObjectActionsetMenu=function(){function e(e,t,i,s,o,l,a){var n=this;this.language=e,this.model=t,this.metadata=i,this.elementRef=s,this.renderer=o,this.popup=l,this.helper=a,this.actionset="",this.buttonsize="",this.action=new core_1.EventEmitter,this.isOpen=!1,this.popupSubscription=this.popup.closePopup$.subscribe(function(e){n.isOpen=!1})}return e.prototype.ngOnDestroy=function(){this.popupSubscription.unsubscribe()},e.prototype.hasNoActions=function(){return!1},e.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listenGlobal("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)},e.prototype.getButtonSizeClass=function(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize},e.prototype.getDropdownLocationClass=function(){var e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"},__decorate([core_1.ViewChild("acionsetcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"acionsetcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"buttonsize",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"object-actionset-menu",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': isOpen}"><button class="slds-button slds-button--icon-border-filled" [ngClass]="getButtonSizeClass()" aria-haspopup="true" [disabled]="hasNoActions()" (click)="toggleOpen()"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div *ngIf="isOpen" class="slds-dropdown slds-dropdown--right" [ngClass]="getDropdownLocationClass()"><object-actionset-menu-container [actionset]="actionset"></object-actionset-menu-container></div></div>',providers:[services_1.popup,services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata,core_1.ElementRef,core_1.Renderer,services_1.popup,services_1.helper])],e)}();exports.ObjectActionsetMenu=ObjectActionsetMenu;var ObjectActionsetMenuContainer=function(){function e(e,t,i,s,o,l,a){this.language=e,this.model=t,this.metadata=i,this.elementRef=s,this.renderer=o,this.popup=l,this.helper=a,this.actionset="",this.action=new core_1.EventEmitter}return e.prototype.ngAfterViewInit=function(){if(""!=this.actionset)for(var e=0,t=this.metadata.getActionSetItems(this.actionset);e<t.length;e++){var i=t[e];if(i.component)this.metadata.addComponent(i.component,this.acionsetcontainer);else switch(i.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}},__decorate([core_1.ViewChild("acionsetcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"acionsetcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"object-actionset-menu-container",template:'<ul class="slds-dropdown__list" role="menu"><div #acionsetcontainer></div></ul>',providers:[services_1.popup,services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata,core_1.ElementRef,core_1.Renderer,services_1.popup,services_1.helper])],e)}();exports.ObjectActionsetMenuContainer=ObjectActionsetMenuContainer;var ObjectActionsetMenuContainerEdit=function(){function ObjectActionsetMenuContainerEdit(e,t){this.language=e,this.model=t}return ObjectActionsetMenuContainerEdit.prototype.doAction=function(){this.model.checkAccess("edit")&&this.model.edit(!0)},ObjectActionsetMenuContainerEdit=__decorate([core_1.Component({selector:"object-actionset-menu-container-edit",template:'<li class="slds-dropdown__item" role="presentation" (click)="doAction()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{language.getLabel(\'LBL_EDIT\')}}</span></a></li>'}),__metadata("design:paramtypes",[services_1.language,services_1.model])],ObjectActionsetMenuContainerEdit)}();exports.ObjectActionsetMenuContainerEdit=ObjectActionsetMenuContainerEdit;var ObjectActionsetMenuContainerDelete=function(){function ObjectActionsetMenuContainerDelete(e,t,i){this.language=e,this.model=t,this.helper=i}return ObjectActionsetMenuContainerDelete.prototype.doAction=function(){var t=this;this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe(function(e){e&&t.model.delete()})},ObjectActionsetMenuContainerDelete=__decorate([core_1.Component({template:'<li class="slds-dropdown__item" role="presentation" (click)="doAction()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate">{{language.getLabel(\'LBL_DELETE\')}}</span></a></li>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.helper])],ObjectActionsetMenuContainerDelete)}();exports.ObjectActionsetMenuContainerDelete=ObjectActionsetMenuContainerDelete;var ObjectListTypes=function(){function e(e,t,i,s){this.modellist=e,this.elementRef=t,this.renderer=i,this.language=s,this.showMenu=!1}return Object.defineProperty(e.prototype,"listtypes",{get:function(){return this.modellist.getListTypes(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myLabel",{get:function(){return this.language.getLabel("LBL_MY")+" "+this.language.getModuleName(this.modellist.module)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allLabel",{get:function(){return this.language.getLabel("LBL_ALL")+" "+this.language.getModuleName(this.modellist.module)},enumerable:!0,configurable:!0}),e.prototype.toggleTypes=function(){var t=this;this.showMenu=!this.showMenu,this.showMenu?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.setListType=function(e){void 0===e&&(e="all"),this.modellist.setListType(e),this.showMenu=!1},e.prototype.onClick=function(e){e.target&&(this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1))},e=__decorate([core_1.Component({selector:"object-list-types",template:'<div class="slds-media__body slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': showMenu}"><p class="slds-text-title--caps slds-line-height--reset">{{moduleName}}</p><button class="slds-button slds-type-focus slds-m-right--small slds-grid slds-truncate" aria-haspopup="true" (click)="toggleTypes()"><div class="slds-grid slds-grid--vertical-align-center slds-truncate"><h1 class="slds-page-header__title slds-truncate slds-show--medium">{{modellist.getListTypeName()}}</h1><system-button-icon icon="down"></system-button-icon><span class="slds-assistive-text">Show List Options</span></div></button><div class="slds-dropdown slds-dropdown--left slds-dropdown--medium"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps">List Types</span></li><li class="slds-dropdown__item" [ngClass]="{\'slds-is-selected\': modellist.listtype === \'all\'}" role="presentation"><a href="javascript:void(0);" role="menuitemcheckbox" (click)="setListType(\'all\')"><span class="slds-truncate"><system-utility-icon [icon]="\'check\'" [addclasses]="\'slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small\'"></system-utility-icon>{{allLabel}}</span></a></li><li class="slds-dropdown__item" [ngClass]="{\'slds-is-selected\': modellist.listtype === \'owner\'}" role="presentation"><a href="javascript:void(0);" role="menuitemcheckbox" (click)="setListType(\'owner\')"><span class="slds-truncate"><system-utility-icon [icon]="\'check\'" [addclasses]="\'slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small\'"></system-utility-icon>{{myLabel}}</span></a></li><ng-container *ngFor="let listtype of listtypes"><li class="slds-dropdown__item" [ngClass]="{\'slds-is-selected\': listtype.id === modellist.listtype}" role="presentation"><a href="javascript:void(0);" role="menuitemcheckbox" (click)="setListType(listtype.id)"><span class="slds-truncate"><system-utility-icon [icon]="\'check\'" [addclasses]="\'slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small\'"></system-utility-icon>{{listtype.name}}</span></a></li></ng-container></ul></div></div>'}),__metadata("design:paramtypes",[services_1.modellist,core_1.ElementRef,core_1.Renderer2,services_1.language])],e)}();exports.ObjectListTypes=ObjectListTypes;var ObjectActionContainerItem=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.ngZone=s,this.actionemitter=new core_1.EventEmitter,this.standardActions={NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"ObjectActionImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton"},this.stable=!1}return Object.defineProperty(e.prototype,"id",{get:function(){return this.actionitem.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer).subscribe(function(e){e.instance.parent=t.model,e.instance.actionconfig=t.actionitem.actionconfig,e.instance.actionemitter&&e.instance.actionemitter.subscribe(function(e){t.actionemitter.emit(e)}),t.componentref=e}),this.stableSub=this.ngZone.onStable.subscribe(function(e){t.stable=!0,t.stableSub.unsubscribe()})},e.prototype.execute=function(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()},__decorate([core_1.ViewChild("actioncontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"actioncontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"actionitem",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"actionemitter",void 0),e=__decorate([core_1.Component({selector:"object-action-container-item",template:"<div #actioncontainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,core_1.NgZone])],e)}();exports.ObjectActionContainerItem=ObjectActionContainerItem;var ObjectActionContainer=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.changeDetectorRef=s,this.actionset="",this.mainactionitems=[],this.addactionitems=[],this.actionemitter=new core_1.EventEmitter,this.isOpen=!1}return e.prototype.ngOnChanges=function(){var e=this.metadata.getActionSetItems(this.actionset);this.mainactionitems=[],this.addactionitems=[];for(var t=!0,i=0,s=e;i<s.length;i++){var o=s[i];t?(this.mainactionitems.push({disabled:!0,id:o.id,sequence:o.sequence,action:o.action,component:o.component,actionconfig:o.actionconfig}),t=!1):this.addactionitems.push({disabled:!0,id:o.id,sequence:o.sequence,action:o.action,component:o.component,actionconfig:o.actionconfig})}},e.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},Object.defineProperty(e.prototype,"opendisabled",{get:function(){var t=this,i=!0;return this.addactionitems.some(function(e){if(!1===t.isDisabled(e.id))return!(i=!1)}),i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAddItems",{get:function(){return 0<this.addactionitems.length},enumerable:!0,configurable:!0}),e.prototype.disabledhandler=function(t,i){var e=this;setTimeout(function(){e.mainactionitems.some(function(e){if(e.id==t)return e.disabled=i,!0}),e.addactionitems.some(function(e){if(e.id==t)return e.disabled=i,!0})})},e.prototype.isDisabled=function(t){var i=!0;return this.actionitemlist&&this.actionitemlist.some(function(e){if(e.id==t)return i=e.disabled,!0}),i},e.prototype.propagateclick=function(t){this.actionitemlist.some(function(e){if(e.id==t)return e.disabled||e.execute(),!0})},e.prototype.emitaction=function(e){this.actionemitter.emit(e)},__decorate([core_1.ViewChildren(ObjectActionContainerItem),__metadata("design:type",core_1.QueryList)],e.prototype,"actionitemlist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"actionemitter",void 0),e=__decorate([core_1.Component({selector:"object-action-container",template:'<div class="slds-button-group" role="group"><button class="slds-button slds-button_neutral" *ngFor="let actionitem of mainactionitems" [disabled]="isDisabled(actionitem.id)" (click)="propagateclick(actionitem.id)"><object-action-container-item [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></button><div *ngIf="hasAddItems" class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" dropdowntrigger><button class="slds-button slds-button_icon slds-button_icon-border-filled" aria-haspopup="true" [disabled]="opendisabled" [title]="language.getLabel(\'LBL_MORE\')"><system-button-icon icon="down"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_MORE\')}}</span></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation" *ngFor="let actionitem of addactionitems" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem" tabindex="0"><object-action-container-item class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,core_1.ChangeDetectorRef])],e)}();exports.ObjectActionContainer=ObjectActionContainer;var ObjectActionEditButton=function(){function ObjectActionEditButton(e,t,i){this.language=e,this.metadata=t,this.model=i,this.disabled=!0}return ObjectActionEditButton.prototype.ngOnInit=function(){var t=this;this.handleDisabled(this.model.isEditing?"edit":"display"),this.model.mode$.subscribe(function(e){t.handleDisabled(e)}),this.model.data$.subscribe(function(e){t.handleDisabled(t.model.isEditing?"edit":"display")})},ObjectActionEditButton.prototype.execute=function(){this.model.edit()},ObjectActionEditButton.prototype.handleDisabled=function(e){!this.model.data.acl||this.model.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0},ObjectActionEditButton=__decorate([core_1.Component({selector:"object-action-edit-button",template:"<span>{{language.getLabel('LBL_EDIT')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionEditButton)}();exports.ObjectActionEditButton=ObjectActionEditButton;var ObjectActionDeleteButton=function(){function ObjectActionDeleteButton(e,t,i,s,o){var l=this;this.language=e,this.metadata=t,this.model=i,this.router=s,this.helper=o,this.disabled=!0,this.model.mode$.subscribe(function(e){l.handleDisabled(e)}),this.model.data$.subscribe(function(e){l.handleDisabled(l.model.isEditing?"edit":"display")})}return ObjectActionDeleteButton.prototype.ngOnInit=function(){var e=this;setTimeout(function(){e.handleDisabled(e.model.isEditing?"edit":"display")})},Object.defineProperty(ObjectActionDeleteButton.prototype,"canDelete",{get:function(){try{return this.model.checkAccess("delete")}catch(e){return!1}},enumerable:!0,configurable:!0}),ObjectActionDeleteButton.prototype.execute=function(){var t=this;this.helper.confirm(this.language.getAppLanglabel("MSG_DELETE_RECORD"),this.language.getAppLanglabel("MSG_DELETE_RECORD","long")).subscribe(function(e){e&&t.delete()})},ObjectActionDeleteButton.prototype.delete=function(){var t=this;this.model.delete().subscribe(function(e){t.router.navigate(["/module/"+t.model.module])})},ObjectActionDeleteButton.prototype.handleDisabled=function(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0},ObjectActionDeleteButton=__decorate([core_1.Component({selector:"object-action-delete-button",template:"<span>{{language.getLabel('LBL_DELETE')}}</span>",providers:[services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,router_1.Router,services_1.helper])],ObjectActionDeleteButton)}();exports.ObjectActionDeleteButton=ObjectActionDeleteButton;var ObjectActionAuditlogButton=function(){function ObjectActionAuditlogButton(e,t,i,s,o){this.language=e,this.metadata=t,this.model=i,this.modal=s,this.ViewContainerRef=o,this.disabled=!0}return ObjectActionAuditlogButton.prototype.ngOnInit=function(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1)},ObjectActionAuditlogButton.prototype.execute=function(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)},ObjectActionAuditlogButton=__decorate([core_1.Component({selector:"object-action-auditlog-button",template:"<span>{{language.getLabel('LBL_AUDITLOG')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal,core_1.ViewContainerRef])],ObjectActionAuditlogButton)}();exports.ObjectActionAuditlogButton=ObjectActionAuditlogButton;var ObjectActionAuditlogModal=function(){function ObjectActionAuditlogModal(e,t,i){this.language=e,this.metadata=t,this.model=i,this.self=null,this.auditLog=[],this.loading=!0,this.moduleFields=[],this._userfilter="",this._fieldfilter=""}return Object.defineProperty(ObjectActionAuditlogModal.prototype,"userfilter",{get:function(){return this._userfilter},set:function(e){this._userfilter=e,this.loadAuditLog()},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActionAuditlogModal.prototype,"fieldfilter",{get:function(){return this._fieldfilter},set:function(e){this._fieldfilter=e,this.loadAuditLog()},enumerable:!0,configurable:!0}),ObjectActionAuditlogModal.prototype.ngOnInit=function(){for(var e in this.loadAuditLog(),this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(function(e,t){return e.display.toLowerCase()>t.display.toLowerCase()?1:-1})},ObjectActionAuditlogModal.prototype.hideAuditLog=function(){this.self.destroy()},ObjectActionAuditlogModal.prototype.loadAuditLog=function(){var t=this;this.model&&(this.auditLog=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter}).subscribe(function(e){t.auditLog=e,t.loading=!1},function(e){t.loading=!1}))},ObjectActionAuditlogModal=__decorate([core_1.Component({selector:"object-action-auditlog-modal",template:'<system-modal size="large"><system-modal-header (close)="hideAuditLog()">{{language.getLabel(\'LBL_LOGGED_CHANGES\')}}</system-modal-header><system-modal-content margin="none"><system-spinner *ngIf="loading" class="slds-p-around--medium"></system-spinner><table *ngIf="!loading" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_DATE\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_USER\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_FIELD\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_BEFOREVALUE\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_AFTERVALUE\')}}</div></th></tr></thead><tbody><tr *ngFor="let auditEntry of auditLog"><td scope="row"><div class="slds-truncate">{{auditEntry.date_created}}</div></td><td scope="row"><div class="slds-truncate">{{auditEntry.user_name}}</div></td><td scope="row"><div class="slds-truncate">{{language.getFieldDisplayName(model.module, auditEntry.field_name)}}</div></td><td scope="row"><div class="slds-truncate">{{auditEntry.before_value_string}}</div></td><td scope="row"><div class="slds-truncate">{{auditEntry.after_value_string}}</div></td></tr></tbody></table><div *ngIf="!loading && auditLog.length === 0" class="slds-text-heading--small slds-p-around--medium">{{language.getLabel(\'MSG_NOAUDITRECORDS_FOUND\')}}.</div></system-modal-content><system-modal-footer><button class="slds-button slds-button--brand" (click)="hideAuditLog()">{{language.getLabel(\'LBL_CLOSE\')}}</button></system-modal-footer></system-modal>'}),__param(2,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionAuditlogModal)}();exports.ObjectActionAuditlogModal=ObjectActionAuditlogModal;var ObjectActionNewButton=function(){function ObjectActionNewButton(e,t,i){this.language=e,this.metadata=t,this.model=i,this.parent={},this.module="",this.disabled=!0}return ObjectActionNewButton.prototype.execute=function(){this.model.id="",this.model.addModel("",this.parent)},ObjectActionNewButton.prototype.ngOnInit=function(){this.model.module=this.module?this.module:this.model.module,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)},ObjectActionNewButton=__decorate([core_1.Component({selector:"object-action-new-button",template:"<span>{{language.getLabel('LBL_NEW')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionNewButton)}();exports.ObjectActionNewButton=ObjectActionNewButton;var ObjectActionDuplicateButton=function(){function ObjectActionDuplicateButton(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.session=s,this.parent={},this.disabled=!0}return ObjectActionDuplicateButton.prototype.ngOnInit=function(){this.disabled=!!this.metadata.checkModuleAcl(this.model.module,"create")},ObjectActionDuplicateButton.prototype.execute=function(){var e=this.model.utils.generateGuid();for(var t in this.model.module=this.parent.module,this.model.id=e,this.model.isNew=!0,this.model.data=JSON.parse(JSON.stringify(this.parent.data)),this.model.data.id=e,this.model.data.assigned_user_id=this.session.authData.userId,this.model.data.assigned_user_name=this.session.authData.userName,this.model.data.modified_by_id=this.session.authData.userId,this.model.data.modified_by_name=this.session.authData.userName,this.model.data.date_entered=new Date,this.model.data.date_modified=new Date,this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(var i in this.model.data[t].beans){for(var s in this.model.data[t].beans[i])this.model.data[t].beans[i][s]==this.parent.id&&(this.model.data[t].beans[i][s]=e,this.model.data[t].beans[i].id=this.model.utils.generateGuid()),this.model.data[t].beans[i][s].beans&&(this.model.data[t].beans[i][s].beans={});this.model.data[t].beans[i].id!=i&&(this.model.data[t].beans[this.model.data[t].beans[i].id]=this.model.data[t].beans[i],delete this.model.data[t].beans[i])}this.model.duplicate=!0,this.model.edit()},ObjectActionDuplicateButton=__decorate([core_1.Component({selector:"object-action-duplicate-button",template:"<span>{{language.getLabel('LBL_DUPLICATE')}}</span>",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.session])],ObjectActionDuplicateButton)}();exports.ObjectActionDuplicateButton=ObjectActionDuplicateButton;var ObjectActionSaveButton=function(){function ObjectActionSaveButton(e,t,i){this.language=e,this.metadata=t,this.model=i,this.actionemitter=new core_1.EventEmitter,this.parent={},this.module="",this.saving=!1}return ObjectActionSaveButton.prototype.execute=function(){var t=this;this.saving||this.model.validate()&&(this.saving=!0,this.model.save().subscribe(function(e){t.actionemitter.emit(!0)}))},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ObjectActionSaveButton.prototype,"actionemitter",void 0),ObjectActionSaveButton=__decorate([core_1.Component({selector:"object-action-save-button",template:"<span>{{language.getLabel('LBL_SAVE')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionSaveButton)}();exports.ObjectActionSaveButton=ObjectActionSaveButton;var ObjectActionNewrelatedButton=function(){function ObjectActionNewrelatedButton(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.relatedmodels=s,this.parent={},this.disabled=!0}return ObjectActionNewrelatedButton.prototype.ngOnInit=function(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)},ObjectActionNewrelatedButton.prototype.execute=function(){var t=this;this.parent.data.id||(this.parent.data.id=this.parent.id),this.model.id="",this.model.addModel("",this.parent).subscribe(function(e){0!=e&&t.relatedmodels.addItems([e])})},ObjectActionNewrelatedButton=__decorate([core_1.Component({selector:"object-action-newrelated-button",template:"<span>{{language.getLabel('LBL_NEW')}}</span>",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.relatedmodels])],ObjectActionNewrelatedButton)}();exports.ObjectActionNewrelatedButton=ObjectActionNewrelatedButton;var ObjectActionImportButton=function(){function ObjectActionImportButton(e,t,i,s,o){this.language=e,this.metadata=t,this.model=i,this.router=s,this.layout=o}return ObjectActionImportButton.prototype.ngOnInit=function(){},ObjectActionImportButton.prototype.execute=function(){this.router.navigate(["/module/"+this.model.module+"/import"])},Object.defineProperty(ObjectActionImportButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"import")||"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),ObjectActionImportButton=__decorate([core_1.Component({selector:"object-action-import-button",template:"<span>{{language.getLabel('LBL_IMPORT')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,router_1.Router,services_1.layout])],ObjectActionImportButton)}();exports.ObjectActionImportButton=ObjectActionImportButton;var ObjectReminderButton=function(){function e(e,t,i,s,o,l,a){var n=this;this.language=e,this.metadata=t,this.model=i,this.renderer=s,this.elementRef=o,this.reminder=l,this.userpreferences=a,this.showDialog=!1,this.reminderDate=new moment,this.hasReminder=!1,this.reminder.loaded$?this.reminder.loaded$.subscribe(function(e){n.loadReminder()}):this.loadReminder()}return e.prototype.loadReminder=function(){var e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e&&(this.hasReminder=!0,this.reminderDate=new moment(e))},e.prototype.toggleDatePicker=function(){var t=this;this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listenGlobal("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)},Object.defineProperty(e.prototype,"isEditing",{get:function(){return this.model.isEditing},enumerable:!0,configurable:!0}),e.prototype.clearReminder=function(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1},e.prototype.setReminder=function(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)},e.prototype.getReminderDate=function(){return this.reminderDate.format(this.userpreferences.getDateFormat())},e=__decorate([core_1.Component({selector:"object-reminder-button",template:'<div class="slds-form-element slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': showDialog}"><a class="slds-button slds-button--neutral slds-m-horizontal--xxx-small" [ngClass]="{\'slds-not-selected\': !hasReminder, \'slds-is-selected\': hasReminder }"><span class="slds-text-not-selected" (click)="toggleDatePicker()"><system-button-icon [icon]="\'add\'"></system-button-icon>{{language.getLabel(\'LBL_REMINDER\')}}</span> <span class="slds-text-selected"><system-button-icon [icon]="\'check\'"></system-button-icon>{{getReminderDate()}}</span> <span class="slds-text-selected-focus"><system-button-icon [icon]="\'close\'" (click)="clearReminder()"></system-button-icon><span (click)="toggleDatePicker()">{{getReminderDate()}}</span></span></a><div class="slds-datepicker slds-dropdown slds-dropdown_right" role="dialog"><system-input-date-picker *ngIf="showDialog" [setDate]="reminderDate" (datePicked)="setReminder($event)"></system-input-date-picker></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,core_1.Renderer,core_1.ElementRef,services_1.reminder,services_1.userpreferences])],e)}();exports.ObjectReminderButton=ObjectReminderButton;var ObjectActionSelectButton=function(){function ObjectActionSelectButton(e,t,i,s,o){this.metadata=e,this.language=t,this.modal=i,this.model=s,this.relatedmodels=o,this.actionconfig={},this.parent={},this.disabled=!0}return ObjectActionSelectButton.prototype.ngOnInit=function(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)},ObjectActionSelectButton.prototype.execute=function(){var t=this;this.actionconfig.searchConditions?this.modal.openModal("ObjectModalModuleDBLookup").subscribe(function(e){e.instance.searchConditions=t.actionconfig.searchConditions,e.instance.module=t.model.module,e.instance.multiselect=!0,e.instance.selectedItems.subscribe(function(e){t.addSelectedItems(e)})}):this.modal.openModal("ObjectModalModuleLookup").subscribe(function(e){e.instance.module=t.model.module,e.instance.multiselect=!0,e.instance.selectedItems.subscribe(function(e){t.addSelectedItems(e)})})},ObjectActionSelectButton.prototype.addSelectedItems=function(e){this.relatedmodels.addItems(e)},ObjectActionSelectButton=__decorate([core_1.Component({selector:"object-action-select-button",template:"<span>{{language.getLabel('LBL_SELECT')}}</span>",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,services_1.model,services_1.relatedmodels])],ObjectActionSelectButton)}();exports.ObjectActionSelectButton=ObjectActionSelectButton;var ObjectActionBeanToMailButton=function(){function ObjectActionBeanToMailButton(e,t,i,s){this.language=e,this.modal=t,this.model=i,this.viewContainerRef=s}return ObjectActionBeanToMailButton.prototype.execute=function(){this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector)},ObjectActionBeanToMailButton=__decorate([core_1.Component({selector:"object-action-beantomail-button",template:"<span>{{language.getLabel('LBL_EMAIL')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.modal,services_1.model,core_1.ViewContainerRef])],ObjectActionBeanToMailButton)}();exports.ObjectActionBeanToMailButton=ObjectActionBeanToMailButton;var ObjectActionMailModal=function(){function ObjectActionMailModal(e,t,i,s,o,l,a){this.language=e,this.metadata=t,this.model=i,this.view=s,this.backend=o,this.prefs=l,this.modal=a,this.tplList=[],this.fromList=[],this.loading=!0,this.sending=!1,this.parent=null,this.self=null,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode()}return ObjectActionMailModal.prototype.ngOnInit=function(){this.model.initializeModel(this.parent),this.model.data.parent_type=this.parent.module,this.model.data.parent_id=this.parent.id,this.model.data.parent_name=this.parent.data.summary_text},ObjectActionMailModal.prototype.close=function(){this.self.destroy()},Object.defineProperty(ObjectActionMailModal.prototype,"senddisabled",{get:function(){if(!this.model.getFieldValue("mailbox_id"))return!0;if(!this.model.getFieldValue("name")||!this.model.getFieldValue("body"))return!0;if(!this.model.getFieldValue("recipient_addresses"))return!0;var t=!1;return this.model.data.recipient_addresses.some(function(e){if("to"==e.address_type)return t=!0}),!t||this.sending},enumerable:!0,configurable:!0}),ObjectActionMailModal.prototype.sendemail=function(){var i=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){t.instance.messagelabel="LBL_SENDING",i.sending=!0,i.model.data.type="out",i.model.data.to_be_sent="1",i.model.data.from_addr=i.model.data.from_addr_name,i.model.data.to_addrs=i.model.data.to_addrs_names,i.model.save().subscribe(function(e){t.instance.self.destroy(),i.close()},function(e){t.instance.self.destroy(),i.sending=!1})})},ObjectActionMailModal=__decorate([core_1.Component({selector:"object-action-mail-modal",template:'<div role="dialog" tabindex="-1" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" (click)="close()"><system-button-icon [icon]="\'close\'" [size]="\'large\'" [inverse]="true"></system-button-icon></button><h2 class="slds-text-heading--medium">{{language.getLabel(\'LBL_BEANTOMAIL\')}}</h2></div><div class="slds-modal__content slds-theme--default"><div class="slds-grid slds-p-around--xx-small"><div class="slds-size--1-of-2 slds-p-right--xxx-small"><div class="slds-form-element"><field-label [fieldname]="\'mailbox_id\'" [fieldconfig]="{required: true}"></field-label><field-container [field]="\'mailbox_id\'"></field-container></div></div><div class="slds-size--1-of-2 slds-p-left--xxx-small"><field-label [fieldname]="\'parent_name\'"></field-label><field-container [field]="\'parent_name\'"></field-container></div></div><div class="slds-grid slds-p-around--xx-small"><div class="slds-size--1-of-2 slds-p-right--xxx-small"><div class="slds-form-element"><field-label [fieldname]="\'to_addrs_names\'" [fieldconfig]="{required: true}"></field-label><field-container field="to_addrs_names" [fieldconfig]="{fieldtype:\'emailrecipients\', addresstype: \'to\'}"></field-container></div></div><div class="slds-size--1-of-2 slds-p-left--xxx-small"><div class="slds-form-element"><field-label [fieldname]="\'cc_addrs_names\'"></field-label><field-container field="cc_addrs_names" [fieldconfig]="{fieldtype:\'emailrecipients\', addresstype: \'cc\'}"></field-container></div></div></div><div class="slds-grid slds-p-around--xx-small"><div class="slds-size--1-of-2 slds-p-right--xxx-small"><div class="slds-form-element"><field-label [fieldname]="\'name\'" [fieldconfig]="{required: true}"></field-label><field-container [field]="\'name\'"></field-container></div></div><div class="slds-size--1-of-2 slds-p-right--xxx-small"><div *ngIf="model.data.parent_type" class="slds-form-element"><field-label [fieldname]="\'emailtemplate_id\'"></field-label><field-container field="emailtemplate_id" [fieldconfig]="{fieldtype:\'emailtemplate\', templatetype: \'bean2mail\'}"></field-container></div></div></div><div class="slds-p-around--xx-small"><div class="slds-form-element"><field-label fieldname="body" [fieldconfig]="{required: true}"></field-label><div class="slds-form-element__control"><field-html fieldname="body"></field-html></div></div></div></div><div class="slds-modal__footer"><button class="slds-button" (click)="close()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button [disabled]="senddisabled" class="slds-button slds-button--brand" (click)="sendemail()">{{language.getLabel(\'LBL_SEND\')}}</button></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.backend,services_1.userpreferences,services_1.modal])],ObjectActionMailModal)}();exports.ObjectActionMailModal=ObjectActionMailModal;var ObjectEditModal=function(){function ObjectEditModal(e,t,i,s,o,l){this.router=e,this.language=t,this.model=i,this.view=s,this.metadata=o,this.modal=l,this.componentconfig={},this.actionSetItems=[],this.showDuplicates=!1,this.actionSubject=new rxjs_1.Subject,this.action$=new rxjs_1.Observable,this.doDuplicateCheck=!0,this.duplicates=[],this.preventGoingToRecord=!1,this.self={},this.view.isEditable=!0,this.view.setEditMode(),this.action$=this.actionSubject.asObservable()}return ObjectEditModal.prototype.ngOnInit=function(){this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset)},ObjectEditModal.prototype.closeModal=function(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()},Object.defineProperty(ObjectEditModal.prototype,"modalHeader",{get:function(){return this.showDuplicates?this.language.getLabel("LBL_DUPLICATES_FOUND"):""!=this.model.module?this.language.getModuleName(this.model.module,!0):""},enumerable:!0,configurable:!0}),ObjectEditModal.prototype.save=function(t){var i=this;void 0===t&&(t=!1),this.preventGoingToRecord&&(t=!1),this.model.validate()?this.model.isNew&&this.doDuplicateCheck&&!this.showDuplicates&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.model.duplicateCheck(!0).subscribe(function(e){0<e.length?(i.duplicates=e,i.modalContent.element.nativeElement.scrollTop=0,i.showDuplicates=!0):i.saveModel(t)}):this.saveModel(t):console.warn(this.model.messages)},ObjectEditModal.prototype.saveModel=function(i){var s=this;void 0===i&&(i=!1),this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",s.model.save(!0).subscribe(function(e){e&&(s.actionSubject.next(s.model.data),s.actionSubject.complete(),i&&s.model.goDetail(),s.self.destroy()),t.instance.self.destroy()},function(e){t.instance.self.destroy()})})},ObjectEditModal.prototype.saveToRelated=function(i){var s=this;if(!this.model.validate())return!1;this.model.save().subscribe(function(e){var t=s.model.clone();s.closeModal(),s.model.reset(),s.model.module=i,s.model.initialize(t),s.model.data.acl={edit:!0},s.model.isNew=!0,s.model.edit()})},ObjectEditModal.prototype.saveAndGoToRelated=function(t,i){var s=this;if(!this.model.validate())return!1;this.model.save().subscribe(function(e){s.closeModal(),s.router.navigate(["/module/"+t+"/"+i])})},ObjectEditModal.prototype.setModule=function(e){this.model.module=e},Object.defineProperty(ObjectEditModal.prototype,"duplicateStyle",{get:function(){if(this.modalContent){var e=this.modalContent.element.nativeElement.getClientRects();return{height:e[0].height+"px",width:e[0].width+"px",top:"0px"}}return{height:"0px",width:"0px",top:"0px"}},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectEditModal.prototype,"contentStyle",{get:function(){if(this.showDuplicates)return{"overflow-y":"hidden"}},enumerable:!0,configurable:!0}),__decorate([core_1.ViewChild("modalContent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectEditModal.prototype,"modalContent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectEditModal.prototype,"preventGoingToRecord",void 0),ObjectEditModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header (close)="closeModal()">{{modalHeader}}</system-modal-header><system-modal-content margin="none" #modalContent viewprovider><object-edit-modal-dialog-container [module]="model.module" [componentSet]="componentSet" *ngIf="!showDuplicates"></object-edit-modal-dialog-container><object-edit-modal-dialog-duplicates class="slds-theme--shade" *ngIf="showDuplicates" [duplicates]="duplicates"></object-edit-modal-dialog-duplicates></system-modal-content><system-modal-footer><ng-container *ngIf="actionSetItems.length > 0"><ng-container *ngFor="let item of actionSetItems" [ngSwitch]="item.action"><button *ngSwitchCase="\'CANCEL\'" class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button *ngSwitchCase="\'SAVE\'" class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button> <button *ngSwitchCase="\'SAVEANDGOTORECORD\'" class="slds-button slds-button--brand" (click)="save(true)">{{language.getLabel(\'LBL_SAVE_AND_GO_TO_RECORD\')}}</button> <button *ngSwitchCase="\'SAVEGORELATED\'" class="slds-button slds-button--brand" (click)="saveAndGoToRelated(item.actionconfig.related_module, model.data[item.actionconfig.related_fieldname])" [disabled]="!model.data[item.actionconfig.related_fieldname]">{{language.getLabel(\'LBL_SAVE_AND_GO_TO\')}} {{item.actionconfig.related_module}}</button><ng-container *ngSwitchCase="\'SAVETORELATED\'"><button *ngIf="model.isNew" class="slds-button slds-button--brand" (click)="saveToRelated(item.actionconfig.related_module)">Save and create {{item.actionconfig.related_module}}</button> <button *ngIf="!model.isNew" class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></ng-container></ng-container></ng-container><ng-container *ngIf="actionSetItems.length == 0"><button class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button> <button *ngIf="!preventGoingToRecord" class="slds-button slds-button--brand" (click)="save(true)">{{language.getLabel(\'LBL_SAVE_AND_GO_TO_RECORD\')}}</button></ng-container></system-modal-footer></system-modal>',providers:[services_1.view]}),__metadata("design:paramtypes",[router_1.Router,services_1.language,services_1.model,services_1.view,services_1.metadata,services_1.modal])],ObjectEditModal)}();exports.ObjectEditModal=ObjectEditModal;var ObjectEditModalWReference=function(){function ObjectEditModalWReference(e,t,i,s,o,l){this.router=e,this.language=t,this.model=i,this.view=s,this.metadata=o,this.elementref=l,this.componentRefs=[],this.componentSet="",this.module="",this.reference="",this.showDuplicates=!1,this.doDuplicateCheck=!0,this.duplicates=[],this.modalAction$=new core_1.EventEmitter,this.self={},this.view.isEditable=!0,this.view.setEditMode()}return ObjectEditModalWReference.prototype.closeModal=function(){this.modalAction$.emit(!1)},Object.defineProperty(ObjectEditModalWReference.prototype,"modalHeader",{get:function(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""},enumerable:!0,configurable:!0}),ObjectEditModalWReference.prototype.save=function(e){void 0===e&&(e=!1),this.model.validate()?this.modalAction$.emit(this.model.data):console.log(this.model.messages)},Object.defineProperty(ObjectEditModalWReference.prototype,"contentStyle",{get:function(){if(this.showDuplicates)return{"overflow-y":"hidden"}},enumerable:!0,configurable:!0}),__decorate([core_1.ViewChild("modalContent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectEditModalWReference.prototype,"modalContent",void 0),ObjectEditModalWReference=__decorate([core_1.Component({template:'<div role="dialog" class="slds-modal slds-fade-in-open slds-modal--large"><div class="slds-modal__container"><div class="slds-modal__header"><button class="slds-button slds-modal__close slds-button--icon-inverse" (click)="closeModal()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading--medium">{{modalHeader}}</h2></div><div class="slds-modal__content slds-is-relative" #modalContent [ngStyle]="contentStyle"><object-edit-modal-dialog-container [module]="model.module" [componentSet]="componentSet"></object-edit-modal-dialog-container><object-edit-modal-dialog-duplicates class="slds-is-absolute slds-theme--shade" *ngIf="showDuplicates" [ngStyle]="duplicateStyle" [duplicates]="duplicates"></object-edit-modal-dialog-duplicates></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></div></div></div><div class="slds-backdrop slds-backdrop--open"></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[router_1.Router,services_1.language,services_1.model,services_1.view,services_1.metadata,core_1.ElementRef])],ObjectEditModalWReference)}();exports.ObjectEditModalWReference=ObjectEditModalWReference;var ObjectEditModalDialogContainer=function(){function e(e,t){this.model=e,this.metadata=t,this.componentRefs=[],this.componentSet="",this.module=""}return e.prototype.ngAfterViewInit=function(){this.renderComponentSet()},e.prototype.renderComponentSet=function(){for(var i=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}if(!this.componentSet||""==this.componentSet){var s=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=s.componentset}for(var o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(this.componentSet);a<n.length;a++){o(n[a])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"componentSet",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"object-edit-modal-dialog-container",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.model,services_1.metadata])],e)}();exports.ObjectEditModalDialogContainer=ObjectEditModalDialogContainer;var ObjectEditModalDialogDuplicates=function(){function e(e,t,i){this.model=e,this.metadata=t,this.language=i,this.module="",this.duplicates=[],this.fieldset=""}return e.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"duplicates",void 0),e=__decorate([core_1.Component({selector:"object-edit-modal-dialog-duplicates",template:'<object-table [module]="model.module" [fieldset_id]="fieldset" [objects]="duplicates"></object-table>'}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.language])],e)}();exports.ObjectEditModalDialogDuplicates=ObjectEditModalDialogDuplicates;var ObjectOptimisticLockingModal=function(){function ObjectOptimisticLockingModal(e,t,i,s,o){this.language=e,this.model=t,this.view=i,this.metadata=s,this.modal=o,this.self={},this.conflicts={},this._conflicts=[],this.originaldata={},this.fieldsToCopy={}}return ObjectOptimisticLockingModal.prototype.ngOnInit=function(){for(var e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value},ObjectOptimisticLockingModal.prototype.cancel=function(){this.model.cancelEdit(),this.model.getData(),this.self.destroy()},ObjectOptimisticLockingModal.prototype.edit=function(){this.model.edit(),this.self.destroy()},ObjectOptimisticLockingModal.prototype.save=function(i){var s=this;void 0===i&&(i=!1),this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",s.model.setField("date_modified",new moment),s.model.save().subscribe(function(e){e&&(i&&s.model.goDetail(),s.self.destroy()),t.instance.self.destroy()})})},ObjectOptimisticLockingModal.prototype.copyFields=function(){for(var e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)},ObjectOptimisticLockingModal.prototype.toggleChangeDetails=function(e){this.conflicts[e].open=!this.conflicts[e].open},ObjectOptimisticLockingModal.prototype.select=function(e){this.fieldsToCopy[e]=!0},ObjectOptimisticLockingModal.prototype.unselect=function(e){delete this.fieldsToCopy[e]},ObjectOptimisticLockingModal.prototype.changeDetailsIcon=function(e){return this.conflicts[e].open?"chevronup":"chevrondown"},ObjectOptimisticLockingModal.prototype.channgeOpen=function(e){return!!this.conflicts[e].open},ObjectOptimisticLockingModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header [hiddenCloseButton]="true">{{language.getLabel(\'LBL_OPTIMISTICLOCKING_CONFLICT\')}}</system-modal-header><system-modal-content margin="none"><div class="slds-p-around--small"><div class="slds-text-heading--label">{{language.getLabel(\'MSG_OPTIMISTIC_LOCKING\')}}</div><div class="slds-p-vertical--xx-small">{{language.getLabel(\'MSG_OPTIMISTIC_LOCKING\',\'\', \'long\')}}</div></div><table class="slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover"><thead><tr class="slds-line-height_reset"><th class="slds-text-title_caps" scope="col" colspan="2"><div class="slds-truncate">{{language.getLabel(\'LBL_FIELD\')}}</div></th><th class="slds-text-title_caps" scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_CURRENT_VALUE\')}}</div></th><th class="slds-text-title_caps" scope="col" style="width: 3.25rem;"></th><th class="slds-text-title_caps" scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_NEW_VALUE\')}}</div></th></tr></thead><tbody><ng-container *ngFor="let _conflict of _conflicts; let i=index"><tr class="slds-hint-parent"><td><field-label [fieldname]="_conflict.field" style="margin-right: 0"></field-label></td><td style="width:1%"><button class="slds-button slds-button_icon slds-button_icon-border-filled" (click)="toggleChangeDetails(_conflict.field)"><system-button-custom-icon icon="history"></system-button-custom-icon></button></td><td style="width:33%"><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-radio slds-p-right--x-small"><input type="radio" id="radio{{i}}1" name="{{i}}" checked (click)="unselect(_conflict.field)"> <label class="slds-radio__label" for="radio{{i}}1"><span class="slds-radio_faux"></span></label></div><div class="slds-box slds-box--xx-small slds-p-vertical--x-small" style="width:100%"><object-optimisitclocking-modal-data-field [fieldmodule]="model.module" [fieldname]="_conflict.field" [fieldvalue]="_conflict.value"></object-optimisitclocking-modal-data-field></div></div></td><td class="slds-text-align--center"><system-utility-icon icon="forward"></system-utility-icon></td><td style="width:33%"><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-radio slds-p-right--x-small"><input type="radio" id="radio{{i}}2" name="{{i}}" (click)="select(_conflict.field)"> <label class="slds-radio__label" for="radio{{i}}2"><span class="slds-radio_faux"></span></label></div><div class="slds-box slds-box--xx-small slds-p-vertical--x-small" style="width:100%"><field-container [fieldname]="_conflict.field" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></div></td></tr><tr *ngIf="channgeOpen(_conflict.field)"><td style="border-top:none" colspan="2"></td><td style="border-top:none" colspan="3"><object-optimisitclocking-modal-change *ngFor="let change of _conflict.changes" [change]="change"></object-optimisitclocking-modal-change></td></tr></ng-container></tbody></table></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="edit()">öffnen zum weiteren Bearbeiten</button> <button class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></system-modal-footer></system-modal>',providers:[services_1.view],styles:["table { border-bottom: none; }","table tr:last-child td { border-bottom: none; }"]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.view,services_1.metadata,services_1.modal])],ObjectOptimisticLockingModal)}();exports.ObjectOptimisticLockingModal=ObjectOptimisticLockingModal;var ObjectOptimisticLockingModalDataField=function(){function e(e){this.model=e,this.fieldname="",this.fieldmodule=""}return e.prototype.ngOnInit=function(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldname",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldmodule",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fieldvalue",void 0),e=__decorate([core_1.Component({selector:"object-optimisitclocking-modal-data-field",template:'<field-container [field]="fieldname" [fielddisplayclass]="\'slds-truncate\'"></field-container>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model])],e)}();exports.ObjectOptimisticLockingModalDataField=ObjectOptimisticLockingModalDataField;var ObjectOptimisticLockingModalChange=function(){function e(e,t,i){this.model=e,this.language=t,this.userpreferences=i,this.change={}}return Object.defineProperty(e.prototype,"changeDate",{get:function(){var e=moment(this.change.date_created).tz(moment.tz.guess());return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"change",void 0),e=__decorate([core_1.Component({selector:"object-optimisitclocking-modal-change",template:'<div class="slds-p-vertical--xx-small"><div class="slds-box--border"><div class="slds-p-around--x-small"><div class="slds-grid"><div class="slds-m-top--xx-small"><system-custom-icon icon="history" size="small"></system-custom-icon></div><div class="slds-col_bump-right slds-m-left--xx-small"><div>{{changeDate}}, {{language.getLabel(\'LBL_BY\')}} {{change.user_name}}</div><div>{{change.before_value_string}} &nbsp;<system-utility-icon icon="forward" size="xx-small"></system-utility-icon>&nbsp; {{change.after_value_string}}</div></div></div></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.userpreferences])],e)}();exports.ObjectOptimisticLockingModalChange=ObjectOptimisticLockingModalChange;var ObjectListViewAggregatesPanel=function(){function e(e,t,i,s){this.elementRef=e,this.language=t,this.metadata=i,this.modellist=s}return e.prototype.getPanelStyle=function(){return{height:"calc(100vh - "+this.elementRef.nativeElement.getBoundingClientRect().top+"px)"}},e.prototype.getAggregates=function(){var e=[];for(var t in this.modellist.searchAggregates)this.modellist.searchAggregates.hasOwnProperty(t)&&e.push(this.modellist.searchAggregates[t]);return e},e.prototype.clearAggregates=function(){this.modellist.removeAllAggregates()},e=__decorate([core_1.Component({selector:"object-listview-aggregates-panel",template:'<div class="slds-panel slds-grid slds-grid--vertical slds-nowrap slds-panel--filters" [ngStyle]="getPanelStyle()"><div class="slds-form--stacked slds-grow slds-scrollable--y slds-grid slds-grid--vertical"><div class="slds-filters"><div class="slds-filters__header slds-grid slds-grid--align-spread slds-has-divider--bottom-space"><h4 class="slds-align-middle slds-text-heading--small">{{language.getLabel(\'LBL_AGGREGATES\')}}</h4><button [disabled]="!modellist.hasAggregates()" class="slds-button slds-button--brand" (click)="clearAggregates()">{{language.getLabel(\'LBL_CLEARALL\')}}</button></div><div class="slds-filters__body"><ol class="slds-list--vertical slds-list--vertical-space"><li class="slds-item slds-hint-parent" object-listview-aggregate *ngFor="let aggregate of getAggregates()" [aggregate]="aggregate"></li></ol></div></div></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.language,services_1.metadata,services_1.modellist])],e)}();exports.ObjectListViewAggregatesPanel=ObjectListViewAggregatesPanel;var ObjectListViewAggregate=function(){function e(e,t,i,s,o){this.elementRef=e,this.language=t,this.metadata=i,this.modellist=s,this.model=o,this.aggregate={},this.setaggregates={}}return e.prototype.isChecked=function(e,t){return 0<=this.modellist.selectedAggregates.indexOf(e+"::"+t)},e.prototype.selectAggregate=function(e,t){this.modellist.selectedAggregates.push(e+"::"+t)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"[object-listview-aggregate]",template:'<div class="slds-filters__item slds-grid slds-grid--vertical-align-center"><fieldset class="slds-form--stacked"><div class="slds-form-element"><p class="slds-text-body--regular">{{language.getLabel(aggregate.name)}}</p></div><div class="slds-form-element" *ngFor="let bucketItem of aggregate.buckets"><div object-listview-aggregate-item [bucketitem]="bucketItem" [aggregate]="aggregate.aggregateindex" class="slds-form-element__control"></div></div><div *ngIf="aggregate.sum_other_doc_count"><p class="slds-text-body--small slds-text-color--weak">{{aggregate.sum_other_doc_count}} {{language.getLabel(\'LBL_ARE_NOT_INCLUDED\')}}...</p></div></fieldset></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.language,services_1.metadata,services_1.modellist,services_1.model])],e)}();exports.ObjectListViewAggregate=ObjectListViewAggregate;var ObjectListViewAggregateItem=function(){function e(e,t,i,s,o){this.elementRef=e,this.language=t,this.metadata=i,this.modellist=s,this.model=o,this.bucketitem={},this.aggregate="",this.isChecked=!1}return Object.defineProperty(e.prototype,"checked",{get:function(){return this.modellist.checkAggregate(this.aggregate,this.bucketitem.aggdata)},set:function(e){(this.isChecked=e)?this.modellist.setAggregate(this.aggregate,this.bucketitem.aggdata):this.modellist.removeAggregate(this.aggregate,this.bucketitem.aggdata)},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"bucketitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"[object-listview-aggregate-item]",template:'<system-checkbox [(ngModel)]="checked">{{bucketitem.displayName}} ({{bucketitem.doc_count}})</system-checkbox>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.language,services_1.metadata,services_1.modellist,services_1.model])],e)}();exports.ObjectListViewAggregateItem=ObjectListViewAggregateItem;var ObjectListViewFilterPanel=function(){function e(e,t,i,s,o,l,a){var n=this;this.elementRef=e,this.listfilters=t,this.language=i,this.metadata=s,this.modellist=o,this.model=l,this.renderer=a,this.setBaseFilter(),this.modellist.listtype$.subscribe(function(e){return n.setBaseFilter()})}return e.prototype.setBaseFilter=function(){this.listfilters.basefilter=this.modellist.getBaseFilter(),this.listfilters.loadedBasefilter=this.modellist.getBaseFilter(),this.listfilters.filters=this.modellist.getFilterDefs(),this.listfilters.loadedFilters=this.modellist.getFilterDefs()},e.prototype.isChanged=function(){return this.listfilters.isDirty()},e.prototype.save=function(){var t=this;this.modellist.updateListType({basefilter:this.listfilters.basefilter,filterdefs:btoa(JSON.stringify(this.listfilters.filters))}).subscribe(function(e){t.listfilters.loadedBasefilter=t.modellist.getBaseFilter(),t.listfilters.loadedFilters=t.modellist.getFilterDefs()})},e.prototype.cancel=function(){this.listfilters.basefilter=this.modellist.getBaseFilter(),this.listfilters.filters=this.modellist.getFilterDefs()},e.prototype.addFilter=function(){this.listfilters.filters.push({id:this.model.generateGuid(),field:"",operator:"",filtervalue:""})},e.prototype.removeAllFilters=function(){this.listfilters.filters=[]},e.prototype.getPanelStyle=function(){return{height:"calc(100vh - "+this.elementRef.nativeElement.getBoundingClientRect().top+"px)"}},e=__decorate([core_1.Component({selector:"object-listview-filter-panel",template:'<div class="slds-panel slds-grid slds-grid--vertical slds-nowrap slds-panel--filters" [ngStyle]="getPanelStyle()"><div class="slds-form--stacked slds-grow slds-scrollable--y slds-grid slds-grid--vertical"><div class="slds-filters"><div *ngIf="!isChanged()" class="slds-filters__header slds-grid slds-has-divider--bottom-space"><h4 class="slds-align-middle slds-text-heading--small">{{language.getLabel(\'LBL_FILTER\')}}</h4><object-listview-filter-panel-export-button class="slds-col--bump-left"></object-listview-filter-panel-export-button></div><div *ngIf="isChanged()" class="slds-filters__header slds-grid slds-grid--align-spread slds-has-divider--bottom-space"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></div><div class="slds-filters__body"><object-listview-filter-panel-filter-myitems></object-listview-filter-panel-filter-myitems><ng-container *ngIf="listfilters.filters.length > 0"><p class="slds-text-body--small slds-m-vertical--x-small">Matching all these filters</p><ol class="slds-list--vertical slds-list--vertical-space"><li class="slds-item slds-hint-parent" object-listview-filter-panel-filter-item *ngFor="let filter of listfilters.filters" [filter]="filter"></li></ol></ng-container></div><div class="slds-filters__footer slds-grid slds-shrink-none"><a href="javascript:void(0);" (click)="addFilter()">{{language.getLabel(\'LBL_ADDFILTER\')}}</a> <a href="javascript:void(0);" class="slds-col--bump-left" (click)="removeAllFilters()">{{language.getLabel(\'LBL_REMOVEALL\')}}</a></div></div></div></div>',providers:[listfilters]}),__metadata("design:paramtypes",[core_1.ElementRef,listfilters,services_1.language,services_1.metadata,services_1.modellist,services_1.model,core_1.Renderer2])],e)}();exports.ObjectListViewFilterPanel=ObjectListViewFilterPanel;var ObjectListViewFilterPanelExportButton=function(){function e(e,t,i,s,o,l,a,n,d){this.elementRef=e,this.listfilters=t,this.language=i,this.metadata=s,this.modellist=o,this.model=l,this.modal=a,this.renderer=n,this.backend=d,this.exportfilterOpen=!1}return e.prototype.toggleFilterOpen=function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.exportfilterOpen=!this.exportfilterOpen,this.exportfilterOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.exportfilterOpen=!1)},Object.defineProperty(e.prototype,"exportdisabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"export")},enumerable:!0,configurable:!0}),e.prototype.export=function(){var s=this;this.exportfilterOpen=!1,this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_EXPORTING";var e={listid:s.modellist.currentList.id,sortfield:s.modellist.sortfield,sortdirection:s.modellist.sortdirection,fields:JSON.stringify(s.modellist.lastFields)},i=s.model.module+"_"+s.modellist.currentList.name+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv";s.backend.downloadFile({route:"/module/"+s.model.module+"/export",params:e},i).subscribe(function(e){t.instance.self.destroy()})})},e.prototype.exportTargetList=function(){var t=this;this.exportfilterOpen=!1,this.modal.openModal("ObjectListViewFilterPanelExportTargetlist").subscribe(function(e){e.instance.listId=t.modellist.currentList.id})},e=__decorate([core_1.Component({selector:"object-listview-filter-panel-export-button",template:'<div class="slds-button-group" role="group"><button class="slds-button slds-button_neutral" [disabled]="exportdisabled" (click)="export()">{{language.getLabel(\'LBL_EXPORT\')}}</button><div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" [ngClass]="{\'slds-is-open\' :exportfilterOpen}"><button class="slds-button slds-button_icon slds-button_icon-border-filled" [disabled]="exportdisabled" (click)="toggleFilterOpen($event)"><system-button-icon icon="down" size="small"></system-button-icon></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation" (click)="exportTargetList()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate" title="Overflow Item One">{{language.getLabel(\'LBL_EXPORT_PROSPECTLIST\')}}</span></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,listfilters,services_1.language,services_1.metadata,services_1.modellist,services_1.model,services_1.modal,core_1.Renderer2,services_1.backend])],e)}();exports.ObjectListViewFilterPanelExportButton=ObjectListViewFilterPanelExportButton;var ObjectListViewFilterPanelExportTargetlist=function(){function ObjectListViewFilterPanelExportTargetlist(e,t,i,s,o,l){this.language=e,this.metadata=t,this.backend=i,this.toast=s,this.router=o,this.modal=l,this.self={},this.listId="",this.targetlistname=""}return ObjectListViewFilterPanelExportTargetlist.prototype.close=function(){this.self.destroy()},ObjectListViewFilterPanelExportTargetlist.prototype.export=function(){var i=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_EXPORTING",i.backend.postRequest("/modules/ProspectLists/createfromlist/"+i.listId,{targetlistname:i.targetlistname}).subscribe(function(e){t.instance.self.destroy(),"success"==e.status?(i.router.navigate(["/module/ProspectLists/"+e.id]),i.close()):i.toast.sendToast(e.msg,"error")})})},ObjectListViewFilterPanelExportTargetlist=__decorate([core_1.Component({selector:"object-listview-filter-panel-export-targetlist",template:'<system-modal><system-modal-header (close)="close()">{{language.getLabel(\'LBL_EXPORT_PROSPECTLIST\')}}</system-modal-header><system-modal-content><div class="slds-form-element"><label class="slds-form-element__label"><abbr class="slds-required" title="required">*</abbr> {{language.getLabel(\'LBL_PROSPECTLIST\')}}</label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="targetlistname"></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" [disabled]="!targetlistname" (click)="export()">{{language.getLabel(\'LBL_EXPORT\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.backend,services_1.toast,router_1.Router,services_1.modal])],ObjectListViewFilterPanelExportTargetlist)}();exports.ObjectListViewFilterPanelExportTargetlist=ObjectListViewFilterPanelExportTargetlist;var ObjectListViewFilterPanelFilterMyItems=function(){function e(e,t,i,s,o,l){this.listfilters=e,this.elementRef=t,this.metadata=i,this.language=s,this.componentFactoryResolver=o,this.modellist=l,this.showPopover=!1,this.filterValue="all"}return e.prototype.onClick=function(){this.showPopover||(this.showPopover=!0)},e.prototype.onFocus=function(e){window.setTimeout(function(){e.target.blur()},250)},e.prototype.closePopover=function(){this.showPopover=!1},e.prototype.onDocumentClick=function(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1))},e.prototype.getPopoverStyle=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px",display:this.showPopover?"":"none"}},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"popover",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-myitems",template:'<ol class="slds-list--vertical slds-list--vertical-space"><li class="slds-item slds-hint-parent"><div class="slds-filters__item slds-grid slds-grid--vertical-align-center"><a href="javascript:void(0);" class="slds-grow slds-has-blur-focus" (focus)="onFocus($event)"><p class="slds-text-body--small">{{language.getLabel(\'LBL_DISPLAY\')}}</p><p>{{language.getLabel(\'LBL_\' + listfilters.basefilter.toUpperCase())}} {{language.getModuleName(modellist.module)}}</p></a></div></li><div #popover [ngStyle]="getPopoverStyle()"><div *ngIf="showPopover" class="slds-popover slds-nubbin--right" role="dialog"><div class="slds-popover__body"><fieldset class="slds-form-element"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_DISPLAY\')}}</legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="radio-306" name="scope" value="all" [(ngModel)]="listfilters.basefilter"> <label class="slds-radio__label" for="radio-306"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_ALL\')}} {{language.getModuleName(modellist.module)}}</span></label></span> <span class="slds-radio"><input type="radio" id="radio-307" name="scope" value="own" [(ngModel)]="listfilters.basefilter"> <label class="slds-radio__label" for="radio-307"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_OWN\')}} {{language.getModuleName(modellist.module)}}</span></label></span></div></fieldset><div class="spicecrm-popup-buttoncontainer"><button type="button" class="slds-button slds-button--neutral slds-button-space-left" (click)="closePopover()">{{language.getLabel(\'LBL_DONE\')}}</button></div></div></div></div></ol>',host:{"(click)":"this.onClick()","(document:click)":"this.onDocumentClick($event)"}}),__metadata("design:paramtypes",[listfilters,core_1.ElementRef,services_1.metadata,services_1.language,core_1.ComponentFactoryResolver,services_1.modellist])],e)}();exports.ObjectListViewFilterPanelFilterMyItems=ObjectListViewFilterPanelFilterMyItems;var ObjectListViewFilterPanelFilterItem=function(){function e(e,t,i,s,o,l){this.listfilters=e,this.elementRef=t,this.metadata=i,this.language=s,this.modellist=o,this.renderer=l,this.showPopover=!1,this.listFields=[],this.filter={},this.clickListener=null,this.currentFieldType="text";for(var a=this.metadata.getComponentConfig("ObjectList",this.modellist.module),n=0,d=this.metadata.getFieldSetFields(a.fieldset);n<d.length;n++){var r=d[n];r.displayName=this.language.getFieldDisplayName(this.modellist.module,r.field),this.listFields.push(r)}this.listFields=this.listFields.sort(function(e,t){return e.displayName===t.displayName?0:e.displayName>t.displayName?1:-1})}return e.prototype.ngOnInit=function(){var t=this;""===this.filter.field&&window.setTimeout(function(){return t.showPopover=!0},250),this.clickListener=this.renderer.listen("document","click",function(e){return t.onDocumentClick(e)}),this.getFieldType()},e.prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},e.prototype.onClick=function(){this.showPopover||(this.showPopover=!0)},e.prototype.onFocus=function(e){window.setTimeout(function(){e.target.blur()},250)},Object.defineProperty(e.prototype,"operator",{get:function(){return this.filter.operator?this.language.getLabel("LBL_"+this.filter.operator.toUpperCase()):""},enumerable:!0,configurable:!0}),e.prototype.closePopover=function(){this.showPopover=!1},e.prototype.onDocumentClick=function(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1))},e.prototype.getPopoverStyle=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px",display:this.showPopover?"":"none"}},e.prototype.getDisplayName=function(){return this.filter.field?this.language.getFieldDisplayName(this.modellist.module,this.filter.field):"new Filter"},e.prototype.deleteFilter=function(){var i=this;this.listfilters.filters.some(function(e,t){if(e.id==i.filter.id)return i.listfilters.filters.splice(t,1),!0})},e.prototype.fieldChanged=function(){this.filter.operator="",this.filter.filtervalue="",this.getFieldType()},e.prototype.getFieldType=function(){if(this.filter.field)switch(this.metadata.getFieldType(this.modellist.module,this.filter.field)){case"enum":this.currentFieldType="enum";break;case"bool":case"boolean":this.currentFieldType="bool";break;case"date":case"datetime":this.currentFieldType="date";break;default:this.currentFieldType="text"}else this.currentFieldType="text"},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"popover",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"filter",void 0),e=__decorate([core_1.Component({selector:"[object-listview-filter-panel-filter-item]",template:'<div class="slds-filters__item slds-grid slds-grid--vertical-align-center"><a href="javascript:void(0);" class="slds-grow slds-has-blur-focus" (click)="onClick()" (focus)="onFocus($event)"><p class="slds-text-body--small">{{getDisplayName()}}</p><p>{{operator}} {{filter.filtervalue}}</p></a><div class="slds-form-element"><div class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" name="options" checked></span></div></div><button class="slds-button slds-button--icon slds-button--icon-small" (click)="deleteFilter()"><system-button-icon [icon]="\'close\'"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_REMOVE\')}}</span></button></div><div #popover [ngStyle]="getPopoverStyle()"><div *ngIf="showPopover" class="slds-popover slds-nubbin--right" role="dialog"><div class="slds-popover__body"><fieldset class="slds-form--stacked"><div class="slds-form-element"><label class="slds-form-element__label">{{language.getLabel(\'LBL_FIELD\')}}</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="filter.field" (change)="fieldChanged()"><ng-container *ngFor="let o of listFields"><option [value]="o.field">{{o.displayName}}</option></ng-container></select></div></div></div><ng-container [ngSwitch]="currentFieldType"><object-listview-filter-panel-filter-enum *ngSwitchCase="\'enum\'" [filter]="filter"></object-listview-filter-panel-filter-enum><object-listview-filter-panel-filter-bool *ngSwitchCase="\'bool\'" [filter]="filter"></object-listview-filter-panel-filter-bool><object-listview-filter-panel-filter-date *ngSwitchCase="\'date\'" [filter]="filter"></object-listview-filter-panel-filter-date><object-listview-filter-panel-filter-text *ngSwitchDefault [filter]="filter"></object-listview-filter-panel-filter-text></ng-container></fieldset><div class="spicecrm-popup-buttoncontainer"><button type="button" class="slds-button slds-button--neutral slds-button-space-left" (click)="closePopover()">{{language.getLabel(\'LBL_DONE\')}}</button></div></div></div></div>'}),__metadata("design:paramtypes",[listfilters,core_1.ElementRef,services_1.metadata,services_1.language,services_1.modellist,core_1.Renderer2])],e)}();exports.ObjectListViewFilterPanelFilterItem=ObjectListViewFilterPanelFilterItem;var ObjectListViewFilterPanelFilterText=function(){function e(e,t,i,s){this.elementRef=e,this.metadata=t,this.language=i,this.model=s,this.filter={},this.operators=[{operator:"equals",name:"LBL_EQUALS"},{operator:"starts",name:"LBL_STARTS"},{operator:"contains",name:"LBL_CONTAINS"},{operator:"ncontains",name:"LBL_NCONTAINS"},{operator:"greater",name:"LBL_GREATER"},{operator:"gequal",name:"LBL_GEQUAL"},{operator:"smaller",name:"LBL_SMALLER"},{operator:"sequal",name:"LBL_SEQUAL"}]}return e.prototype.operatorDisabled=function(){return!this.filter.field},e.prototype.valueDisabled=function(){return!this.filter.operator},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"filter",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-text",template:'<div class="slds-form-element"><label class="slds-form-element__label">Operator</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="filter.operator" [disabled]="operatorDisabled()"><option *ngFor="let operator of operators" [value]="operator.operator">{{language.getLabel(operator.name)}}</option></select></div></div></div><div class="slds-form-element"><label class="slds-form-element__label">Value</label><div class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="filter.filtervalue" [disabled]="valueDisabled()"></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.metadata,services_1.language,services_1.model])],e)}();exports.ObjectListViewFilterPanelFilterText=ObjectListViewFilterPanelFilterText;var ObjectListViewFilterPanelFilterEnum=function(){function e(e,t,i,s){this.elementRef=e,this.metadata=t,this.language=i,this.model=s,this.filter={},this.operators=[{operator:"equals",name:"LBL_EQUALS"},{operator:"oneof",name:"LBL_ONEOF"},{operator:"empty",name:"LBL_EMPTY"}],this.options=[]}return e.prototype.ngOnInit=function(){var e=this.language.getFieldDisplayOptions(this.model.module,this.filter.field);for(var t in e)""!=t&&this.options.push({value:t,display:e[t]})},e.prototype.operatorDisabled=function(){return!this.filter.field},e.prototype.valueDisabled=function(){return!this.filter.operator},Object.defineProperty(e.prototype,"multiple",{get:function(){return"oneof"==this.filter.operator},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"filter",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-enum",template:'<div class="slds-form-element"><label class="slds-form-element__label">Operator</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="filter.operator" [disabled]="operatorDisabled()"><option *ngFor="let operator of operators" [value]="operator.operator">{{language.getLabel(operator.name)}}</option></select></div></div></div><div class="slds-form-element"><label class="slds-form-element__label">Value</label><div class="slds-form-element__control"><select class="slds-select" [(ngModel)]="filter.filtervalue" [disabled]="valueDisabled()" [multiple]="multiple"><option *ngFor="let option of options" [value]="option.value">{{option.display}}</option></select></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.metadata,services_1.language,services_1.model])],e)}();exports.ObjectListViewFilterPanelFilterEnum=ObjectListViewFilterPanelFilterEnum;var ObjectListViewFilterPanelFilterBool=function(){function e(e,t,i,s){this.elementRef=e,this.metadata=t,this.language=i,this.model=s,this.filter={}}return e.prototype.ngOnInit=function(){this.filter.operator="equals"},e.prototype.valueDisabled=function(){return!this.filter.field},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"filter",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-bool",template:'<div class="slds-form-element"><label class="slds-form-element__label">Value</label><div class="slds-form-element__control"><select class="slds-select" [(ngModel)]="filter.filtervalue" [disabled]="valueDisabled()"><option value="1">Yes</option><option value="0">No</option></select></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,services_1.metadata,services_1.language,services_1.model])],e)}();exports.ObjectListViewFilterPanelFilterBool=ObjectListViewFilterPanelFilterBool;var ObjectListViewFilterPanelFilterDate=function(){function e(e,t){this.language=e,this.model=t,this.filter={},this.operators=[{operator:"today",name:"LBL_TODAY"},{operator:"past",name:"LBL_PAST"},{operator:"future",name:"LBL_FUTURE"},{operator:"thismonth",name:"LBL_THIS_MONTH"},{operator:"thisquarter",name:"LBL_THIS_QUARTER"},{operator:"thisyear",name:"LBL_THIS_YEAR"},{operator:"nextmonth",name:"LBL_NEXT_MONTH"},{operator:"nextquarter",name:"LBL_NEXT_QUARTER"},{operator:"nextyear",name:"LBL_NEXT_YEAR"}],this.options=[]}return e.prototype.ngOnInit=function(){var e=this.language.getFieldDisplayOptions(this.model.module,this.filter.field);for(var t in e)""!=t&&this.options.push({value:t,display:e[t]})},e.prototype.operatorDisabled=function(){return!this.filter.field},e.prototype.valueDisabled=function(){return!0},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"filter",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-date",template:'<div class="slds-form-element"><label class="slds-form-element__label">Operator</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="filter.operator" [disabled]="operatorDisabled()"><option *ngFor="let operator of operators" [value]="operator.operator">{{language.getLabel(operator.name)}}</option></select></div></div></div><div class="slds-form-element"><label class="slds-form-element__label">Value</label><div class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="filter.filtervalue" [disabled]="valueDisabled()"></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model])],e)}();exports.ObjectListViewFilterPanelFilterDate=ObjectListViewFilterPanelFilterDate;var ObjectListViewSettings=function(){function e(e,t,i,s,o){this.language=e,this.elementRef=t,this.modal=i,this.modellist=s,this.renderer=o,this.showMenu=!1}return e.prototype.toggleMenu=function(){var t=this;this.showMenu=!this.showMenu,this.showMenu?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1,this.clickListener())},e.prototype.add=function(){var t=this;this.modal.openModal("ObjectListViewSettingsAddlistModal").subscribe(function(e){e.instance.modellist=t.modellist,e.instance.modalmode="add"})},e.prototype.edit=function(){var t=this;if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal").subscribe(function(e){e.instance.modellist=t.modellist,e.instance.modalmode="edit"})},e.prototype.setfields=function(){var t=this;if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal").subscribe(function(e){e.instance.modellist=t.modellist})},e.prototype.delete=function(){var t=this;if(!this.modellist.checkAccess("delete"))return!1;this.modal.openModal("ObjectListViewSettingsDeletelistModal").subscribe(function(e){e.instance.modellist=t.modellist})},e=__decorate([core_1.Component({selector:"object-listview-settings",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click slds-m-left--x-small" [ngClass]="{\'slds-is-open\': showMenu}"><button class="slds-button slds-button--icon-more" (click)="toggleMenu()" style="height: 1.875rem;"><system-button-icon icon="settings"></system-button-icon><system-button-icon [icon]="\'down\'" [size]="\'x-small\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right slds-dropdown--medium" (click)="toggleMenu()"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps">{{language.getLabel(\'LBL_LISTVIEWSETTINGS\')}}</span></li><li class="slds-dropdown__item" role="presentation"><a style="cursor: pointer" class="slds-button" role="menuitem" (click)="add()"><span class="slds-truncate">{{language.getLabel(\'LBL_NEW\')}}</span></a></li><li class="slds-dropdown__item" role="presentation"><a style="cursor: pointer" class="slds-button" role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'edit\')" (click)="edit()"><span class="slds-truncate">{{language.getLabel(\'LBL_EDIT\')}}</span></a></li><li class="slds-dropdown__item" role="presentation"><a style="cursor: pointer" class="slds-button" role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'edit\')" (click)="setfields()"><span class="slds-truncate">{{language.getLabel(\'LBL_SETFIELDS\')}}</span></a></li><li class="slds-dropdown__item" role="presentation"><a style="cursor: pointer" class="slds-button" role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'delete\')" (click)="delete()"><span class="slds-truncate">{{language.getLabel(\'LBL_DELETE\')}}</span></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.language,core_1.ElementRef,services_1.modal,services_1.modellist,core_1.Renderer2])],e)}();exports.ObjectListViewSettings=ObjectListViewSettings;var ObjectListViewSettingsAddlistModal=function(){function ObjectListViewSettingsAddlistModal(e,t){this.language=e,this.session=t,this.modalmode="",this.listname="",this.globallist=!1,this.self={},this.modellist={}}return ObjectListViewSettingsAddlistModal.prototype.ngOnInit=function(){"edit"===this.modalmode&&(this.listname=this.modellist.getListTypeName(),this.globallist=this.modellist.getGlobal())},ObjectListViewSettingsAddlistModal.prototype.close=function(){this.self.destroy()},ObjectListViewSettingsAddlistModal.prototype.canSave=function(){return!(0<this.listname.length)},ObjectListViewSettingsAddlistModal.prototype.save=function(){var t=this;if(0<this.listname.length)switch(this.modalmode){case"add":this.modellist.addListType(this.listname,this.globallist).subscribe(function(e){t.close()});break;case"edit":this.modellist.updateListType({name:this.listname,global:this.globallist}).subscribe(function(e){t.close()})}},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectListViewSettingsAddlistModal.prototype,"modalmode",void 0),ObjectListViewSettingsAddlistModal=__decorate([core_1.Component({selector:"object-listview-settings-addlist-modal",template:'<system-modal><system-modal-header (close)="close()">{{language.getLabel(\'LBL_\'+modalmode.toUpperCase()+\'LIST\')}}</system-modal-header><system-modal-content><div class="slds-form--stacked"><div class="slds-form-element"><label class="slds-form-element__label"><abbr class="slds-required">*</abbr>{{language.getLabel(\'LBL_NEWLISTNAME\')}}</label><div class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="listname" autofocus></div></div><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="globallist" [disabled]="!session.authData.admin">{{language.getLabel(\'LBL_GLOBALVISIBLE\')}}</system-checkbox></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" [disabled]="canSave()" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language,services_1.session])],ObjectListViewSettingsAddlistModal)}();exports.ObjectListViewSettingsAddlistModal=ObjectListViewSettingsAddlistModal;var ObjectListViewSettingsDeletelistModal=function(){function ObjectListViewSettingsDeletelistModal(e){this.language=e,this.self={},this.modellist={}}return ObjectListViewSettingsDeletelistModal.prototype.close=function(){this.self.destroy()},ObjectListViewSettingsDeletelistModal.prototype.delete=function(){var t=this;this.modellist.deleteListType().subscribe(function(e){t.close()})},ObjectListViewSettingsDeletelistModal=__decorate([core_1.Component({selector:"object-listview-settings-deletelist-modal",template:"<system-modal><system-modal-header>{{language.getAppLanglabel('MSG_DELETE_RECORD')}}</system-modal-header><system-modal-content>{{language.getAppLanglabel('MSG_DELETE_RECORD', 'long')}}</system-modal-content><system-modal-footer><button class=\"slds-button slds-button--neutral\" (click)=\"closePopup()\">{{language.getLabel('LBL_CANCEL')}}</button> <button class=\"slds-button slds-button--brand\" (click)=\"delete()\">{{language.getLabel('LBL_DELETE')}}</button></system-modal-footer></system-modal>"}),__metadata("design:paramtypes",[services_1.language])],ObjectListViewSettingsDeletelistModal)}();exports.ObjectListViewSettingsDeletelistModal=ObjectListViewSettingsDeletelistModal;var ObjectListViewSettingsSetfieldsModal=function(){function ObjectListViewSettingsSetfieldsModal(e,t){this.metadata=e,this.language=t,this.allListFields=[],this.listFields=[],this.selectedListFields=[],this.availableFields=[],this.selectedAvailableFields=[],this.multiselect=!1,this.self={},this.modellist={}}return ObjectListViewSettingsSetfieldsModal.prototype.ngOnInit=function(){for(var i=this.modellist.getFieldDefs(),e=this.metadata.getComponentConfig("ObjectList",this.modellist.module),t=0,s=this.metadata.getFieldSetFields(e.fieldset);t<s.length;t++){var o=s[t];o.displayName=this.language.getFieldDisplayName(this.modellist.module,o.field),0<i.length&&0<=i.indexOf(o.field)||0===i.length&&!1!==o.fieldconfig.default?this.listFields.push(o):this.availableFields.push(o)}0<i.length&&this.listFields.sort(function(e,t){return i.indexOf(e.field)-i.indexOf(t.field)}),this.sortAvailableFields()},ObjectListViewSettingsSetfieldsModal.prototype.sortAvailableFields=function(){this.availableFields=this.availableFields.sort(function(e,t){return e.displayName===t.displayName?0:e.displayName>t.displayName?1:-1})},ObjectListViewSettingsSetfieldsModal.prototype.keypressed=function(e){"keydown"===e.type&&"Control"===e.key&&!1===this.multiselect&&(this.multiselect=!0),"keyup"===e.type&&"Control"===e.key&&!0===this.multiselect&&(this.multiselect=!1)},ObjectListViewSettingsSetfieldsModal.prototype.close=function(){this.self.destroy()},ObjectListViewSettingsSetfieldsModal.prototype.canSave=function(){return 0<this.listFields.length},ObjectListViewSettingsSetfieldsModal.prototype.save=function(){var t=this;if(this.canSave()){for(var e=[],i=0,s=this.listFields;i<s.length;i++){var o=s[i];e.push(o.field)}this.modellist.updateListType({fielddefs:btoa(JSON.stringify(e))}).subscribe(function(e){return t.close()})}},ObjectListViewSettingsSetfieldsModal.prototype.selectField=function(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:0<=this.selectedAvailableFields.indexOf(t)?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:0<=this.selectedListFields.indexOf(t)?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}},ObjectListViewSettingsSetfieldsModal.prototype.isSelected=function(e,t){switch(e){case"available":return 0<=this.selectedAvailableFields.indexOf(t);case"list":return 0<=this.selectedListFields.indexOf(t)}},ObjectListViewSettingsSetfieldsModal.prototype.moveFields=function(e){var s=this;switch(e){case"available":this.selectedAvailableFields.forEach(function(i){s.availableFields.some(function(e,t){if(i==e.field)return s.listFields.push(s.availableFields.splice(t,1)[0]),!0})}),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach(function(i){s.listFields.some(function(e,t){if(i==e.field)return s.availableFields.push(s.listFields.splice(t,1)[0]),!0})}),this.selectedListFields=[],this.sortAvailableFields()}},ObjectListViewSettingsSetfieldsModal.prototype.moveUp=function(){var t=this,s=[],i=-1;this.selectedListFields.forEach(function(i){t.listFields.some(function(e,t){if(i==e.field)return s.push(t),!0})}),s.sort(),s.forEach(function(e){i=i<e-1&&0<e?(t.listFields.splice(e-1,0,t.listFields.splice(e,1)[0]),e-1):e})},ObjectListViewSettingsSetfieldsModal.prototype.moveDown=function(){var t=this,s=[],i=this.listFields.length;this.selectedListFields.forEach(function(i){t.listFields.some(function(e,t){if(i==e.field)return s.push(t),!0})}),s.sort().reverse(),s.forEach(function(e){i=e+1<i&&e<t.listFields.length-1?(t.listFields.splice(e+1,0,t.listFields.splice(e,1)[0]),e+1):e})},ObjectListViewSettingsSetfieldsModal=__decorate([core_1.Component({selector:"object-listview-settings-setfields-modal",template:'<system-modal><system-modal-header (close)="close()">{{language.getLabel(\'LBL_SETFIELDS\')}}</system-modal-header><system-modal-content><div class="slds-grid"><div class="slds-grid slds-grid--align-center"><div class="slds-form-element"><span class="slds-form-element__label" aria-label="select-1">Available Fields</span><div class="slds-picklist"><ul class="slds-picklist__options slds-picklist__options--multi"><li *ngFor="let field of availableFields" draggable="false" class="slds-picklist__item" [attr.aria-selected]="isSelected(\'available\', field.field)" role="option" (click)="selectField(\'available\', field.field)"><span class="slds-truncate">{{field.displayName}}</span></li></ul></div></div><div class="slds-grid slds-grid--vertical"><button class="slds-button slds-button--icon-container" [disabled]="selectedListFields.length === 0" (click)="moveFields(\'list\')"><system-button-icon [icon]="\'left\'"></system-button-icon></button> <button class="slds-button slds-button--icon-container" [disabled]="selectedAvailableFields.length === 0" (click)="moveFields(\'available\')"><system-button-icon [icon]="\'right\'"></system-button-icon></button></div></div><div class="slds-grid slds-grid--align-center"><div class="slds-form-element"><span class="slds-form-element__label" aria-label="select-1">Display Fields</span><div class="slds-picklist"><ul class="slds-picklist__options slds-picklist__options--multi"><li *ngFor="let field of listFields" draggable="false" class="slds-picklist__item" [attr.aria-selected]="isSelected(\'list\', field.field)" role="option" (click)="selectField(\'list\', field.field)"><span class="slds-truncate">{{field.displayName}}</span></li></ul></div></div><div class="slds-grid slds-grid--vertical"><button class="slds-button slds-button--icon-container" [disabled]="selectedListFields.length === 0" (click)="moveUp()"><system-button-icon [icon]="\'up\'"></system-button-icon></button> <button class="slds-button slds-button--icon-container" [disabled]="selectedListFields.length === 0" (click)="moveDown()"><system-button-icon [icon]="\'down\'"></system-button-icon></button></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closePopup()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" [disabled]="!canSave()" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></system-modal-footer></system-modal>',host:{"(document:keydown)":"this.keypressed($event)","(document:keyup)":"this.keypressed($event)"}}),__metadata("design:paramtypes",[services_1.metadata,services_1.language])],ObjectListViewSettingsSetfieldsModal)}();exports.ObjectListViewSettingsSetfieldsModal=ObjectListViewSettingsSetfieldsModal;var ObjectRecordViewContainer=function(){function ObjectRecordViewContainer(e,t,i,s,o,l){var a=this;this.navigation=e,this.activatedRoute=t,this.metadata=i,this.model=s,this.broadcast=o,this.elementref=l,this.module="",this.id="",this.initialized=!1,this.componentset="",this.componentRefs=[],this.routeSubscribe={},this.componentSubscriptions=[],this.componentSubscriptions.push(this.activatedRoute.params.subscribe(function(e){a.module=e.module,a.id=e.id,a.navigation.setActiveModule(a.module),a.initialized&&a.buildContainer()})),this.componentSubscriptions.push(this.broadcast.message$.subscribe(function(e){a.handleMessage(e)}))}return ObjectRecordViewContainer.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":this.buildContainer()}},ObjectRecordViewContainer.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectRecordViewContainer.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentSubscriptions;e<t.length;e++){t[e].unsubscribe()}},ObjectRecordViewContainer.prototype.buildContainer=function(){for(var i=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}var s=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=s.componentset;for(var o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(this.componentset);a<n.length;a++){o(n[a])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectRecordViewContainer.prototype,"container",void 0),ObjectRecordViewContainer=__decorate([core_1.Component({selector:"object-recordview-container",template:"<div #container></div>",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.navigation,router_1.ActivatedRoute,services_1.metadata,services_1.model,services_1.broadcast,core_1.ElementRef])],ObjectRecordViewContainer)}();exports.ObjectRecordViewContainer=ObjectRecordViewContainer;var ObjectRecordView=function(){function ObjectRecordView(e,t,i,s,o,l,a,n){var d=this;this.broadcast=e,this.navigation=t,this.activatedRoute=i,this.metadata=s,this.componentFactoryResolver=o,this.model=l,this.favorite=a,this.elementRef=n,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.componentconfig={},this.componentSubscriptions=[],this.listViewDefs=[],this.componentSets={},this.componentSubscriptions.push(this.broadcast.message$.subscribe(function(e){d.handleMessage(e)}))}return ObjectRecordView.prototype.ngOnInit=function(){var t=this;this.moduleName=this.activatedRoute.params.value.module,this.navigation.setActiveModule(this.moduleName),this.model.module=this.moduleName,this.model.id=this.activatedRoute.params.value.id,this.favorite.enable(this.model.module,this.model.id),this.model.getData(!0,"detailview",!0,!0).subscribe(function(e){t.navigation.setActiveModule(t.moduleName,t.model.id,e.summary_text)}),this.buildContainer()},ObjectRecordView.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var i=0,s=this.componentSubscriptions;i<s.length;i++){s[i].unsubscribe()}},ObjectRecordView.prototype.handleMessage=function(e){switch(e.messagetype){case"model.save":this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.data=e.messagedata.data)}},ObjectRecordView.prototype.buildContainer=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName)},ObjectRecordView=__decorate([core_1.Component({selector:"object-recordview",template:'<system-componentset [componentset]="componentconfig.header"></system-componentset><div class="slds-theme--default" tobottom><system-componentset [componentset]="componentconfig.main"></system-componentset></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.broadcast,services_1.navigation,router_1.ActivatedRoute,services_1.metadata,core_1.ComponentFactoryResolver,services_1.model,services_1.favorite,core_1.ElementRef])],ObjectRecordView)}();exports.ObjectRecordView=ObjectRecordView;var ObjectRecordViewDetail1=function(){function ObjectRecordViewDetail1(e,t,i){this.metadata=e,this.model=t,this.elementRef=i,this.initialized=!1,this.componentconfig={}}return ObjectRecordViewDetail1.prototype.ngOnInit=function(){this.getComponentconfig()},ObjectRecordViewDetail1.prototype.getComponentconfig=function(){this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module)},__decorate([core_1.ViewChild("contentcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectRecordViewDetail1.prototype,"contentcontainer",void 0),ObjectRecordViewDetail1=__decorate([core_1.Component({selector:"object-recordview-detail-1",template:'<div class="slds-p-horizontal--small"><system-componentset [componentset]="componentconfig.main"></system-componentset></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,core_1.ElementRef])],ObjectRecordViewDetail1)}();exports.ObjectRecordViewDetail1=ObjectRecordViewDetail1;var ObjectRecordViewDetail2and1=function(){function ObjectRecordViewDetail2and1(e,t,i){this.metadata=e,this.model=t,this.elementRef=i,this.initialized=!1,this.componentconfig={}}return ObjectRecordViewDetail2and1.prototype.ngOnInit=function(){this.getComponentconfig()},ObjectRecordViewDetail2and1.prototype.getComponentconfig=function(){this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module)},ObjectRecordViewDetail2and1=__decorate([core_1.Component({selector:"object-recordview-detail-2and1",template:'<div class="slds-grid slds-wrap slds-p-top--small"><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--2-of-3"><system-componentset [componentset]="componentconfig.main"></system-componentset></div><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"><system-componentset [componentset]="componentconfig.sidebar"></system-componentset></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,core_1.ElementRef])],ObjectRecordViewDetail2and1)}();exports.ObjectRecordViewDetail2and1=ObjectRecordViewDetail2and1;var ObjectRecordViewDetailsplit=function(){function ObjectRecordViewDetailsplit(e,t,i){this.metadata=e,this.model=t,this.elementRef=i,this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=[],this.listViewDefs=[],this.componentSets={},this.componentconfig={}}return ObjectRecordViewDetailsplit.prototype.ngOnInit=function(){this.initialized&&this.buildContainer()},ObjectRecordViewDetailsplit.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var i=0,s=this.componentSubscriptions;i<s.length;i++){s[i].unsubscribe()}},ObjectRecordViewDetailsplit.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectRecordViewDetailsplit.prototype.buildContainer=function(){for(var i=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}if(!this.componentconfig.left||!this.componentconfig.right){var s=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module);!this.componentconfig.left&&s.left&&(this.componentconfig.left=s.left),!this.componentconfig.right&&s.right&&(this.componentconfig.right=s.right)}if(this.componentconfig.left)for(var o=function(t){l.metadata.addComponent(t.component,l.leftcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(this.componentconfig.left);a<n.length;a++){o(n[a])}if(this.componentconfig.right)for(var d=function(t){r.metadata.addComponent(t.component,r.rightcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},r=this,c=0,m=this.metadata.getComponentSetObjects(this.componentconfig.right);c<m.length;c++){d(m[c])}},__decorate([core_1.ViewChild("leftcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectRecordViewDetailsplit.prototype,"leftcontainer",void 0),__decorate([core_1.ViewChild("rightcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectRecordViewDetailsplit.prototype,"rightcontainer",void 0),ObjectRecordViewDetailsplit=__decorate([core_1.Component({selector:"object-recordview-detail-split",template:'<div class="slds-grid slds-wrap slds-p-top--small"><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><div #leftcontainer></div></div><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><div #rightcontainer></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,core_1.ElementRef])],ObjectRecordViewDetailsplit)}();exports.ObjectRecordViewDetailsplit=ObjectRecordViewDetailsplit;var ObjectIcon=function(){function e(e){this.metadata=e,this.module="",this.icon="",this.size="",this.sprite="standard"}return e.prototype.getSizeClass=function(){return this.size?"slds-icon--"+this.size:""},e.prototype.getSvgHRef=function(){return"./sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()},e.prototype.getIconClass=function(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")},e.prototype.getIcon=function(){if(this.icon)return this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){var e=this.metadata.getModuleIcon(this.module);return 0<e.indexOf(":")?e.split(":")[1]:e}return"empty"},e.prototype.getSprite=function(){return this.module&&this.metadata.getModuleIcon(this.module)&&0<this.metadata.getModuleIcon(this.module).indexOf(":")?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"sprite",void 0),e=__decorate([core_1.Component({selector:"object-icon",template:'<div class="slds-media__figure"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvgHRef()"></use></svg></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.ObjectIcon=ObjectIcon;var ObjectPageHeader=function(){function ObjectPageHeader(e,t,i,s){this.language=e,this.router=t,this.model=i,this.metadata=s,this.componentconfig={},this.actionSet="",this.fieldset="",this.fieldsetitems=""}return Object.defineProperty(ObjectPageHeader.prototype,"moduleName",{get:function(){return this.model.module},enumerable:!0,configurable:!0}),ObjectPageHeader.prototype.ngOnInit=function(){var e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset,this.fieldset&&(this.fieldsetitems=this.metadata.getFieldSetFields(this.fieldset))},ObjectPageHeader.prototype.goToModule=function(){this.router.navigate(["/module/"+this.moduleName])},ObjectPageHeader=__decorate([core_1.Component({selector:"object-page-header",template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><object-icon [module]="moduleName" (click)="goToModule()"></object-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset"><a routerLink="/module/{{moduleName}}">{{language.getModuleName(moduleName)}}</a></p><div><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate"><ng-container *ngIf="!fieldset">{{model.data.summary_text}}</ng-container><div *ngIf="fieldset" class="slds-grid"><field-container *ngFor="let fieldsetitem of fieldsetitems" [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" fielddisplayclass="slds-p-right--small"></field-container></div></h1></div></div></div></div><div class="slds-m-horizontal--x-small slds-show--medium"><object-reminder-button></object-reminder-button><object-status-network-button></object-status-network-button></div><object-action-container [actionset]="actionSet"></object-action-container></div><object-page-header-tags></object-page-header-tags></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,router_1.Router,services_1.model,services_1.metadata])],ObjectPageHeader)}();exports.ObjectPageHeader=ObjectPageHeader;var ObjectPageHeaderTags=function(){function e(e,t,i,s,o,l){this.model=e,this.metadata=t,this.footer=i,this.cd=s,this.language=o,this.modalservice=l,this.listIsExpanded=!1,this.tags=[" "],this.heightOfBadge=null}return e.prototype.ngOnInit=function(){var e=this;this.model.isLoading?this.model.data$.subscribe(function(){e.parseTags()}):this.parseTags()},e.prototype.ngAfterViewChecked=function(){null===this.heightOfBadge&&this.badgeList&&this.badgeList.nativeElement&&this.badgeList.nativeElement.children[0]&&(this.heightOfBadge=this.getHeightOfBadge(),this.badgeListContainer.nativeElement.style.height=this.heightOfBadge+"px",this.cd.detectChanges())},Object.defineProperty(e.prototype,"taggingEnabled",{get:function(){return this.metadata.checkTagging(this.model.module)},enumerable:!0,configurable:!0}),e.prototype.parseTags=function(){if(this.model.data.tags&&""!==this.model.data.tags)try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}else this.tags=[]},Object.defineProperty(e.prototype,"listIsExpandable",{get:function(){return null!==this.heightOfBadge&&this.heightOfBadge!==this.getHeightOfBadgeList()},enumerable:!0,configurable:!0}),e.prototype.editTags=function(){var t=this;this.modalservice.openModal("ObjectPageHeaderTagPicker").subscribe(function(e){e.instance.model=t.model}),this.listIsExpanded=!1},e.prototype.getHeightOfBadge=function(){return Number(getComputedStyle(this.badgeList.nativeElement.children[0],null).height.replace(/px$/,""))+Number(getComputedStyle(this.badgeList.nativeElement.children[0],null).marginBottom.replace(/px$/,""))},e.prototype.getHeightOfBadgeList=function(){return Number(getComputedStyle(this.badgeList.nativeElement,null).height.replace(/px$/,""))},__decorate([core_1.ViewChild("badgeList"),__metadata("design:type",core_1.ElementRef)],e.prototype,"badgeList",void 0),__decorate([core_1.ViewChild("badgeListContainer"),__metadata("design:type",core_1.ElementRef)],e.prototype,"badgeListContainer",void 0),e=__decorate([core_1.Component({selector:"object-page-header-tags",template:'<div *ngIf="taggingEnabled" class="slds-m-top_medium slds-show--medium"><system-stencil *ngIf="model.isLoading; else displayContent"></system-stencil><ng-template #displayContent><div class="slds-grid slds-grid--vertical-align-start"><div><ng-container *ngIf="tags.length; else noAssignedTags"><div #badgeListContainer class="badgeListContainer" [class.open]="listIsExpanded"><ul #badgeList class="assignedTags slds-listbox slds-listbox_horizontal" role="presentation"><li *ngFor="let tag of tags; let i=index"><span class="slds-badge">{{tag}}</span></li></ul></div></ng-container><ng-template #noAssignedTags><div style="font-style:italic">{{language.getLabel(\'LBL_NO_TAGS_ASSIGNED\')}}</div></ng-template></div><div class="slds-p-left_medium"><ng-container *ngIf="tags.length"><button *ngIf="!listIsExpanded && listIsExpandable" class="slds-button slds-button_icon slds-m-top--x-small" (click)="listIsExpanded=true"><system-button-icon [icon]="\'expand_all\'"></system-button-icon></button> <button *ngIf="listIsExpanded" class="slds-button slds-button_icon slds-m-top--x-small" (click)="listIsExpanded=false"><system-button-icon [icon]="\'collapse_all\'"></system-button-icon></button></ng-container><button *ngIf="tags.length === 0 || listIsExpanded || !listIsExpandable" class="slds-button slds-button_icon slds-m-left--none" [class.slds-m-top--x-small]="tags.length>0" (click)="editTags()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div></div></ng-template></div>',styles:[".badgeListContainer { overflow-y: hidden; margin-bottom: -0.125rem; }","ul { line-height: 1.7; }","li { margin-bottom: 0.125rem; }",".badgeListContainer.open { overflow-y: visible; height: auto ! }",".slds-badge { text-transform: none; font-size: 0.75rem; padding-top: 0.1875rem; line-height: 2.333; }"]}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.footer,core_1.ChangeDetectorRef,services_1.language,services_1.modal])],e)}();exports.ObjectPageHeaderTags=ObjectPageHeaderTags;var ObjectPageHeaderTagPicker=function(){function ObjectPageHeaderTagPicker(e,t,i){this.language=e,this.backend=t,this.toast=i,this.model={},this.self={},this.tags=[],this.allTags=[],this.offeredTags=[],this.offeredTagsMaxLength=20,this.filter="",this.tagsAreParsed=!1,this.allTagsAreLoaded=!1}return ObjectPageHeaderTagPicker.prototype.ngOnInit=function(){var t=this;this.backend.getRequest("systags").subscribe(function(e){e.systags&&(t.allTags=e.systags),t.allTagsAreLoaded=!0,t.doFilter()},function(e){t.toast.sendToast("Error loading list of available tags.","error",null),t.closeModal()}),this.model.isLoading?this.model.data$.subscribe(function(){window.setTimeout(function(){t.parseTags()},5e3)}):this.parseTags()},ObjectPageHeaderTagPicker.prototype.parseTags=function(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()},ObjectPageHeaderTagPicker.prototype.changeFilter=function(){this.doFilter()},ObjectPageHeaderTagPicker.prototype.clearFilter=function(){this.filter="",this.doFilter()},ObjectPageHeaderTagPicker.prototype.doFilter=function(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0;for(var e=this.numberFilteredTags=0,t=this.allTags;e<t.length;e++){var i=t[e];(0===this.filter.length||0<=i.toLowerCase().indexOf(this.filter.toLowerCase()))&&-1===this.tags.indexOf(i)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(i)}}},ObjectPageHeaderTagPicker.prototype.addTag=function(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))},ObjectPageHeaderTagPicker.prototype.removeTag=function(e){this.tags.splice(e,1),this.doFilter()},ObjectPageHeaderTagPicker.prototype.saveAndClose=function(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()},ObjectPageHeaderTagPicker.prototype.closeModal=function(){this.self.destroy()},ObjectPageHeaderTagPicker.prototype.onModalEscX=function(){this.closeModal()},ObjectPageHeaderTagPicker=__decorate([core_1.Component({selector:"object-page-header-tag-picker",template:'<system-modal><system-modal-header (close)="closeModal()">{{ language.getLabel(\'LBL_ASSIGN_TAGS\') }}</system-modal-header><system-modal-content><ng-container *ngIf="allTagsAreLoaded && tagsAreParsed; else notReady"><div class="slds-m-bottom--medium"><ng-container *ngIf="tags.length; else noAssignedTags"><ul class="selectedTags slds-listbox slds-listbox_horizontal" role="presentation" style="line-height:1.7rem"><li *ngFor="let tag of tags; let i=index"><span class="slds-badge" (click)="removeTag(i)">{{tag}}</span></li></ul></ng-container><ng-template #noAssignedTags><div style="font-style:italic">{{language.getLabel(\'LBL_NO_TAGS_ASSIGNED\')}}</div></ng-template></div><div class="slds-form-element"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right"><system-utility-icon [icon]="\'clear\'" [size]="\'x-small\'" [addclasses]="\'slds-input__icon slds-input__icon_right slds-icon-text-default\'" (click)="clearFilter()"></system-utility-icon><input type="text" class="slds-input" placeholder="{{ language.getLabel(\'LBL_ENTER_TAGS_FOR_TAGS\') }}" [(ngModel)]="filter" (keyup)="changeFilter()" #fieldFilter></div></div><div class="slds-m-top--small"><ng-container *ngIf="offeredTags.length; else noOfferedTags"><ul class="slds-listbox slds-listbox_horizontal offeredTags" role="listbox" style="line-height:1.5rem"><li *ngFor="let tag of offeredTags; let i=index" role="presentation" (click)="addTag(i)" style="margin-top:0.2rem"><span class="slds-badge slds-badge_inverse">{{tag}}</span></li></ul><div class="slds-m-top--xx-small" *ngIf="numberFilteredTags-offeredTagsMaxLength>0" style="font-style:italic;text-align:right">{{ language.getLabelFormatted(\'LBL_NUMBER_OF_SHOWN_TAGS\', [ offeredTags.length, numberFilteredTags ] ) }}</div></ng-container><ng-template #noOfferedTags><div class="slds-m-top--xx-small" style="font-style:italic">{{ language.getLabel(\'LBL_NO_TAGS_FOUND\') }}</div></ng-template></div></ng-container><ng-template #notReady><system-spinner></system-spinner></ng-template></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="saveAndClose()">{{language.getLabel(\'LBL_SAVE\')}}</button></system-modal-footer></system-modal>',styles:[".offeredTags span { cursor: pointer; }",".selectedTags li { margin-bottom: 0.125rem; }",".selectedTags { margin-bottom: -0.125rem; }","::placeholder { font-style: italic; }",".slds-badge { text-transform: none; font-size: 0.75rem; padding-top: 0.1875rem; line-height: 2; }",".slds-badge:hover { cursor: pointer; filter: brightness(90%); }",".slds-badge.slds-badge_inverse:hover { filter: brightness(133%); }"]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.toast])],ObjectPageHeaderTagPicker)}();exports.ObjectPageHeaderTagPicker=ObjectPageHeaderTagPicker;var ObjectPageHeaderDetails=function(){function ObjectPageHeaderDetails(e,t,i,s,o){this.elementref=e,this.activatedRoute=t,this.router=i,this.model=s,this.metadata=o,this.componentconfig={}}return ObjectPageHeaderDetails.prototype.ngOnInit=function(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module))},Object.defineProperty(ObjectPageHeaderDetails.prototype,"fieldSets",{get:function(){return this.componentconfig&&this.componentconfig.fieldset?[this.componentconfig.fieldset]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectPageHeaderDetails.prototype,"collapsed",{get:function(){return!!this.componentconfig.collapsed&&this.componentconfig.collapsed},enumerable:!0,configurable:!0}),ObjectPageHeaderDetails=__decorate([core_1.Component({selector:"object-page-header-details",template:'<div class="slds-p-horizontal--medium slds-p-vertical--small slds-border--bottom slds-scrollable--x"><object-page-header-detail-row *ngFor="let thisFieldSet of fieldSets" [fieldSet]="thisFieldSet" [collapsed]="collapsed"></object-page-header-detail-row></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,router_1.ActivatedRoute,router_1.Router,services_1.model,services_1.metadata])],ObjectPageHeaderDetails)}();exports.ObjectPageHeaderDetails=ObjectPageHeaderDetails;var ObjectPageHeaderDetailRow=function(){function e(e,t,i){this.metadata=e,this.model=t,this.view=i,this.fieldSet="",this.opacity=1,this.collapsed=!0}return e.prototype.ngOnInit=function(){this.setLabelLength()},e.prototype.getFields=function(){var e=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.data&&this.model.data.acl_fieldcontrol){var t=[];for(var i in e)this.model.data.acl_fieldcontrol[e[i].field]&&"1"===this.model.data.acl_fieldcontrol[e[i].field]||t.push(e[i]);return t}return e},e.prototype.toggleCollapsed=function(){this.collapsed=!this.collapsed,this.setLabelLength()},Object.defineProperty(e.prototype,"toggleIcon",{get:function(){return this.collapsed?"chevrondown":"chevronup"},enumerable:!0,configurable:!0}),e.prototype.setLabelLength=function(){this.collapsed?this.view.labels="short":this.view.labels="default"},e.prototype.showLabel=function(e){return!0!==e.hidelabel},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldSet",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"opacity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"collapsed",void 0),e=__decorate([core_1.Component({selector:"object-page-header-detail-row",template:'<div class="slds-grid slds-grid--vertical-align-start"><div><ul *ngIf="!collapsed" class="slds-grid" [ngStyle]="{opacity: opacity}"><li object-page-header-detail-row-field class="slds-m-right--medium" *ngFor="let field of getFields()" [field]="field"></li></ul><ul *ngIf="collapsed" class="slds-list--horizontal slds-has-dividers--left"><ng-container *ngFor="let field of getFields()"><li *ngIf="model.data[field.field]" class="slds-item slds-grid slds-grid--vertical-align-center"><field-label *ngIf="showLabel(field.fieldconfig)" [fieldname]="field.field" [fieldconfig]="field.fieldconfig" [addclasses]="\'slds-truncate\'"></field-label><span *ngIf="!field.fieldconfig.hidelabel" class="slds-p-right--xx-small">:</span><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></li></ng-container></ul></div><div class="slds-col--bump-left"><button class="slds-button slds-button--icon" (click)="toggleCollapsed()"><system-button-icon [icon]="toggleIcon"></system-button-icon></button></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view])],e)}();exports.ObjectPageHeaderDetailRow=ObjectPageHeaderDetailRow;var ObjectPageHeaderDetailRowField=function(){function e(){this.moduleName="",this.field={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"moduleName",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"[object-page-header-detail-row-field]",template:'<div><field-label *ngIf="!field.fieldconfig.hidelabel" [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-text-body--regular slds-truncate slds-m-vertical--xx-small\'"></field-container></div>'})],e)}();exports.ObjectPageHeaderDetailRowField=ObjectPageHeaderDetailRowField;var ObjectTabContainerItemHeader=function(){function e(e,t){this.metadata=e,this.language=t,this.tab=[]}return Object.defineProperty(e.prototype,"displayName",{get:function(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.tab.headercomponent&&this.metadata.addComponent(this.tab.headercomponent,this.headercontainer)},e.prototype.getTabLabel=function(e){if(0<e.indexOf(":")){var t=e.split(":");return this.language.getLabel(t[0],t[1])}return this.language.getLabel(e)},__decorate([core_1.ViewChild("headercontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"headercontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"tab",void 0),e=__decorate([core_1.Component({selector:"object-tab-container-item-header",template:'<ng-container *ngIf="displayName">{{getTabLabel(tab.name)}}</ng-container><ng-container #headercontainer></ng-container>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language])],e)}();exports.ObjectTabContainerItemHeader=ObjectTabContainerItemHeader;var ObjectTabContainerItem=function(){function ObjectTabContainerItem(e,t){this.metadata=e,this.fielderrorgroup=t,this.componentRefs=[],this.initialized=!1,this.componentset=[],this.taberrors=new core_1.EventEmitter}return ObjectTabContainerItem.prototype.ngOnInit=function(){var t=this;this.fielderrorgroup.change$.subscribe(function(e){t.taberrors.emit(e)})},ObjectTabContainerItem.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectTabContainerItem.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}},ObjectTabContainerItem.prototype.buildContainer=function(){for(var i=this,e=function(t){s.metadata.addComponent(t.component,s.container).subscribe(function(e){i.componentRefs.push(e),e.instance.componentconfig=t.componentconfig})},s=this,t=0,o=this.metadata.getComponentSetObjects(this.componentset);t<o.length;t++){e(o[t])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectTabContainerItem.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectTabContainerItem.prototype,"componentset",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],ObjectTabContainerItem.prototype,"taberrors",void 0),ObjectTabContainerItem=__decorate([core_1.Component({selector:"object-tab-container-item",template:"<div #container></div>",providers:[services_1.fielderrorgrouping]}),__metadata("design:paramtypes",[services_1.metadata,services_1.fielderrorgrouping])],ObjectTabContainerItem)}();exports.ObjectTabContainerItem=ObjectTabContainerItem;var ObjectTabContainer=function(){function ObjectTabContainer(e,t,i){this.language=e,this.metadata=t,this.model=i,this.activeTab=0,this.activatedTabs=[0],this.componentconfig={tabs:[]},this.tabs=[]}return ObjectTabContainer.prototype.ngOnInit=function(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(var t=0,i=e;t<i.length;t++){var s=i[t];this.tabs.push(s.componentconfig)}}else{var o=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module);e=this.metadata.getComponentSetObjects(o.componentset);this.tabs=[];for(var l=0,a=e;l<a.length;l++){s=a[l];this.tabs.push(s.componentconfig)}}else this.tabs=this.getTabs()},ObjectTabContainer.prototype.getTabs=function(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}},ObjectTabContainer.prototype.getTabLabel=function(e){if(0<e.indexOf(":")){var t=e.split(":");return this.language.getLabel(t[0],t[1])}return this.language.getLabel(e)},ObjectTabContainer.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectTabContainer.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)||this.componentconfig.tabs&&this.componentconfig.tabs[e].forcerender},ObjectTabContainer.prototype.getDisplay=function(e){if(e!==this.activeTab)return{display:"none"}},ObjectTabContainer=__decorate([core_1.Component({selector:"object-tab-container",template:'<div class="slds-tabs--default"><ul class="slds-tabs--default__nav" role="tablist"><li *ngFor="let tab of tabs; let tabindex = index" class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><object-tab-container-item-header [tab]="tab"></object-tab-container-item-header></a></li></ul><ng-container *ngFor="let tab of tabs; let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" class="slds-tabs--default__content slds-show" role="tabpanel" [ngStyle]="getDisplay(tabindex)"><object-tab-container-item *ngIf="tab.componentset" [componentset]="tab.componentset"></object-tab-container-item></div></ng-container></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectTabContainer)}();exports.ObjectTabContainer=ObjectTabContainer;var ObjectVerticalTabContainerItemHeader=function(){function e(e,t){this.metadata=e,this.language=t,this.tab=[]}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this.tab.name&&""!=this.tab.name},enumerable:!0,configurable:!0}),e.prototype.getTabLabel=function(e){if(0<e.indexOf(":")){var t=e.split(":");return this.language.getLabel(t[0],t[1])}return this.language.getLabel(e)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"tab",void 0),e=__decorate([core_1.Component({selector:"object-vertical-tab-container-item-header",template:'<ng-container *ngIf="displayName">{{getTabLabel(tab.name)}}</ng-container>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language])],e)}();exports.ObjectVerticalTabContainerItemHeader=ObjectVerticalTabContainerItemHeader;var ObjectVerticalTabContainerItem=function(){function ObjectVerticalTabContainerItem(e,t){this.metadata=e,this.fielderrorgroup=t,this.componentRefs=[],this.initialized=!1,this.componentset=[],this.taberrors=new core_1.EventEmitter}return ObjectVerticalTabContainerItem.prototype.ngOnInit=function(){var t=this;this.fielderrorgroup.change$.subscribe(function(e){t.taberrors.emit(e)})},ObjectVerticalTabContainerItem.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectVerticalTabContainerItem.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}this.componentRefs=[]},ObjectVerticalTabContainerItem.prototype.buildContainer=function(){for(var i=this,e=function(t){s.metadata.addComponent(t.component,s.container).subscribe(function(e){i.componentRefs.push(e),e.instance.componentconfig=t.componentconfig})},s=this,t=0,o=this.metadata.getComponentSetObjects(this.componentset);t<o.length;t++){e(o[t])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectVerticalTabContainerItem.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectVerticalTabContainerItem.prototype,"componentset",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],ObjectVerticalTabContainerItem.prototype,"taberrors",void 0),ObjectVerticalTabContainerItem=__decorate([core_1.Component({selector:"object-vertical-tab-container-item",template:"<div #container></div>",providers:[services_1.fielderrorgrouping]}),__metadata("design:paramtypes",[services_1.metadata,services_1.fielderrorgrouping])],ObjectVerticalTabContainerItem)}();exports.ObjectVerticalTabContainerItem=ObjectVerticalTabContainerItem;var ObjectVerticalTabContainer=function(){function ObjectVerticalTabContainer(e,t){this.language=e,this.metadata=t,this.activeTab=0,this.activatedTabs=[0],this.componentconfig=[]}return ObjectVerticalTabContainer.prototype.ngOnInit=function(){if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(var t=0,i=e;t<i.length;t++){var s=i[t];this.componentconfig.push(s.componentconfig)}}},ObjectVerticalTabContainer.prototype.getTabs=function(){try{return this.componentconfig?this.componentconfig:[]}catch(e){return[]}},ObjectVerticalTabContainer.prototype.getTabLabel=function(e){if(0<e.indexOf(":")){var t=e.split(":");return this.language.getLabel(t[0],t[1])}return this.language.getLabel(e)},ObjectVerticalTabContainer.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectVerticalTabContainer.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)||this.componentconfig&&this.componentconfig[e].forcerender},ObjectVerticalTabContainer.prototype.getDisplay=function(e){var t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)",overflow:"auto"}},ObjectVerticalTabContainer.prototype.getTabsStyle=function(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}},ObjectVerticalTabContainer.prototype.showErrorsOnTab=function(e,t){this.componentconfig[e].hasErrors=t},__decorate([core_1.ViewChild("tabscontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectVerticalTabContainer.prototype,"tabscontainer",void 0),ObjectVerticalTabContainer=__decorate([core_1.Component({selector:"object-vertical-tab-container",template:'<div class="slds-vertical-tabs"><ul #tabscontainer class="slds-vertical-tabs__nav slds-scrollable--y" [ngStyle]="getTabsStyle()" role="tablist" aria-orientation="vertical"><li *ngFor="let tab of getTabs(); let tabindex = index" (click)="setActiveTab(tabindex)" [ngClass]="{\'slds-is-active\': tabindex === activeTab}" class="slds-vertical-tabs__nav-item slds-text-title--caps" role="presentation"><a class="slds-vertical-tabs__link" href="javascript:void(0)" role="tab" tabindex="-1" aria-selected="false"><span class="slds-badge" *ngIf="tab.hasErrors" title="Invalid fields!">{{tab.hasErrors}}</span><object-vertical-tab-container-item-header [tab]="tab"></object-vertical-tab-container-item-header></a></li></ul><ng-container *ngFor="let tab of getTabs(); let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" [ngStyle]="getDisplay(tabindex)" class="slds-vertical-tabs__content slds-show" role="tabpanel"><object-vertical-tab-container-item *ngIf="tab.componentset" [componentset]="tab.componentset" (taberrors)="showErrorsOnTab(tabindex,$event)"></object-vertical-tab-container-item></div></ng-container></div>',styles:[".slds-is-active {\n            font-weight: 600;\n            color: #3e3e3c;\n            border-right: 1px solid #dddbda;\n            border-left: 6px solid #CA1B21;\n        }\n        .slds-is-active a {\n            text-decoration: none !important\n        }",".slds-badge { font-weight: bold; background-color: #c00; color: #fff; padding: .125rem .4rem; }"]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata])],ObjectVerticalTabContainer)}();exports.ObjectVerticalTabContainer=ObjectVerticalTabContainer;var ObjectRelateContainer=function(){function ObjectRelateContainer(e,t){this.model=e,this.metadata=t,this.componentconfig={}}return ObjectRelateContainer.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset},ObjectRelateContainer=__decorate([core_1.Component({selector:"object-tab-container",template:'<system-componentset [componentset]="componentset"></system-componentset>'}),__metadata("design:paramtypes",[services_1.model,services_1.metadata])],ObjectRelateContainer)}();exports.ObjectRelateContainer=ObjectRelateContainer;var ObjectRelatedlistHeader=function(){function e(e,t){this.language=e,this.relatedmodels=t,this.module="",this.actionset="",this.title="",this.isopen=!0}return Object.defineProperty(e.prototype,"panelTitle",{get:function(){return""!=this.title?this.language.getLabel(this.title,this.module):this.language.getModuleName(this.module)},enumerable:!0,configurable:!0}),e.prototype.toggleOpen=function(){this.isopen=!this.isopen},Object.defineProperty(e.prototype,"iconStyle",{get:function(){return this.isopen?{}:{transform:"scale(1, -1)"}},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),e=__decorate([core_1.Component({selector:"object-relatedlist-header",template:'<div class="slds-card__header slds-grid"><header class="slds-media slds-media--center slds-has-flexi-truncate"><object-icon [module]="module" [size]="\'small\'"></object-icon><div class="slds-media__body slds-truncate slds-grid slds-grid--vertical-align-center"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small">{{panelTitle}}<ng-container *ngIf="!relatedmodels.isloading">&nbsp;({{relatedmodels.count}})</ng-container></span></a></h2><system-utility-icon class="slds-m-horizontal--xx-small" *ngIf="relatedmodels.count > 0" icon="up" size="x-small" (click)="toggleOpen()" [ngStyle]="iconStyle" style="transition: .5s;"></system-utility-icon></div></header><object-action-container *ngIf="actionset" [actionset]="actionset"></object-action-container></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.relatedmodels])],e)}();exports.ObjectRelatedlistHeader=ObjectRelatedlistHeader;var ObjectRelatedlistFooter=function(){function e(e,t,i,s){this.language=e,this.relatedmodels=t,this.model=i,this.router=s,this.module="",this.fieldset=void 0,this.displayitems=5}return e.prototype.setDisplayItems=function(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())},e.prototype.canViewAll=function(){return 0<this.relatedmodels.count},e.prototype.canSetCount=function(){return this.relatedmodels.count>this.relatedmodels.items.length},e.prototype.showAll=function(){this.fieldset&&""!=this.fieldset?this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])},e.prototype.reload=function(){this.relatedmodels.getData()},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-relatedlist-footer",template:'<footer class="slds-card__footer"><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-size--1-of-5"></div><div class="slds-size--3-of-5 slds-text-align_center"><a href="javascript:void(0);" (click)="showAll()">{{language.getLabel(\'LBL_VIEWALL\')}}</a></div><div class="slds-size--1-of-5 slds-text-align--right"><button class="slds-button slds-button_icon" (click)="reload()"><system-button-icon icon="refresh"></system-button-icon></button></div></div></footer>'}),__metadata("design:paramtypes",[services_1.language,services_1.relatedmodels,services_1.model,router_1.Router])],e)}();exports.ObjectRelatedlistFooter=ObjectRelatedlistFooter;var ObjectRelatedlistList=function(){function ObjectRelatedlistList(e,t,i,s){this.language=e,this.metadata=t,this.relatedmodels=i,this.model=s,this.activeTab=0,this.componentconfig={},this.listfields=[],this.fieldset="",this.editcomponentset="",this.module="",this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id}return Object.defineProperty(ObjectRelatedlistList.prototype,"isloading",{get:function(){return this.relatedmodels.isloading},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRelatedlistList.prototype,"panelTitle",{get:function(){return this.componentconfig.title||(this.componentconfig.title=this.language.getModuleName(this.componentconfig.object)),this.componentconfig.title?this.componentconfig.title:""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRelatedlistList.prototype,"hidden",{get:function(){return!this.checkModelState()||!this.aclAccess()},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRelatedlistList.prototype,"isopen",{get:function(){return!(this.listheaders&&!this.listheaders.first.isopen)&&(0<this.relatedmodels.count||this.isloading)},enumerable:!0,configurable:!0}),ObjectRelatedlistList.prototype.checkModelState=function(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))},ObjectRelatedlistList.prototype.aclAccess=function(){return this.metadata.checkModuleAcl(this.module,"list")},ObjectRelatedlistList.prototype.loadRelated=function(){this.aclAccess()&&(this.relatedmodels.relatedModule=this.componentconfig.object,this.relatedmodels.getData())},ObjectRelatedlistList.prototype.ngOnInit=function(){this.fieldset=this.componentconfig.fieldset,this.listfields=this.metadata.getFieldSetFields(this.fieldset),this.module=this.componentconfig.object,this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC")},Object.defineProperty(ObjectRelatedlistList.prototype,"editable",{get:function(){try{return this.componentconfig.editable&&this.model.data.acl.edit}catch(e){return!1}},enumerable:!0,configurable:!0}),ObjectRelatedlistList.prototype.ngAfterViewInit=function(){this.loadRelated()},ObjectRelatedlistList.prototype.ngOnDestroy=function(){this.relatedmodels.stopSubscriptions()},ObjectRelatedlistList.prototype.addSelectedItems=function(e){this.relatedmodels.addItems(e)},__decorate([core_1.ViewChildren(ObjectRelatedlistHeader),__metadata("design:type",core_1.QueryList)],ObjectRelatedlistList.prototype,"listheaders",void 0),ObjectRelatedlistList=__decorate([core_1.Component({selector:"object-relatedlist-list",template:'<article *ngIf="!hidden" class="slds-card slds-card_boundary slds-m-bottom--medium"><object-relatedlist-header [module]="module" [title]="panelTitle" [actionset]="componentconfig.actionset"></object-relatedlist-header><ng-container *ngIf="isopen"><div class="slds-card__body slds-size--1-of-1"><object-relatedlist-table [listfields]="listfields" [module]="module" [editable]="editable" [editcomponentset]="editcomponentset"></object-relatedlist-table></div><object-relatedlist-footer [module]="module" [fieldset]="fieldset"></object-relatedlist-footer></ng-container></article>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model])],ObjectRelatedlistList)}();exports.ObjectRelatedlistList=ObjectRelatedlistList;var ObjectRelatedListItem=function(){function e(e,t,i,s,o,l,a,n){this.metadata=e,this.footer=t,this.model=i,this.relatedmodels=s,this.view=o,this.router=l,this.language=a,this.layout=n,this.listfields=[],this.listitem={},this.module="",this.editable=!1,this.editcomponentset="",this.customEditActions=[],this.customActions=[],this.expanded=!1}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.listitem.id,this.model.data=this.listitem,this.model.data.acl.edit&&(this.view.isEditable=this.editable,this.customActions.push({action:"edit",name:this.language.getLabel("LBL_EDIT")}),this.customActions.push({action:"remove",name:this.language.getLabel("LBL_REMOVE")})),this.editable&&(this.customEditActions.push({action:"canceledit",name:this.language.getLabel("LBL_CANCEL")}),this.customEditActions.push({action:"saverelated",name:this.language.getLabel("LBL_SAVE")}))},e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},e.prototype.handleAction=function(e){var i=this;switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe(function(t){t.instance.model.module=i.module,t.instance.model.id=i.model.id,t.instance.model.data=i.model.data,i.editcomponentset&&""!=i.editcomponentset&&(t.instance.componentSet=i.editcomponentset),i.model.startEdit(),t.instance.modalAction$.subscribe(function(e){!1===e?(t.destroy(),i.model.cancelEdit()):(i.relatedmodels.setItem(i.model.data),i.model.endEdit(),t.destroy())})});break;case"remove":this.relatedmodels.deleteItem(this.model.id);break;case"saverelated":if(this.model.validate()){var t=this.model.getDirtyFields();t.date_modified=this.model.getField("date_modified"),t.id=this.model.id,this.relatedmodels.setItem(t),this.model.endEdit(),this.view.setViewMode()}}},e.prototype.toggleexpanded=function(){this.expanded=!this.expanded},Object.defineProperty(e.prototype,"isexpanded",{get:function(){return"small"!=this.layout.screenwidth||this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandicon",{get:function(){return this.expanded?"chevronup":"chevrondown"},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editable",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"editcomponentset",void 0),e=__decorate([core_1.Component({selector:"[object-related-list-item]",template:'<td class="slds-hide--medium"><div class="slds-grid slds-grid--vertical-align-center slds-p-around--xx-small"><div class="slds-text-align--left slds-truncate slds-grow" (click)="navigateDetail($event)">{{model.data.summary_text}}</div><system-utility-icon [icon]="expandicon" size="xx-small" (click)="toggleexpanded()"></system-utility-icon></div></td><ng-container *ngIf="isexpanded"><td *ngFor="let item of listfields" scope="row" [attr.data-label]="language.getFieldDisplayName(model.module, item.field)"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></td><td role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'x-small\'" [standardactions]="false" [addactions]="customActions" [standardeditactions]="false" [addeditactions]="customEditActions" (action)="handleAction($event)"></object-action-menu></td></ng-container>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.footer,services_1.model,services_1.relatedmodels,services_1.view,router_1.Router,services_1.language,services_1.layout])],e)}();exports.ObjectRelatedListItem=ObjectRelatedListItem;var ObjectRelatedlistTiles=function(){function ObjectRelatedlistTiles(e,t,i,s,o){this.language=e,this.relatedmodels=t,this.model=i,this.metadata=s,this.router=o,this.activeTab=0,this.componentconfig={},this.displayitems=5,this.module="",this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id}return Object.defineProperty(ObjectRelatedlistTiles.prototype,"hidden",{get:function(){return!this.checkModelState()||!this.aclAccess()},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRelatedlistTiles.prototype,"isopen",{get:function(){return!(this.listheaders&&!this.listheaders.first.isopen)&&0<this.relatedmodels.count},enumerable:!0,configurable:!0}),ObjectRelatedlistTiles.prototype.checkModelState=function(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))},ObjectRelatedlistTiles.prototype.aclAccess=function(){return this.metadata.checkModuleAcl(this.module,"list")},ObjectRelatedlistTiles.prototype.loadRelated=function(){this.relatedmodels.relatedModule=this.componentconfig.object,this.relatedmodels.getData()},ObjectRelatedlistTiles.prototype.ngOnInit=function(){this.module=this.componentconfig.object,this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter)},ObjectRelatedlistTiles.prototype.ngAfterViewInit=function(){this.loadRelated()},ObjectRelatedlistTiles.prototype.addSelectedItems=function(e){this.relatedmodels.addItems(e)},__decorate([core_1.ViewChildren(ObjectRelatedlistHeader),__metadata("design:type",core_1.QueryList)],ObjectRelatedlistTiles.prototype,"listheaders",void 0),ObjectRelatedlistTiles=__decorate([core_1.Component({selector:"object-relatedlist-tiles",template:'<article *ngIf="!hidden" class="slds-card slds-card_boundary slds-m-bottom--medium"><object-relatedlist-header [module]="module" [actionset]="componentconfig.actionset"></object-relatedlist-header><ng-container *ngIf="isopen"><div class="slds-card__body"><div class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded"><div *ngFor="let relateditem of relatedmodels.items" class="slds-p-around--xx-small slds-small-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"><div class="slds-box slds-box--x-small slds-media slds-card__tile" object-related-card-tile [fieldset]="componentconfig.fieldset" [data]="relateditem" [module]="module"></div></div></div></div><object-relatedlist-footer [module]="module"></object-relatedlist-footer></ng-container></article>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.relatedmodels,services_1.model,services_1.metadata,router_1.Router])],ObjectRelatedlistTiles)}();exports.ObjectRelatedlistTiles=ObjectRelatedlistTiles;var ObjectRelatedCardTile=function(){function e(e,t,i,s,o,l){this.model=e,this.relatedmodels=t,this.view=i,this.language=s,this.metadata=o,this.router=l,this.module="",this.data={},this.fieldset="",this.addActions=[{action:"remove",name:"Remove"}]}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.data.id,this.model.data=this.data},e.prototype.getFields=function(){return this.metadata.getFieldSetFields(this.fieldset)},e.prototype.navgiateDetail=function(){this.model.goDetail()},e.prototype.handleAction=function(e){switch(e){case"remove":this.relatedmodels.deleteItem(this.model.id)}},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"data",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"[object-related-card-tile]",template:'<object-icon [module]="module" [size]="\'small\'"></object-icon><div class="slds-media__body"><div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate"><h3 class="slds-truncate slds-text-heading--small slds-p-top--xxx-small slds-m-bottom--small" modelPopOver (click)="navgiateDetail()"><a href="javascript:void(0);">{{data.summary_text}}</a></h3><div class="slds-shrink-none slds-show--medium"><object-action-menu [buttonsize]="\'x-small\'" [addactions]="addActions" (action)="handleAction($event)"></object-action-menu></div></div><div class="slds-tile__detail slds-text-body--small"><dl class="slds-dl--horizontal"><ng-container *ngFor="let field of getFields()"><dt class="slds-dl--horizontal__label slds-truncate">{{language.getFieldDisplayName(module, field.field)}}</dt><dd class="slds-dl--horizontal__detail slds-tile__meta"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></div><object-action-menu class="slds-hide--medium" [buttonsize]="\'x-small\'" [addactions]="addActions" (action)="handleAction($event)"></object-action-menu></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.relatedmodels,services_1.view,services_1.language,services_1.metadata,router_1.Router])],e)}();exports.ObjectRelatedCardTile=ObjectRelatedCardTile;var ObjectRelatedlistFiles=function(){function ObjectRelatedlistFiles(e,t,i,s,o,l,a,n){this.modelattachments=e,this.language=t,this.model=i,this.renderer=s,this.toast=o,this.footer=l,this.metadata=a,this.modalservice=n,this.componentconfig={},this.displayitems=5,this.theFile="",this.theProgress=0,this.showUploadModal=!1,this.isopen=!0,this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id}return ObjectRelatedlistFiles.prototype.loadFiles=function(){this.modelattachments.getAttachments()},ObjectRelatedlistFiles.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.loadFiles()},10)},ObjectRelatedlistFiles.prototype.toggleOpen=function(){this.isopen=!this.isopen},Object.defineProperty(ObjectRelatedlistFiles.prototype,"iconStyle",{get:function(){return this.isopen?{}:{transform:"scale(1, -1)"}},enumerable:!0,configurable:!0}),ObjectRelatedlistFiles.prototype.preventdefault=function(e){(1<=e.dataTransfer.items.length&&this.allItemsFile(e.dataTransfer.items)||0<e.dataTransfer.files.length)&&(e.preventDefault(),e.stopPropagation())},ObjectRelatedlistFiles.prototype.allItemsFile=function(e){for(var t=0,i=e;t<i.length;t++){if("file"!=i[t].kind)return!1}return!0},ObjectRelatedlistFiles.prototype.onDrop=function(e){this.preventdefault(e);var t=e.dataTransfer.files;t&&1<=t.length&&this.doupload(t)},ObjectRelatedlistFiles.prototype.canViewAll=function(){return!0},ObjectRelatedlistFiles.prototype.selectFile=function(){var e=new MouseEvent("click",{bubbles:!0});this.renderer.invokeElementMethod(this.fileupload.element.nativeElement,"dispatchEvent",[e])},ObjectRelatedlistFiles.prototype.uploadFile=function(){var e=this.fileupload.element.nativeElement.files;this.doupload(e)},ObjectRelatedlistFiles.prototype.doupload=function(e){this.modelattachments.uploadAttachmentsBase64(e)},ObjectRelatedlistFiles.prototype.closeUploadPopup=function(){this.showUploadModal=!1},ObjectRelatedlistFiles.prototype.getBarStyle=function(){return{width:this.theProgress+"%"}},ObjectRelatedlistFiles.prototype.takeFoto=function(){var t=this;this.modalservice.openModal("SystemCaptureImage").subscribe(function(e){e.instance.model=t.model,e.instance.response$.subscribe(function(e){t.modelattachments.files.push(e)})})},__decorate([core_1.ViewChild("fileupload",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectRelatedlistFiles.prototype,"fileupload",void 0),ObjectRelatedlistFiles=__decorate([core_1.Component({selector:"object-relatedlist-files",template:'<div class="slds-card slds-card_boundary slds-m-bottom--medium"><div class="slds-card__header slds-grid"><header class="slds-media slds-media--center slds-has-flexi-truncate"><object-icon [icon]="\'file\'" [size]="\'small\'"></object-icon><div class="slds-media__body slds-truncate slds-grid slds-grid--vertical-align-center"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small">{{language.getLabel(\'LBL_FILES\')}} ({{modelattachments.files.length}})</span></a></h2><system-utility-icon *ngIf="modelattachments.files.length > 0" class="slds-m-horizontal--xx-small" icon="up" size="x-small" (click)="toggleOpen()" [ngStyle]="iconStyle" style="transition: .5s;"></system-utility-icon></div></header><div class="slds-no-flex slds-button-group" role="group"><button *ngIf="!componentconfig.disableupload" class="slds-button slds-button--neutral" (click)="selectFile()">{{language.getLabel(\'LBL_UPLOAD\')}}</button></div><input #fileupload style="display:none" type="file" multiple (change)="uploadFile()"></div><div class="slds-card__body" *ngIf="isopen"><div class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded"><div object-related-card-file *ngFor="let file of modelattachments.files" [file]="file" class="slds-tile slds-media slds-card__tile slds-p-horizontal--small slds-size--1-of-1 spicecrm-card-size slds-hint-parent"></div></div><div *ngIf="modelattachments.loading" class="slds-p-around--large slds-align--absolute-center"><system-spinner></system-spinner></div></div></div>',providers:[services_1.modelattachments],host:{"(drop)":"this.onDrop($event)","(dragover)":"this.preventdefault($event)"}}),__metadata("design:paramtypes",[services_1.modelattachments,services_1.language,services_1.model,core_1.Renderer,services_1.toast,services_1.footer,services_1.metadata,services_1.modal])],ObjectRelatedlistFiles)}();exports.ObjectRelatedlistFiles=ObjectRelatedlistFiles;var ObjectRelatedCardFile=function(){function e(e,t,i,s){this.modelattachments=e,this.userpreferences=t,this.modal=i,this.toast=s,this.file={}}return Object.defineProperty(e.prototype,"humanFileSize",{get:function(){return this.modelattachments.humanFileSize(this.file.filesize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filedate",{get:function(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploading",{get:function(){return this.file.hasOwnProperty("uploadprogress")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progressbarstyle",{get:function(){return{width:this.file.uploadprogress+"%"}},enumerable:!0,configurable:!0}),e.prototype.determineFileIcon=function(){if(this.file.file_mime_type){var e=this.file.file_mime_type.split("/");switch(e[0]){case"image":return"image";case"text":switch(e[1]){case"html":return"html";default:return"txt"}case"audio":return"audio";case"video":return"video"}switch(e[1]){case"xml":return"xml";case"pdf":return"pdf";case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"excel";case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.oasis.opendocument.text":return"word";case"vnd.oasis.opendocument.presentation":case"vnd.openxmlformats-officedocument.presentationml.presentation":return"ppt";case"x-zip-compressed":return"zip";case"x-msdownload":return"exe"}}return"unknown"},e.prototype.downloadFile=function(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)},e.prototype.previewFile=function(){var i=this;if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){var e=this.file.file_mime_type.split("/");switch(e[0]){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe(function(t){t.instance.imgname=i.file.filename,t.instance.imgtype=i.file.file_mime_type,i.modelattachments.getAttachment(i.file.id).subscribe(function(e){t.instance.imgsrc="data:"+i.file.file_mime_type+";base64,"+e})});break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe(function(t){t.instance.name=i.file.filename,t.instance.type=i.file.file_mime_type,i.modelattachments.getAttachment(i.file.id).subscribe(function(e){t.instance.data=atob(e)})});break;case"application":switch(e[1]){case"pdf":this.modal.openModal("SystemObjectPreviewModal").subscribe(function(t){t.instance.name=i.file.filename,t.instance.type=i.file.file_mime_type,i.modelattachments.getAttachment(i.file.id).subscribe(function(e){t.instance.data=atob(e)})});break;default:this.downloadFile()}break;default:this.downloadFile()}}},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"file",void 0),e=__decorate([core_1.Component({selector:"[object-related-card-file]",template:'<div style="width: 30px; height: 30px;" class="slds-m-right--x-small slds-align--absolute-center"><system-icon *ngIf="!file.thumbnail" [icon]="determineFileIcon()" divClass sprite="doctype" size="\'small\'"></system-icon><div *ngIf="file.thumbnail"><img [src]="\'data:image/jpg;base64,\' + file.thumbnail"></div></div><div class="slds-media__body"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate"><h3 class="slds-truncate slds-text-heading--x-small slds-p-right--xxx-small" (click)="previewFile()"><a href="javascript:void(0);">{{file.filename}}</a></h3><div *ngIf="!uploading" class="slds-shrink-none"><object-file-action-menu [buttonsize]="\'x-small\'" [fileid]="file.id" [filename]="file.filename"></object-file-action-menu></div></div><div *ngIf="!uploading" class="slds-tile__detail slds-text-body--small"><ul class="slds-list--horizontal slds-has-dividers--left"><li class="slds-item">{{filedate}}</li><li class="slds-item">{{humanFileSize}}</li></ul></div><div *ngIf="uploading" class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate"><div class="slds-progress-bar"><span class="slds-progress-bar__value" [ngStyle]="progressbarstyle"><span class="slds-assistive-text">Progress: 25%</span></span></div><div class="slds-text-align--right" style="width: 50px;">{{file.uploadprogress}} %</div></div></div>'}),__metadata("design:paramtypes",[services_1.modelattachments,services_1.userpreferences,services_1.modal,services_1.toast])],e)}();exports.ObjectRelatedCardFile=ObjectRelatedCardFile;var ObjectRelatedDuplicates=function(){function ObjectRelatedDuplicates(e,t,i){this.language=e,this.model=t,this.toast=i,this.componentconfig={},this.displayitems=5,this.duplicates=[],this.hideDuplicates=!0}return ObjectRelatedDuplicates.prototype.ngAfterViewInit=function(){this.checkDuplicates()},ObjectRelatedDuplicates.prototype.toggleDuplicates=function(){this.hideDuplicates=!this.hideDuplicates},ObjectRelatedDuplicates.prototype.merged=function(e){e&&this.checkDuplicates()},Object.defineProperty(ObjectRelatedDuplicates.prototype,"showMergeButton",{get:function(){return 0<this.duplicates.length&&this.model.checkAccess("edit")},enumerable:!0,configurable:!0}),ObjectRelatedDuplicates.prototype.checkDuplicates=function(){var t=this;this.duplicates=[],this.model.duplicateCheck().subscribe(function(e){t.duplicates=e})},Object.defineProperty(ObjectRelatedDuplicates.prototype,"iconStyle",{get:function(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}},enumerable:!0,configurable:!0}),ObjectRelatedDuplicates=__decorate([core_1.Component({selector:"object-relatedlist-duplicates",template:'<article class="slds-card slds-card_boundary slds-m-bottom--medium"><div class="slds-card__header slds-grid"><header class="slds-media slds-media--center slds-has-flexi-truncate"><object-icon [icon]="\'merge\'" [size]="\'small\'" [sprite]="\'standard\'"></object-icon><div class="slds-grid slds-grid--vertical-align-center slds-media__body slds-truncate"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small">{{language.getLabel(\'LBL_DUPLICATES\')}} ({{duplicates.length}})</span></a></h2><system-utility-icon class="slds-m-horizontal--xx-small" *ngIf="duplicates.length > 0" icon="up" [ngStyle]="iconStyle" style="transition: .5s;" size="x-small" (click)="toggleDuplicates()"></system-utility-icon></div></header><object-merge-button *ngIf="showMergeButton" [mergemodels]="duplicates" (merged)="merged($event)"></object-merge-button></div><div class="slds-card__body" [hidden]="hideDuplicates"><div class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded"><div *ngFor="let duplicate of duplicates" class="slds-tile slds-media slds-card__tile slds-p-vertical--small slds-p-horizontal--small slds-size--1-of-1 spicecrm-card-size slds-hint-parent" object-related-duplicate-tile [duplicate]="duplicate" [parent]="model"></div></div></div></article>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.toast])],ObjectRelatedDuplicates)}();exports.ObjectRelatedDuplicates=ObjectRelatedDuplicates;var ObjectRelatedDuplicateTile=function(){function e(e,t,i,s){this.model=e,this.view=t,this.language=i,this.metadata=s,this.duplicate={},this.parent={},this.fieldset=""}return e.prototype.ngOnInit=function(){this.model.module=this.parent.module;var e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset,this.model.id=this.duplicate.id,this.model.data=this.duplicate},e.prototype.getFields=function(){return this.metadata.getFieldSetFields(this.fieldset)},e.prototype.navgiateDetail=function(){this.model.goDetail()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"duplicate",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parent",void 0),e=__decorate([core_1.Component({selector:"[object-related-duplicate-tile]",template:'<object-icon [module]="model.module" [size]="\'small\'"></object-icon><div class="slds-media__body"><div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate"><h3 class="slds-truncate slds-text-heading--small slds-m-bottom--small" (click)="navgiateDetail()"><a href="javascript:void(0);">{{model.data.summary_text}}</a></h3></div><div class="slds-tile__detail slds-text-body--small"><dl class="slds-dl--horizontal"><ng-container *ngFor="let field of getFields()"><dt class="slds-dl--horizontal__label slds-truncate"><span class="slds-truncate">{{language.getFieldDisplayName(model.module, field.field)}}</span></dt><dd class="slds-dl--horizontal__detail slds-tile__meta"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></div></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.language,services_1.metadata])],e)}();exports.ObjectRelatedDuplicateTile=ObjectRelatedDuplicateTile;var ObjectRelatedlistAll=function(){function ObjectRelatedlistAll(e,t,i,s,o,l){this.activatedRoute=e,this.navigation=t,this.language=i,this.metadata=s,this.model=o,this.relatedmodels=l,this.module="",this.id="",this.link="",this.related="",this.fieldset=void 0,this.componentconfig={},this.listfields=[]}return ObjectRelatedlistAll.prototype.ngOnInit=function(){var t=this;this.module=this.activatedRoute.params.value.module,this.link=this.activatedRoute.params.value.link,this.related=this.activatedRoute.params.value.related,this.fieldset=this.activatedRoute.params.value.fieldset,this.navigation.setActiveModule(this.module),this.model.module=this.module,this.model.id=this.activatedRoute.params.value.id,this.model.getData(!0,"detailview").subscribe(function(e){t.navigation.setActiveModule(t.module,t.model.id,e.summary_text)}),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn("no componentconfig found for ObjectRelatedlistAll nor ObjectList with module "+this.related),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.activatedRoute.params.value.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.relatedmodels.getData()},ObjectRelatedlistAll.prototype.goModule=function(){this.model.goModule()},ObjectRelatedlistAll.prototype.goModel=function(){this.model.goDetail()},ObjectRelatedlistAll=__decorate([core_1.Component({selector:"object-relatedlist-all",template:'<div class="slds-page-header"><nav role="navigation" aria-label="Breadcrumbs"><ol class="slds-breadcrumb slds-list_horizontal slds-wrap"><li class="slds-breadcrumb__item slds-text-title_caps"><a href="javascript:void(0);" (click)="goModule()">{{language.getModuleName( module )}}</a></li><li class="slds-breadcrumb__item slds-text-title_caps"><a href="javascript:void(0);" (click)="goModel()">{{model.data.summary_text}}</a></li></ol></nav><div class="slds-media"><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle slds-p-vertical--xx-small">{{language.getModuleName( related )}}</h1></div></div><div class="slds-col slds-align-bottom"><p class="slds-text-body--small">{{relatedmodels.items.length}} {{language.getLabel(\'LBL_OF\')}} {{relatedmodels.count}} {{language.getLabel(\'LBL_ITEMS\')}} • {{language.getLabel(\'LBL_SORTEDBY\')}} {{language.getFieldDisplayName(related, relatedmodels.sortfield)}} • {{language.getLabel(\'LBL_LASTUPDATE\')}} {{relatedmodels.getLastLoadTime()}}</p></div></div><div><object-relatedlist-table [listfields]="listfields" [module]="related"></object-relatedlist-table></div>',providers:[services_1.model,services_1.relatedmodels]}),__metadata("design:paramtypes",[router_1.ActivatedRoute,services_1.navigation,services_1.language,services_1.metadata,services_1.model,services_1.relatedmodels])],ObjectRelatedlistAll)}();exports.ObjectRelatedlistAll=ObjectRelatedlistAll;var ObjectRelatedlistTable=function(){function e(e,t,i,s,o){this.language=e,this.metadata=t,this.relatedmodels=i,this.model=s,this.layout=o,this.listfields=[],this.module=[],this.editable=!1,this.editcomponentset=!1}return Object.defineProperty(e.prototype,"isloading",{get:function(){return this.relatedmodels.isloading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!0,configurable:!0}),e.prototype.isSortable=function(e){return!0===e.fieldconfig.sortable},e.prototype.setSortField=function(e){this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)},e.prototype.getSortIcon=function(e){if(this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field))return"ASC"===this.relatedmodels.sort.sortdirection?"arrowdown":"arrowup"},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editable",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editcomponentset",void 0),e=__decorate([core_1.Component({selector:"object-relatedlist-table",template:'<table class="slds-table slds-max-medium-table_stacked-horizontal" [ngClass]="{\'slds-table--bordered\':!isSmall}"><thead><tr class="slds-text-title--caps"><th *ngFor="let item of listfields" class="slds-is-sortable" scope="col"><a href="javascript:void(0);" class="slds-text-link--reset" (click)="setSortField(item)"><span class="slds-truncate">{{language.getFieldDisplayName(module, item.field, item.fieldconfig, \'short\')}}</span><system-utility-icon *ngIf="isSortable(item)" [icon]="getSortIcon(item)" [size]="\'xx-small\'"></system-utility-icon></a></th><th class="slds-cell-shrink" scope="col"></th></tr></thead><tbody><tr object-related-list-item *ngFor="let relateditem of relatedmodels.items" [module]="module" [editable]="editable" [editcomponentset]="editcomponentset" [listfields]="listfields" [listitem]="relateditem" class="slds-hint-parent"></tr></tbody><tbody system-table-stencils *ngIf="isloading" [columns]="listfields.length" [tools]="true"></tbody></table>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,services_1.layout])],e)}();exports.ObjectRelatedlistTable=ObjectRelatedlistTable;var ObjectRelatedlistSequenced=function(t){function ObjectRelatedlistSequenced(){var e=null!==t&&t.apply(this,arguments)||this;return e.sequencefield="",e}return __extends(ObjectRelatedlistSequenced,t),ObjectRelatedlistSequenced.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this),this.sequencefield=this.componentconfig.sequencefield},ObjectRelatedlistSequenced=__decorate([core_1.Component({selector:"object-relatedlist-list",template:'<article *ngIf="!hidden" class="slds-card slds-card_boundary slds-m-bottom--medium"><object-relatedlist-header [module]="module" [actionset]="componentconfig.actionset"></object-relatedlist-header><div class="slds-card__body"><object-relatedlist-sequenced-table [listfields]="listfields" [module]="module" [sequencefield]="sequencefield"></object-relatedlist-sequenced-table></div><object-relatedlist-footer [module]="module"></object-relatedlist-footer></article>',providers:[services_1.relatedmodels]})],ObjectRelatedlistSequenced)}(ObjectRelatedlistList);exports.ObjectRelatedlistSequenced=ObjectRelatedlistSequenced;var ObjectRelatedlistSequencedTable=function(d){function e(e,t,i,s,o,l,a){var n=d.call(this,e,t,i,s,o)||this;return n.language=e,n.metadata=t,n.relatedmodels=i,n.model=s,n.layout=o,n.backend=l,n.broadcast=a,n.sequencefield="sequence_number",n}return __extends(e,d),Object.defineProperty(e.prototype,"displayfields",{get:function(){for(var e=[],t=0,i=this.listfields;t<i.length;t++){var s=i[t];s.fieldconfig.default&&e.push(s)}return e},enumerable:!0,configurable:!0}),e.prototype.dragstart=function(e,t){e.dataTransfer.setData("text",t.id)},e.prototype.dragover=function(e,t){e.stopPropagation(),e.dataTransfer.getData("text")!=t.id&&e.preventDefault()},e.prototype.drop=function(e,i){for(var o=this,s=e.dataTransfer.getData("text"),l=[],t=0,a=this.relatedmodels.items;t<a.length;t++){var n=a[t];l.push({id:n.id,sequence:parseInt(n[this.sequencefield],10)})}l.sort(function(e,t){return e.sequence>t.sequence?1:-1});var d={};l.some(function(e,t){if(e.id==s)return d=l.splice(t,1),!0}),l.some(function(e,t){if(e.id==i.id)return l.splice(t,0,d[0]),!0});for(var r=0,c={},m=[],p=0,u=l;p<u.length;p++){c[(n=u[p]).id]=r,m.push({id:n.id,sequence_number:r}),r++}for(var g=0,h=this.relatedmodels.items;g<h.length;g++){(n=h[g])[this.sequencefield]=c[n.id]}this.relatedmodels.items.sort(function(e,t){return parseInt(e[o.sequencefield],10)>parseInt(t[o.sequencefield],10)?1:-1}),this.backend.postRequest("/module/"+this.relatedmodels.relatedModule,{},m).subscribe(function(e){console.log("updated models");for(var t=0,i=e;t<i.length;t++){var s=i[t];o.broadcast.broadcastMessage("model.save",{id:s.id,module:o.relatedmodels.relatedModule,data:s.data})}})},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"sequencefield",void 0),e=__decorate([core_1.Component({selector:"object-relatedlist-sequenced-table",template:'<table class="slds-table slds-table--bordered slds-table--fixed-layout"><thead><tr class="slds-text-title--caps slds-p-vertical--xxx-small"><th class="slds-cell-shrink" scope="col"></th><th *ngFor="let item of displayfields" class="slds-is-sortable" scope="col"><a href="javascript:void(0);" class="slds-text-link--reset" (click)="setSortField(item)"><span class="slds-truncate">{{language.getFieldDisplayName(module, item.field, item.fieldconfig)}}</span><system-utility-icon *ngIf="isSortable(item)" [icon]="getSortIcon(item)" [size]="\'xx-small\'"></system-utility-icon></a></th><th class="slds-cell-shrink" scope="col"></th></tr></thead><tbody><tr *ngFor="let relateditem of relatedmodels.items" draggable (dragover)="dragover( $event, relateditem )" (dragstart)="dragstart( $event, relateditem )" (drop)="drop( $event, relateditem )" object-related-list-seqeunced-item [module]="module" [listfields]="displayfields" [listitem]="relateditem" class="slds-hint-parent"></tr></tbody><tbody system-table-stencils *ngIf="isloading" [columns]="listfields.length" [select]="true" [tools]="true"></tbody></table>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,services_1.layout,services_1.backend,services_1.broadcast])],e)}(ObjectRelatedlistTable);exports.ObjectRelatedlistSequencedTable=ObjectRelatedlistSequencedTable;var ObjectRelatedListSequencedItem=function(){function e(e,t,i,s){this.model=e,this.view=t,this.router=i,this.language=s,this.listfields=[],this.listitem={},this.module="",this.view.isEditable=!1}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.listitem.id,this.model.data=this.listitem},e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"[object-related-list-seqeunced-item]",template:'<td scope="row"><system-utility-icon [icon]="\'rows\'" [size]="\'x-small\'"></system-utility-icon></td><td *ngFor="let item of listfields" scope="row"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></td><td role="gridcell" class="slds-cell-shrink" data-label="Actions"><object-action-menu [buttonsize]="\'x-small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,router_1.Router,services_1.language])],e)}();exports.ObjectRelatedListSequencedItem=ObjectRelatedListSequencedItem;var ObjectFileActionMenu=function(){function e(e,t,i,s,o,l){var a=this;this.broadcast=e,this.modelattachments=t,this.language=i,this.elementRef=s,this.popup=o,this.renderer=l,this.buttonsize="",this.fileid="",this.filename="",this.isOpen=!1,o.closePopup$.subscribe(function(e){a.isOpen=!1})}return e.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listenGlobal("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)},e.prototype.getButtonSizeClass=function(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize},e.prototype.getDropdownLocationClass=function(){var e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"},e.prototype.deleteFile=function(){this.isOpen=!1,this.modelattachments.deleteAttachment(this.fileid)},e.prototype.downloadFile=function(){this.isOpen=!1,this.modelattachments.downloadAttachment(this.fileid,this.filename)},e.prototype.openFile=function(){this.isOpen=!1,this.modelattachments.openAttachment(this.fileid)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"buttonsize",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fileid",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"filename",void 0),e=__decorate([core_1.Component({selector:"object-file-action-menu",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': isOpen}"><button class="slds-button slds-button--icon-border-filled" [ngClass]="getButtonSizeClass()" aria-haspopup="true" (click)="toggleOpen()"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right" [ngClass]="getDropdownLocationClass()"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation" (click)="openFile()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate">{{language.getLabel(\'LBL_OPEN\')}}</span></a></li><li class="slds-dropdown__item" role="presentation" (click)="downloadFile()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate">{{language.getLabel(\'LBL_DOWNLOAD\')}}</span></a></li><li class="slds-dropdown__item" role="presentation" (click)="deleteFile()"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate">{{language.getLabel(\'LBL_DELETE\')}}</span></a></li></ul></div></div>',providers:[services_1.popup]}),__metadata("design:paramtypes",[services_1.broadcast,services_1.modelattachments,services_1.language,core_1.ElementRef,services_1.popup,core_1.Renderer])],e)}();exports.ObjectFileActionMenu=ObjectFileActionMenu;var ObjectStatusNetworkButton=function(){function e(e,t,i,s,o,l){this.language=e,this.metadata=t,this.model=i,this.router=s,this.renderer=o,this.elementRef=l,this.isOpen=!1,this.statusField="",this.statusNetwork=[],this.prmiaryStatus={},this.secondaryStatuses=[]}return Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this.model.isEditing||!this.model.checkAccess("edit")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isManaged",{get:function(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryItem",{get:function(){for(var e=0,t=this.statusNetwork;e<t.length;e++){var i=t[e];if(i.status_from==this.model.getField(this.statusField))return i}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryItems",{get:function(){for(var e=[],t=!1,i=0,s=this.statusNetwork;i<s.length;i++){var o=s[i];o.status_from==this.model.getField(this.statusField)&&(t&&e.push(o),t||(t=!0))}return e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)},e.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)},e.prototype.closeDropdown=function(){this.isOpen=!1},e.prototype.setStatus=function(e){this.model.startEdit(),this.model.setField(this.statusField,e),this.model.validate()?this.model.save():this.model.edit()},e=__decorate([core_1.Component({selector:"object-status-network-button",template:'<div *ngIf="isManaged" class="slds-button-group slds-m-horizontal--xxx-small"><button class="slds-button slds-button_neutral" [disabled]="isDisabled" (click)="closeDropdown()"><object-status-network-button-item [item]="primaryItem" [statusfield]="statusField" (status)="setStatus($event)"></object-status-network-button-item></button><div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" [ngClass]="{\'slds-is-open\': isOpen}"><button class="slds-button slds-button_icon slds-button_icon-border-filled" [disabled]="isDisabled || secondaryItems.length == 0" (click)="toggleOpen()"><system-button-icon icon="down"></system-button-icon></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" *ngFor="let secondaryItem of secondaryItems" role="presentation" (click)="closeDropdown()"><a href="javascript:void(0);" role="menuitem"><object-status-network-button-item [item]="secondaryItem" (status)="setStatus($event)"></object-status-network-button-item></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,router_1.Router,core_1.Renderer2,core_1.ElementRef])],e)}();exports.ObjectStatusNetworkButton=ObjectStatusNetworkButton;var ObjectStatusNetworkButtonItem=function(){function e(e,t,i,s,o,l){this.language=e,this.metadata=t,this.model=i,this.router=s,this.renderer=o,this.elementRef=l,this.item={},this.statusfield="",this.status=new core_1.EventEmitter}return e.prototype.setStatus=function(){this.status.emit(this.item.status_to)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"statusfield",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"status",void 0),e=__decorate([core_1.Component({selector:"object-status-network-button-item",template:'<span class="slds-truncate slds-text-color_default">{{language.getLabel(item.action_label)}}</span>',host:{"(click)":"this.setStatus()"}}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,router_1.Router,core_1.Renderer2,core_1.ElementRef])],e)}();exports.ObjectStatusNetworkButtonItem=ObjectStatusNetworkButtonItem;var ObjectRecordFieldset=function(){function ObjectRecordFieldset(e,t,i){this.metadata=e,this.model=t,this.view=i,this.fieldset="",this.fieldpadding="xx-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spicecrm-fieldminheight",this.direction="horizontal",this.fieldsetitems=[],this.numberOfColumns=0}return ObjectRecordFieldset.prototype.ngOnInit=function(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(var e=0,t=this.fieldsetitems;e<t.length;e++){var i=t[e];this.numberOfColumns=this.numberOfColumns+(i.fieldconfig.width?1*i.fieldconfig.width:i.fieldconfig.width=1)}!this.renderVertical&&8<this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")},Object.defineProperty(ObjectRecordFieldset.prototype,"renderVertical",{get:function(){return"vertical"==this.direction},enumerable:!0,configurable:!0}),ObjectRecordFieldset.prototype.isField=function(e){return!!e.field},ObjectRecordFieldset.prototype.sizeClass=function(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fieldset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fieldpadding",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fielddisplayclass",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"direction",void 0),ObjectRecordFieldset=__decorate([core_1.Component({selector:"object-record-fieldset",template:'<div *ngIf="renderVertical"><div *ngFor="let fieldsetitem of fieldsetitems"><object-record-fieldset-field *ngIf="isField(fieldsetitem)" [fieldsetitem]="fieldsetitem" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding"></object-record-fieldset-field><object-record-fieldset *ngIf="!isField(fieldsetitem)" [fieldset]="fieldsetitem.fieldset" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding" [direction]="fieldsetitem.fieldconfig.direction"></object-record-fieldset></div></div><div *ngIf="!renderVertical" class="slds-grid slds-wrap"><div *ngFor="let fieldsetitem of fieldsetitems; let i=index" [ngClass]="sizeClass(i)"><object-record-fieldset-field *ngIf="isField(fieldsetitem)" [fieldsetitem]="fieldsetitem" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding"></object-record-fieldset-field><object-record-fieldset *ngIf="!isField(fieldsetitem)" [fieldset]="fieldsetitem.fieldset" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding" [direction]="fieldsetitem.fieldconfig.direction"></object-record-fieldset></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view])],ObjectRecordFieldset)}();exports.ObjectRecordFieldset=ObjectRecordFieldset;var ObjectRecordFieldsetField=function(){function e(){this.fieldsetitem="",this.fieldpadding="x-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spicecrm-fieldminheight"}return e.prototype.showLabel=function(e){return!0!==e.hidelabel},Object.defineProperty(e.prototype,"padding",{get:function(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldsetitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldpadding",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fielddisplayclass",void 0),e=__decorate([core_1.Component({selector:"object-record-fieldset-field",template:'<div [ngClass]="padding"><field-label *ngIf="showLabel(fieldsetitem.fieldconfig) && fieldsetitem.field !== \'blank\'" [fieldname]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig"></field-label><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" [fielddisplayclass]="fielddisplayclass"></field-container></div>'})],e)}();exports.ObjectRecordFieldsetField=ObjectRecordFieldsetField;var ObjectRecordFieldsetHorizontalList=function(){function e(e,t){this.metadata=e,this.model=t,this.fieldset="",this.fieldsetitems=[]}return e.prototype.ngOnInit=function(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)},e.prototype.isField=function(e){return!!e.field},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-record-fieldset-horizontal-list",template:'<ul class="slds-list_horizontal slds-has-dividers_left"><li *ngFor="let fieldsetitem of fieldsetitems" class="slds-item"><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" fielddisplayclass="slds-align_absolute-center"></field-container></li></ul>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model])],e)}();exports.ObjectRecordFieldsetHorizontalList=ObjectRecordFieldsetHorizontalList;var ObjectRecordChecklist=function(){function ObjectRecordChecklist(){this.componentconfig={}}return Object.defineProperty(ObjectRecordChecklist.prototype,"checkitems",{get:function(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRecordChecklist.prototype,"modelfield",{get:function(){return this.componentconfig.field},enumerable:!0,configurable:!0}),ObjectRecordChecklist=__decorate([core_1.Component({selector:"object-record-checklist",template:'<div class="slds-box slds-m-bottom--small"><h3 class="slds-text-heading_small slds-p-vertical--xx-small">Checklist</h3><object-record-checklist-item *ngFor="let checkitem of checkitems" [checkfield]="modelfield" [checkitem]="checkitem"></object-record-checklist-item></div>',providers:[services_1.view]})],ObjectRecordChecklist)}();exports.ObjectRecordChecklist=ObjectRecordChecklist;var ObjectRecordChecklistItem=function(){function e(e,t,i,s,o){this.view=e,this.model=t,this.modelutilities=i,this.language=s,this.backend=o,this.checkitem={},this.checkfield="",this.checkid="",this.checkid=this.modelutilities.generateGuid()}return Object.defineProperty(e.prototype,"checked",{get:function(){try{return JSON.parse(this.model.data[this.checkfield])[this.checkitem.item]}catch(e){return!1}},enumerable:!0,configurable:!0}),e.prototype.checkItem=function(e){var t={};try{t=JSON.parse(this.model.data[this.checkfield])}catch(e){}t[this.checkitem.item]=e.target.checked,this.model.data[this.checkfield]=JSON.stringify(t),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)},Object.defineProperty(e.prototype,"disabled",{get:function(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"checkitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"checkfield",void 0),e=__decorate([core_1.Component({selector:"object-record-checklist-item",template:'<div class="slds-form-element slds-p-vertical--xx-small"><div class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" name="options" [id]="checkid" [ngModel]="checked" (change)="checkItem($event)" [disabled]="disabled"> <label class="slds-checkbox__label" [attr.for]="checkid"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{checkitem.name}}</span></label></span></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.model,services_1.modelutilities,services_1.language,services_1.backend])],e)}();exports.ObjectRecordChecklistItem=ObjectRecordChecklistItem;var ObjectActivitiyTimeline=function(){function ObjectActivitiyTimeline(e,t,i,s){this.model=e,this.language=t,this.activitiyTimeLineService=i,this.activatedRoute=s,this.parentModule="",this.parentId="",this.componentconfig={},this.displayAddContainer=!1}return ObjectActivitiyTimeline.prototype.ngOnInit=function(){this.parentModule=this.model.module,this.parentId=this.model.id,this.activitiyTimeLineService.parent=this.model,this.componentconfig.hideaddcontainer||(this.displayAddContainer=!0)},ObjectActivitiyTimeline.prototype.ngOnDestroy=function(){this.activitiyTimeLineService.stopSubscriptions()},ObjectActivitiyTimeline.prototype.reload=function(){this.activitiyTimeLineService.getTimeLineData("Activities"),this.activitiyTimeLineService.getTimeLineData("History")},ObjectActivitiyTimeline.prototype.loadMore=function(e){this.activitiyTimeLineService.getMoreTimeLineData(e,5)},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectActivitiyTimeline.prototype,"parentModule",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectActivitiyTimeline.prototype,"parentId",void 0),ObjectActivitiyTimeline=__decorate([core_1.Component({selector:"object-activitiytimeline",template:'<object-activitiytimeline-add-container *ngIf="displayAddContainer"></object-activitiytimeline-add-container><div class="slds-grid slds-grid--align-spread slds-p-top--small slds-grid--vertical-align-center"><div class="slds-grid slds-grid--vertical-align-center"><h2 class="slds-p-vertical--xx-small slds-text-heading--small">{{language.getLabel(\'LBL_ACTIVITIES\')}}</h2></div><div class="slds-grid slds-grid--vertical-align-center"><object-activitiy-timeline-filter class="slds-p-horizontal--xxx-small"></object-activitiy-timeline-filter><system-button-icon class="slds-p-horizontal--xxx-small" [icon]="\'refresh\'" (click)="reload()"></system-button-icon></div></div><div class="slds-p-top--x-small"><div><div class="slds-is-relative spiceActivitiyTimelineHeader"><h2 class="slds-p-vertical--xx-small slds-text-heading--x-small">{{language.getLabel(\'LBL_NEXT_STEPS\')}}</h2><button *ngIf="activitiyTimeLineService.canLoadMore(\'Activities\')" class="slds-button slds-button--neutral showMoreButton" type="button" (click)="loadMore(\'Activities\')"><span>{{language.getLabel(\'LBL_MORE\')}}</span></button></div><object-activitiytimeline-container [module]="\'Activities\'"></object-activitiytimeline-container></div><div><div class="slds-is-relative spiceActivitiyTimelineHeader"><h2 class="slds-p-vertical--xx-small slds-text-heading--x-small">{{language.getLabel(\'LBL_PAST_ACTIVITIES\')}}</h2><object-activitiytimeline-summary-button></object-activitiytimeline-summary-button></div><object-activitiytimeline-container [module]="\'History\'"></object-activitiytimeline-container><div class="slds-grid slds-grid_align-end"><button *ngIf="activitiyTimeLineService.canLoadMore(\'History\')" class="slds-button slds-button--neutral showMoreButton" type="button" (click)="loadMore(\'History\')"><span>{{language.getLabel(\'LBL_MORE\')}}</span></button></div></div></div>',providers:[services_1.activitiyTimeLineService]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.activitiyTimeLineService,router_1.ActivatedRoute])],ObjectActivitiyTimeline)}();exports.ObjectActivitiyTimeline=ObjectActivitiyTimeline;var ObjectActivityTimelineFilter=function(){function e(e,t,i,s,o){this.renderer=e,this.elementRef=t,this.language=i,this.metadata=s,this.activitiyTimeLineService=o,this.isOpen=!1,this.activityObjects=["Tasks","Meetings","Calls","Notes","Emails"],this.activityTypes=[],this.objectfilters=[],this.ownerfilter="",this.setFromService()}return e.prototype.setFromService=function(){this.objectfilters=JSON.parse(JSON.stringify(this.activitiyTimeLineService.filters.objectfilters)),this.ownerfilter=this.activitiyTimeLineService.filters.own},e.prototype.setToService=function(){this.activitiyTimeLineService.filters.objectfilters=JSON.parse(JSON.stringify(this.objectfilters)),this.activitiyTimeLineService.filters.own=this.ownerfilter,this.activitiyTimeLineService.reload()},e.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.buildTypes(),this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1,this.clickListener())},e.prototype.buildTypes=function(){this.activityTypes=[];for(var e=0,t=this.activityObjects;e<t.length;e++){var i=t[e];this.activityTypes.push({type:i,name:this.language.getModuleName(i)})}this.activityTypes.sort(function(e,t){return e.name>t.name?1:-1})},Object.defineProperty(e.prototype,"filterColorClass",{get:function(){return 0<this.activitiyTimeLineService.filters.objectfilters.length||this.activitiyTimeLineService.filters.own?"slds-icon-text-error":"slds-icon-text-default"},enumerable:!0,configurable:!0}),e.prototype.setFilter=function(e,t){if(e.preventDefault(),"all"==t)this.objectfilters=[];else{var i=this.objectfilters.indexOf(t);0<=i?this.objectfilters.splice(i,1):this.objectfilters.push(t)}},e.prototype.getChecked=function(e){return"all"==e?0==this.objectfilters.length:0<=this.objectfilters.indexOf(e)},e.prototype.closeDialog=function(e){this.clickListener&&this.clickListener(),e?this.setToService():this.setFromService(),this.isOpen=!1},e=__decorate([core_1.Component({selector:"object-activitiy-timeline-filter",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-p-horizontal--xxx-small" [ngClass]="{\'slds-is-open\': isOpen}"><system-utility-icon [icon]="\'filterList\'" [size]="\'x-small\'" (click)="toggleOpen()" [colorclass]="filterColorClass" [title]="language.getLabel(\'LBL_FILTER\')"></system-utility-icon><div class="slds-is-absolute slds-dropdown slds-dropdown_right slds-nubbin_top-right" style="right:-10px;top:25px;"><div class="slds-grid"><div class="slds-p-horizontal--small slds-border--right" style="min-width: 180px"><div class="slds-p-vertical--x-small">{{language.getLabel(\'LBL_TYPE\')}}</div><div class="slds-form-element slds-p-vertical--xx-small"><div class="slds-form-element__control" (click)="setFilter($event, \'all\')"><span class="slds-checkbox"><input type="checkbox" id="alltypes" [checked]="getChecked(\'all\')"> <label class="slds-checkbox__label" for="alltypes"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_ALL\')}}</span></label></span></div></div><div class="slds-form-element slds-p-vertical--xx-small" *ngFor="let activityType of activityTypes"><div class="slds-form-element__control" (click)="setFilter($event, activityType.type)"><span class="slds-checkbox"><input type="checkbox" [id]="activityType.type" [checked]="getChecked(activityType.type)"> <label class="slds-checkbox__label" [attr.for]="activityType.type"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{activityType.name}}</span></label></span></div></div></div><div class="slds-p-horizontal--small" style="min-width: 180px"><div class="slds-p-vertical--x-small">{{language.getLabel(\'LBL_FILTER\')}}</div><fieldset class="slds-form-element"><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="ownerall" name="filters" [(ngModel)]="ownerfilter"> <label class="slds-radio__label" for="ownerall"><span class="slds-radio_faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_ALL\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="ownerassignedtome" name="filters" value="assigned" [(ngModel)]="ownerfilter"> <label class="slds-radio__label" for="ownerassignedtome"><span class="slds-radio_faux"></span> <span class="slds-form-element__label slds-truncate">{{language.getLabel(\'LBL_ASSIGNEDTOME\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="ownercreatedbyme" name="filters" value="created" [(ngModel)]="ownerfilter"> <label class="slds-radio__label" for="ownercreatedbyme"><span class="slds-radio_faux"></span> <span class="slds-form-element__label slds-truncate">{{language.getLabel(\'LBL_CREATEDBYME\')}}</span></label></span></div></fieldset></div></div><footer class="slds-popover__footer"><div class="slds-grid"><button class="slds-col--bump-left slds-button slds-button_neutral" (click)="closeDialog(false)">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="closeDialog(true)">{{language.getLabel(\'LBL_APPLY\')}}</button></div></footer></div></div>'}),__metadata("design:paramtypes",[core_1.Renderer2,core_1.ElementRef,services_1.language,services_1.metadata,services_1.activitiyTimeLineService])],e)}();exports.ObjectActivityTimelineFilter=ObjectActivityTimelineFilter;var ObjectActivitiyTimelineContainer=function(){function e(e,t){this.activitiyTimeLineService=e,this.language=t,this.module=""}return e.prototype.ngOnInit=function(){this.activitiyTimeLineService.getTimeLineData(this.module)},Object.defineProperty(e.prototype,"activities",{get:function(){return this.activitiyTimeLineService.activities[this.module].list},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasActivities",{get:function(){return 0<this.activitiyTimeLineService.activities[this.module].list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this.activitiyTimeLineService.activities[this.module].loading},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"object-activitiytimeline-container",template:'<ul *ngIf="hasActivities; else nocontent" class="slds-timeline slds-p-vertical--small"><li *ngFor="let activity of activities"><object-activitiytimeline-item-container [activity]="activity"></object-activitiytimeline-item-container></li></ul><ng-template #nocontent><system-illustration-no-records *ngIf="!loading">{{language.getLabel(\'LBL_NO_ENTRIES\')}}</system-illustration-no-records></ng-template><system-spinner *ngIf="loading" class="slds-p-vertical--small"></system-spinner>'}),__metadata("design:paramtypes",[services_1.activitiyTimeLineService,services_1.language])],e)}();exports.ObjectActivitiyTimelineContainer=ObjectActivitiyTimelineContainer;var ObjectActivitiyTimelineItemContainer=function(){function ObjectActivitiyTimelineItemContainer(e){this.metadata=e,this.activity={}}return ObjectActivitiyTimelineItemContainer.prototype.ngOnInit=function(){var t=this,e=this.metadata.getComponentConfig("ObjectActivitiyTimelineItemContainer",this.activity.module);if(e.componentset)for(var i=0,s=this.metadata.getComponentSetObjects(e.componentset);i<s.length;i++){var o=s[i];this.metadata.addComponent(o.component,this.container).subscribe(function(e){e.instance.activity=t.activity})}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectActivitiyTimelineItemContainer.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineItemContainer.prototype,"activity",void 0),ObjectActivitiyTimelineItemContainer=__decorate([core_1.Component({selector:"object-activitiytimeline-item-container",template:"<ng-container #container></ng-container>"}),__metadata("design:paramtypes",[services_1.metadata])],ObjectActivitiyTimelineItemContainer)}();exports.ObjectActivitiyTimelineItemContainer=ObjectActivitiyTimelineItemContainer;var ObjectActivitiyTimelineAddTabContainer=function(){function e(e){this.metadata=e,this.tabcomponent="",this.componentconfig={}}return e.prototype.ngOnInit=function(){var t=this;this.metadata.addComponent(this.tabcomponent,this.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"tabcomponent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"componentconfig",void 0),e=__decorate([core_1.Component({selector:"object-activitiytimeline-add-tabcontainer",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.ObjectActivitiyTimelineAddTabContainer=ObjectActivitiyTimelineAddTabContainer;var ObjectActivitiyTimelineCall=function(){function ObjectActivitiyTimelineCall(e,t,i,s){this.model=e,this.metadata=t,this.view=i,this.userpreferences=s,this.activity={},this.showtoolset=!0,this.formFieldSet="",this.isopen=!1,this.view.isEditable=!1,this.model.module="Calls";var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineCall",this.model.module);this.formFieldSet=o.fieldset}return Object.defineProperty(ObjectActivitiyTimelineCall.prototype,"subject",{get:function(){var e=this.model.getField("name");return e||"-- no subject --"},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineCall.prototype,"starttime",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getTimeFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineCall.prototype,"startdate",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineCall.prototype.ngOnInit=function(){this.model.id=this.activity.id,this.model.data=this.activity.data},Object.defineProperty(ObjectActivitiyTimelineCall.prototype,"enableDetail",{get:function(){return this.model.checkAccess("detail")},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineCall.prototype.goDetail=function(){this.model.goDetail()},ObjectActivitiyTimelineCall.prototype.toggleexpand=function(){this.isopen=!this.isopen},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineCall.prototype,"activity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectActivitiyTimelineCall.prototype,"showtoolset",void 0),ObjectActivitiyTimelineCall=__decorate([core_1.Component({selector:"object-activitiytimeline-call",template:'<div class="slds-timeline__item_expandable slds-timeline__item_call" [ngClass]="{\'slds-is-open\': isopen}"><div class="slds-media"><div class="slds-media__figure"><button class="slds-button slds-button_icon" aria-controls="call-item-base" (click)="toggleexpand()"><system-button-icon icon="switch" addclasses="slds-timeline__details-action-icon"></system-button-icon></button><system-icon icon="log_a_call" size="small" divClass="slds-icon_container slds-icon-standard-log-a-call slds-timeline__icon"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread slds-timeline__trigger"><div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space"><h3 class="slds-truncate" [title]="subject" modelPopOver><a href="javascript:void(0);"><strong>{{subject}}</strong></a></h3></div><div class="slds-timeline__actions slds-timeline__actions_inline"><p class="slds-timeline__date">{{starttime}} | {{startdate}}</p><object-action-menu class="slds-show--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div></div><p class="slds-m-horizontal_xx-small"><a href="javascript:void(0);" modelPopOver module="Users" [id]="model.getField(\'assigned_user_id\')">{{model.getField(\'assigned_user_name\')}}</a><ng-container *ngIf="model.getField(\'contact_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver module="Contacts" [id]="model.getField(\'contact_id\')">{{model.getField(\'contact_name\')}}</a></ng-container><ng-container *ngIf="model.getField(\'parent_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver [module]="model.getField(\'parent_type\')" [id]="model.getField(\'parent_id\')">{{model.getField(\'parent_name\')}}</a></ng-container></p><article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small"><object-record-fieldset [fieldset]="formFieldSet" direction="vertical" fielddisplayclass="slds-truncate" fieldpadding="none"></object-record-fieldset></article></div></div><object-action-menu class="slds-hide--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.view,services_1.userpreferences])],ObjectActivitiyTimelineCall)}();exports.ObjectActivitiyTimelineCall=ObjectActivitiyTimelineCall;var ObjectActivitiyTimelineEvent=function(){function ObjectActivitiyTimelineEvent(e,t,i,s){this.model=e,this.userpreferences=t,this.metadata=i,this.view=s,this.activity={},this.showtoolset=!0,this.formFieldSet="",this.isopen=!1,this.view.isEditable=!1,this.model.module="Meetings";var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineEvent",this.model.module);this.formFieldSet=o.fieldset}return ObjectActivitiyTimelineEvent.prototype.ngOnInit=function(){this.model.id=this.activity.id,this.model.data=this.activity.data},Object.defineProperty(ObjectActivitiyTimelineEvent.prototype,"enableDetail",{get:function(){return this.model.checkAccess("detail")},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineEvent.prototype.goDetail=function(){this.model.goDetail()},Object.defineProperty(ObjectActivitiyTimelineEvent.prototype,"subject",{get:function(){return this.model.getField("name")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineEvent.prototype,"starttime",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getTimeFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineEvent.prototype,"startdate",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineEvent.prototype.toggleexpand=function(){this.isopen=!this.isopen},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineEvent.prototype,"activity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectActivitiyTimelineEvent.prototype,"showtoolset",void 0),ObjectActivitiyTimelineEvent=__decorate([core_1.Component({selector:"object-activitiytimeline-event",template:'<div class="slds-timeline__item_expandable slds-timeline__item_event" [ngClass]="{\'slds-is-open\': isopen}"><div class="slds-media"><div class="slds-media__figure"><button class="slds-button slds-button_icon" (click)="toggleexpand()"><system-button-icon icon="switch" addclasses="slds-timeline__details-action-icon"></system-button-icon></button><system-icon icon="event" size="small" divClass="slds-icon_container slds-icon-standard-event slds-timeline__icon"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread slds-timeline__trigger"><div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space"><h3 class="slds-truncate" [title]="subject" modelPopOver><a href="javascript:void(0);"><strong>{{subject}}</strong></a></h3></div><div class="slds-timeline__actions slds-timeline__actions_inline"><p class="slds-timeline__date">{{starttime}} | {{startdate}}</p><object-action-menu class="slds-show--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div></div><p class="slds-m-horizontal_xx-small"><a href="javascript:void(0);" modelPopOver module="Users" [id]="model.getField(\'assigned_user_id\')">{{model.getField(\'assigned_user_name\')}}</a><ng-container *ngIf="model.getField(\'contact_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver module="Contacts" [id]="model.getField(\'contact_id\')">{{model.getField(\'contact_name\')}}</a></ng-container><ng-container *ngIf="model.getField(\'parent_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver [module]="model.getField(\'parent_type\')" [id]="model.getField(\'parent_id\')">{{model.getField(\'parent_name\')}}</a></ng-container></p><article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small"><object-record-fieldset [fieldset]="formFieldSet" fielddisplayclass="slds-truncate" fieldpadding="none" direction="vertical"></object-record-fieldset></article></div></div><object-action-menu class="slds-hide--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.userpreferences,services_1.metadata,services_1.view])],ObjectActivitiyTimelineEvent)}();exports.ObjectActivitiyTimelineEvent=ObjectActivitiyTimelineEvent;var ObjectActivitiyTimelineEmail=function(){function ObjectActivitiyTimelineEmail(e,t,i,s){this.model=e,this.view=t,this.metadata=i,this.userpreferences=s,this.activity=[],this.showtoolset=!0,this.formFieldSet="",this.isopen=!1,this.view.isEditable=!1,this.model.module="Emails";var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineEmail",this.model.module);this.formFieldSet=o.fieldset}return Object.defineProperty(ObjectActivitiyTimelineEmail.prototype,"subject",{get:function(){var e=this.model.getField("name");return e||"-- no subject --"},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineEmail.prototype,"time",{get:function(){var e=this.model.getField("date_entered");return e?e.format(this.userpreferences.getTimeFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineEmail.prototype,"date",{get:function(){var e=this.model.getField("date_entered");return e?e.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineEmail.prototype,"enableDetail",{get:function(){return this.model.checkAccess("detail")},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineEmail.prototype.goDetail=function(){this.model.goDetail()},ObjectActivitiyTimelineEmail.prototype.ngOnInit=function(){this.model.id=this.activity.id,this.model.data=this.activity.data},ObjectActivitiyTimelineEmail.prototype.toggleexpand=function(){this.isopen=!this.isopen},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineEmail.prototype,"activity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectActivitiyTimelineEmail.prototype,"showtoolset",void 0),ObjectActivitiyTimelineEmail=__decorate([core_1.Component({selector:"object-activitiytimeline-email",template:'<div class="slds-timeline__item_expandable slds-timeline__item_email" [ngClass]="{\'slds-is-open\': isopen}"><div class="slds-media"><div class="slds-media__figure"><button class="slds-button slds-button_icon" aria-controls="call-item-base" (click)="toggleexpand()"><system-button-icon icon="switch" addclasses="slds-timeline__details-action-icon"></system-button-icon></button><system-icon icon="email" size="small" divClass="slds-icon_container slds-icon-standard-email slds-timeline__icon"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread slds-timeline__trigger"><div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space"><h3 class="slds-truncate" [title]="subject" modelPopOver><a href="javascript:void(0);"><strong>{{subject}}</strong></a></h3></div><div class="slds-timeline__actions slds-timeline__actions_inline"><p class="slds-timeline__date">{{time}} | {{date}}</p><object-action-menu *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div></div><p class="slds-m-horizontal_xx-small"><a href="javascript:void(0);">{{model.getField(\'to_addrs\')}}</a></p><article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small"><object-record-fieldset [fieldset]="formFieldSet" direction="vertical" fielddisplayclass="slds-truncate" fieldpadding="none"></object-record-fieldset></article></div></div></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.metadata,services_1.userpreferences])],ObjectActivitiyTimelineEmail)}();exports.ObjectActivitiyTimelineEmail=ObjectActivitiyTimelineEmail;var ObjectActivitiyTimelineNote=function(){function ObjectActivitiyTimelineNote(e,t,i,s){this.model=e,this.view=t,this.metadata=i,this.userpreferences=s,this.activity=[],this.showtoolset=!0,this.formFieldSet="",this.isopen=!1,this.view.isEditable=!1,this.model.module="Notes";var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineNote",this.model.module);this.formFieldSet=o.fieldset}return ObjectActivitiyTimelineNote.prototype.ngOnInit=function(){this.model.id=this.activity.id,this.model.data=this.activity.data},ObjectActivitiyTimelineNote.prototype.goDetail=function(){this.model.goDetail()},Object.defineProperty(ObjectActivitiyTimelineNote.prototype,"subject",{get:function(){return this.model.getField("name")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineNote.prototype,"time",{get:function(){var e=this.model.getField("date_entered");return e?e.format(this.userpreferences.getTimeFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineNote.prototype,"date",{get:function(){var e=this.model.getField("date_entered");return e?e.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineNote.prototype.toggleopen=function(){this.isopen=!this.isopen},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineNote.prototype,"activity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectActivitiyTimelineNote.prototype,"showtoolset",void 0),ObjectActivitiyTimelineNote=__decorate([core_1.Component({selector:"object-activitiytimeline-note",template:'<div class="slds-timeline__item_expandable slds-timeline__item_note" [ngClass]="{\'slds-is-open\': isopen}"><div class="slds-media"><div class="slds-media__figure"><button class="slds-button slds-button_icon" (click)="toggleopen()"><system-button-icon icon="switch" addclasses="slds-timeline__details-action-icon"></system-button-icon></button><system-icon icon="note" size="small" divClass="slds-icon_container slds-icon-standard-note slds-timeline__icon"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread slds-timeline__trigger"><div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space"><h3 class="slds-truncate" [title]="subject" modelPopOver><a href="javascript:void(0);"><strong>{{subject}}</strong></a></h3></div><div class="slds-timeline__actions slds-timeline__actions_inline"><p class="slds-timeline__date">{{time}} | {{date}}</p><object-action-menu *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div></div><p class="slds-m-horizontal_xx-small"><a href="javascript:void(0);" modelPopOver module="Users" [id]="model.getField(\'assigned_user_id\')">{{model.getField(\'assigned_user_name\')}}</a><ng-container *ngIf="model.getField(\'contact_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver module="Contacts" [id]="model.getField(\'contact_id\')">{{model.getField(\'contact_name\')}}</a></ng-container><ng-container *ngIf="model.getField(\'parent_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver [module]="model.getField(\'parent_type\')" [id]="model.getField(\'parent_id\')">{{model.getField(\'parent_name\')}}</a></ng-container></p><article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small"><object-record-fieldset [fieldset]="formFieldSet" direction="vertical" fielddisplayclass="slds-truncate" fieldpadding="none"></object-record-fieldset></article></div></div></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.metadata,services_1.userpreferences])],ObjectActivitiyTimelineNote)}();exports.ObjectActivitiyTimelineNote=ObjectActivitiyTimelineNote;var ObjectActivitiyTimelineTask=function(){function ObjectActivitiyTimelineTask(e,t,i,s){this.metadata=e,this.model=t,this.view=i,this.userpreferences=s,this.activity={},this.showtoolset=!0,this.formFieldSet="",this.isopen=!1,this.view.isEditable=!1,this.model.module="Tasks",this.model.initialize();var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineTask",this.model.module);this.formFieldSet=o.fieldset}return ObjectActivitiyTimelineTask.prototype.ngOnInit=function(){this.model.id=this.activity.id,this.model.data=this.activity.data},Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"completed",{get:function(){return"Completed"==this.model.getField("status")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"canComplete",{get:function(){return"Completed"!==this.model.data.status&&"Deferred"!==this.model.data.status||!this.model.checkAccess("edit")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"subject",{get:function(){return this.model.getField("name")},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"time",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getTimeFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"date",{get:function(){var e=this.model.getField("date_start");return e?e.format(this.userpreferences.getDateFormat()):""},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineTask.prototype,"enableDetail",{get:function(){return this.model.checkAccess("detail")},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineTask.prototype.goDetail=function(){this.model.goDetail()},ObjectActivitiyTimelineTask.prototype.completeTask=function(){this.model.data.status="Completed",this.model.save()},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineTask.prototype,"activity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectActivitiyTimelineTask.prototype,"showtoolset",void 0),ObjectActivitiyTimelineTask=__decorate([core_1.Component({selector:"object-activitiytimeline-task",template:'<div class="slds-timeline__item_expandable slds-timeline__item_task" [ngClass]="{\'slds-is-open\': isopen}"><div class="slds-media"><div class="slds-media__figure"><button class="slds-button slds-button_icon" aria-controls="call-item-base" (click)="isopen = !isopen"><system-button-icon icon="switch" addclasses="slds-timeline__details-action-icon"></system-button-icon></button><system-icon icon="task" size="small" divClass="slds-icon_container slds-icon-standard-task slds-timeline__icon"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread slds-timeline__trigger"><div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space"><div class="slds-media__figure slds-p-top--xxx-small"><label class="slds-checkbox" [attr.for]="model.id + \'-complete\'"><input name="checkbox" type="checkbox" [disabled]="!canComplete" [id]="model.id + \'-complete\'" [ngModel]="completed" (change)="completeTask()"> <span class="slds-checkbox--faux"></span></label></div><h3 class="slds-truncate" [title]="subject" modelPopOver><a href="javascript:void(0);"><strong><span [innerHTML]="subject"></span></strong></a></h3></div><div class="slds-timeline__actions slds-timeline__actions_inline"><p class="slds-timeline__date">{{time}} | {{date}}</p><object-action-menu class="slds-show--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div></div><p class="slds-m-horizontal_xx-small"><a href="javascript:void(0);" modelPopOver module="Users" [id]="model.getField(\'created_by\')">{{model.getField(\'created_by_name\')}}</a> ,&nbsp;<a href="javascript:void(0);" modelPopOver module="Users" [id]="model.getField(\'assigned_user_id\')">{{model.getField(\'assigned_user_name\')}}</a><ng-container *ngIf="model.getField(\'parent_id\')">,&nbsp;<a href="javascript:void(0);" modelPopOver [module]="model.getField(\'parent_type\')" [id]="model.getField(\'parent_id\')">{{model.getField(\'parent_name\')}}</a></ng-container></p><article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small"><object-record-fieldset [fieldset]="formFieldSet" direction="vertical" fielddisplayclass="slds-truncate" fieldpadding="none"></object-record-fieldset></article></div></div><object-action-menu class="slds-hide--medium" *ngIf="showtoolset" [buttonsize]="\'x-small\'"></object-action-menu></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view,services_1.userpreferences])],ObjectActivitiyTimelineTask)}();exports.ObjectActivitiyTimelineTask=ObjectActivitiyTimelineTask;var ObjectActivitiyTimelineAddContainer=function(){function ObjectActivitiyTimelineAddContainer(e,t,i,s,o,l){var a=this;this.model=e,this.language=t,this.activitiyTimeLineService=i,this.metadata=s,this.elementRef=o,this.renderer=l,this.currenttab="",this.tabs=[],this.moreOpen=!1,this.moreModules=[],this.resizeListener=this.renderer.listen("window","resize",function(e){a.handleOverflow()})}return ObjectActivitiyTimelineAddContainer.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddContainer",this.model.module);if(e&&e.componentset){for(var t=0,i=this.metadata.getComponentSetObjects(e.componentset);t<i.length;t++){var s=i[t];s.componentconfig.module&&this.metadata.checkModuleAcl(s.componentconfig.module,"edit")&&this.tabs.push({module:s.componentconfig.module,component:s.component,componentconfig:s.componentconfig})}this.currenttab=this.tabs[0].module}else e&&e.tabs&&0<e.tabs.length&&(this.tabs=e.tabs,this.currenttab=e.tabs[0].module)},ObjectActivitiyTimelineAddContainer.prototype.ngAfterViewInit=function(){this.handleOverflow()},ObjectActivitiyTimelineAddContainer.prototype.ngOnDestroy=function(){this.resizeListener()},ObjectActivitiyTimelineAddContainer.prototype.handleOverflow=function(){var s=this;this.moreModules=[],this.maintabs.forEach(function(e){e.element.nativeElement.classList.remove("slds-hide"),e.element.nativeElement.classList.add("slds-hidden")}),this.moretab.element.nativeElement.classList.add("slds-hidden"),this.moretab.element.nativeElement.classList.remove("slds-hide");var o=this.elementRef.nativeElement.getBoundingClientRect().width,l=this.moretab.element.nativeElement.getBoundingClientRect().width,a=!1,n=0;this.maintabs.forEach(function(e,t){var i=e.element.nativeElement.getBoundingClientRect().width;o-l<(n+=i)&&(a||t+1<s.maintabs.length||l<i)&&(e.element.nativeElement.classList.add("slds-hide"),s.moreModules.push(e.element.nativeElement.attributes.getNamedItem("data-module").value),a=!0),e.element.nativeElement.classList.remove("slds-hidden")}),a?(this.moretab.element.nativeElement.classList.remove("slds-hidden"),this.moretabs.forEach(function(e){0<=s.moreModules.indexOf(e.element.nativeElement.attributes.getNamedItem("data-module").value)?e.element.nativeElement.classList.remove("slds-hide"):e.element.nativeElement.classList.add("slds-hide")})):(this.moretab.element.nativeElement.classList.remove("slds-hidden"),this.moretab.element.nativeElement.classList.add("slds-hide"))},ObjectActivitiyTimelineAddContainer.prototype.setTab=function(e){this.currenttab=e},ObjectActivitiyTimelineAddContainer.prototype.checkTab=function(e){return this.currenttab==e},Object.defineProperty(ObjectActivitiyTimelineAddContainer.prototype,"moreactive",{get:function(){return 0<=this.moreModules.indexOf(this.currenttab)},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddContainer.prototype.tabClass=function(e){return this.currenttab==e.module?"slds-show":"slds-hide"},ObjectActivitiyTimelineAddContainer.prototype.toggleOpen=function(){this.moreOpen=!this.moreOpen},__decorate([core_1.ViewChildren("maintabs",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.QueryList)],ObjectActivitiyTimelineAddContainer.prototype,"maintabs",void 0),__decorate([core_1.ViewChildren("moretabs",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.QueryList)],ObjectActivitiyTimelineAddContainer.prototype,"moretabs",void 0),__decorate([core_1.ViewChild("moretab",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectActivitiyTimelineAddContainer.prototype,"moretab",void 0),ObjectActivitiyTimelineAddContainer=__decorate([core_1.Component({selector:"object-activitiytimeline-add-container",template:'<div *ngIf="tabs.length > 0; else notabs" class="slds-tabs--scoped"><ul class="slds-tabs--scoped__nav" role="tablist"><li #maintabs *ngFor="let tab of tabs" class="slds-tabs--scoped__item" [ngClass]="{\'slds-active\': checkTab(tab.module)}" role="presentation" [attr.data-module]="tab.module"><a class="slds-tabs--scoped__link" href="javascript:void(0);" role="tab" (click)="setTab(tab.module)">{{language.getModuleName(tab.module, true)}}</a></li><li #moretab class="slds-tabs_scoped__item slds-tabs_scoped__overflow-button slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': moreOpen, \'slds-active\': moreactive}" (click)="toggleOpen()" role="presentation"><a class="slds-tabs--scoped__link" href="javascript:void(0);" role="tab">{{language.getLabel(\'LBL_MORE\')}}<system-utility-icon class="slds-p-horizontal--xx-small" icon="down" size="x-small"></system-utility-icon></a><div class="slds-dropdown slds-dropdown_right"><ul class="slds-dropdown__list slds-dropdown_length-with-icon-10" role="menu"><li #moretabs *ngFor="let tab of tabs" class="slds-dropdown__item" role="presentation" [attr.data-module]="tab.module" (click)="setTab(tab.module)"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><system-utility-icon icon="check" size="x-small" class="slds-p-right--xx-small" [ngClass]="{\'slds-hidden\': !checkTab(tab.module)}"></system-utility-icon>{{language.getModuleName(tab.module, true)}}</span></a></li></ul></div></li></ul><div *ngFor="let tab of tabs" class="slds-tabs--scoped__content slds-p-around--none" [ngClass]="tabClass(tab)" role="tabpanel" [hidden]="!checkTab(tab.module)"><object-activitiytimeline-add-tabcontainer [tabcomponent]="tab.component" [componentconfig]="tab.componentconfig"></object-activitiytimeline-add-tabcontainer></div></div><ng-template #notabs><div class="slds-box slds-theme--shade slds-align--absolute-center">no actions configured</div></ng-template>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.activitiyTimeLineService,services_1.metadata,core_1.ElementRef,core_1.Renderer2])],ObjectActivitiyTimelineAddContainer)}();exports.ObjectActivitiyTimelineAddContainer=ObjectActivitiyTimelineAddContainer;var ObjectActivitiyTimelineAddItem=function(){function ObjectActivitiyTimelineAddItem(e,t,i,s,o,l,a,n){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.modal=l,this.dockedComposer=a,this.ViewContainerRef=n,this.componentconfig={},this.headerFieldSet="",this.bodyFieldSet="",this.isExpanded=!1}return ObjectActivitiyTimelineAddItem.prototype.ngOnInit=function(){var t=this;this.model.module=this.module,this.activitiyTimeLineService.parent.data$.subscribe(function(e){(e.id=t.model.data.parent_id)&&(t.model.data.parent_name=e.summary_text)}),this.view.isEditable=!0,this.view.setEditMode(),this.headerFieldSet=this.componentconfig.headerfieldset,this.bodyFieldSet=this.componentconfig.bodyfieldset},Object.defineProperty(ObjectActivitiyTimelineAddItem.prototype,"module",{get:function(){return this.componentconfig.module},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineAddItem.prototype,"actionset",{get:function(){return this.componentconfig.actionset},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddItem.prototype.initializeModule=function(){this.model.module=this.module,this.model.id=this.model.generateGuid(),this.model.initializeModel(this.activitiyTimeLineService.parent)},ObjectActivitiyTimelineAddItem.prototype.onHeaderClick=function(){this.isExpanded||(this.isExpanded=!0,this.initializeModule())},ObjectActivitiyTimelineAddItem.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)},ObjectActivitiyTimelineAddItem.prototype.dock=function(){this.dockedComposer.addComposer(this.model.module,this.model),this.isExpanded=!1},ObjectActivitiyTimelineAddItem.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddItem.prototype.handleaction=function(e){this.initializeModule(),this.isExpanded=!1},ObjectActivitiyTimelineAddItem=__decorate([core_1.Component({selector:"object-activitiytimeline-add-item",template:'<div><div (click)="onHeaderClick()"><object-record-fieldset [fieldset]="headerFieldSet"></object-record-fieldset></div><ng-container *ngIf="isExpanded"><object-record-fieldset [fieldset]="bodyFieldSet" [direction]="\'vertical\'"></object-record-fieldset><div class="slds-p-around--x-small slds-grid"><div class="slds-button-group" role="group"><button class="slds-button slds-button--neutral" (click)="cancel()" [title]="language.getLabel(\'LBL_CANCEL\')"><system-button-icon icon="close"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_CANCEL\')}}</span></button> <button class="slds-button slds-button--neutral" (click)="expand()" [title]="language.getLabel(\'LBL_EXPAND\')"><system-button-icon icon="expand"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_EXPAND\')}}</span></button> <button class="slds-button slds-button--neutral" (click)="dock()" [title]="language.getLabel(\'LBL_DOCK\')"><system-button-icon icon="dock_panel"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_DOCK\')}}</span></button></div><div class="slds-col--bump-left"><object-action-container [actionset]="actionset" (actionemitter)="handleaction($event)"></object-action-container></div></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.modal,services_1.dockedComposer,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddItem)}();exports.ObjectActivitiyTimelineAddItem=ObjectActivitiyTimelineAddItem;var ObjectActivitiyTimelineAddCall=function(){function ObjectActivitiyTimelineAddCall(e,t,i,s,o,l,a){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.modal=l,this.ViewContainerRef=a,this.formFields=[],this.formFieldSet="",this.isExpanded=!1}return Object.defineProperty(ObjectActivitiyTimelineAddCall.prototype,"firstFormField",{get:function(){return this.formFields.filter(function(e,t){return 0===t})},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineAddCall.prototype,"moreFormFields",{get:function(){return this.formFields.filter(function(e,t){return 0<t})},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddCall.prototype.ngOnInit=function(){var t=this;this.model.module="Calls",this.model.data.name="Call",this.activitiyTimeLineService.parent.data$.subscribe(function(e){(e.id=t.model.data.parent_id)&&(t.model.data.parent_name=e.summary_text)}),this.view.isEditable=!0,this.view.setEditMode();var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddCall",this.model.module);this.formFieldSet=e.fieldset},ObjectActivitiyTimelineAddCall.prototype.initializeCall=function(){this.model.module="Calls",this.model.id=this.model.generateGuid(),this.model.initializeModel(this.activitiyTimeLineService.parent),this.model.data.name="Call",this.model.data.date_start=new moment},ObjectActivitiyTimelineAddCall.prototype.onFocus=function(){this.isExpanded||(this.isExpanded=!0,this.initializeCall())},ObjectActivitiyTimelineAddCall.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)},ObjectActivitiyTimelineAddCall.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddCall.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.initializeCall(),t.isExpanded=!1})},ObjectActivitiyTimelineAddCall=__decorate([core_1.Component({selector:"object-activitiytimeline-add-call",template:'<div><div *ngFor="let field of firstFormField" class="slds-form-element"><div class="slds-grid slds-grid--align-spread"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><button *ngIf="isExpanded" class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'" [size]="\'xx-small\'"></system-button-icon></button></div><div class="slds-form-element__control"><div class="slds-truncate" title="{{field}}"><input class="slds-input slds-m-vertical--xx-small" type="text" (focus)="onFocus()" [(ngModel)]="model.data.name"></div></div></div><ng-container *ngIf="isExpanded"><object-record-fieldset [fieldset]="formFieldSet" [direction]="\'vertical\'"></object-record-fieldset><div class="slds-form-element"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand .slds-button-space-left slds-float--right" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.modal,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddCall)}();exports.ObjectActivitiyTimelineAddCall=ObjectActivitiyTimelineAddCall;var ObjectActivitiyTimelineAddMeeting=function(){function ObjectActivitiyTimelineAddMeeting(e,t,i,s,o,l,a){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.modal=l,this.ViewContainerRef=a,this.formFields=[],this.formFieldSet="",this.isExpanded=!1}return Object.defineProperty(ObjectActivitiyTimelineAddMeeting.prototype,"firstFormField",{get:function(){return this.formFields.filter(function(e,t){return 0===t})},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineAddMeeting.prototype,"moreFormFields",{get:function(){return this.formFields.filter(function(e,t){return 0<t})},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddMeeting.prototype.ngOnInit=function(){var t=this;this.model.module="Meetings",this.model.data.name="Meeting",this.activitiyTimeLineService.parent.data$.subscribe(function(e){(e.id=t.model.data.parent_id)&&(t.model.data.parent_name=e.summary_text)}),this.view.isEditable=!0,this.view.setEditMode();var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddMeeting",this.model.module);this.formFieldSet=e.fieldset,this.formFields=this.metadata.getFieldSetFields(e.fieldset)},ObjectActivitiyTimelineAddMeeting.prototype.initializeMeeting=function(){this.model.module="Meetings",this.model.id=this.model.generateGuid(),this.model.initializeModel(this.activitiyTimeLineService.parent),this.model.data.name="Meeting"},ObjectActivitiyTimelineAddMeeting.prototype.onFocus=function(){this.isExpanded||(this.isExpanded=!0,this.initializeMeeting())},ObjectActivitiyTimelineAddMeeting.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddMeeting.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.initializeMeeting(),t.isExpanded=!1})},ObjectActivitiyTimelineAddMeeting.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector).subscribe(function(e){})},ObjectActivitiyTimelineAddMeeting=__decorate([core_1.Component({selector:"object-activitiytimeline-add-meeting",template:'<div><div *ngFor="let field of firstFormField" class="slds-form-element"><div class="slds-grid slds-grid--align-spread"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><button *ngIf="isExpanded" class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'" [size]="\'xx-small\'"></system-button-icon></button></div><div class="slds-form-element__control"><div class="slds-truncate" title="{{field}}"><input class="slds-input slds-m-vertical--xx-small" type="text" (focus)="onFocus()" [(ngModel)]="model.data.name"></div></div></div><ng-container *ngIf="isExpanded"><object-record-fieldset [fieldset]="formFieldSet" [direction]="\'vertical\'"></object-record-fieldset><div class="slds-form-element"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand .slds-button-space-left slds-float--right" (click)="save()">Save</button></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.modal,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddMeeting)}();exports.ObjectActivitiyTimelineAddMeeting=ObjectActivitiyTimelineAddMeeting;var ObjectActivitiyTimelineAddTask=function(){function ObjectActivitiyTimelineAddTask(e,t,i,s,o,l,a){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.modal=l,this.ViewContainerRef=a,this.formFields=[],this.formFieldSet="",this.isExpanded=!1}return Object.defineProperty(ObjectActivitiyTimelineAddTask.prototype,"firstFormField",{get:function(){return this.formFields.filter(function(e,t){return 0===t})},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineAddTask.prototype,"moreFormFields",{get:function(){return this.formFields.filter(function(e,t){return 0<t})},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddTask.prototype.ngOnInit=function(){var t=this;this.model.module="Tasks",this.model.data.name="Task",this.activitiyTimeLineService.parent.data$.subscribe(function(e){(e.id=t.model.data.parent_id)&&(t.model.data.parent_name=e.summary_text)}),this.view.isEditable=!0,this.view.setEditMode();var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddTask",this.model.module);this.formFieldSet=e.fieldset,this.formFields=this.metadata.getFieldSetFields(e.fieldset)},ObjectActivitiyTimelineAddTask.prototype.initializeTask=function(){this.model.module="Tasks",this.model.id=this.model.generateGuid(),this.model.initializeModel(this.activitiyTimeLineService.parent),this.model.data.name="Task"},ObjectActivitiyTimelineAddTask.prototype.onFocus=function(){this.isExpanded||(this.isExpanded=!0,this.initializeTask())},ObjectActivitiyTimelineAddTask.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector).subscribe(function(e){})},ObjectActivitiyTimelineAddTask.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddTask.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.initializeTask(),t.isExpanded=!1})},ObjectActivitiyTimelineAddTask=__decorate([core_1.Component({selector:"object-activitiytimeline-add-task",template:'<div><div *ngFor="let field of firstFormField" class="slds-form-element"><div class="slds-grid slds-grid--align-spread"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><button *ngIf="isExpanded" class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'" [size]="\'xx-small\'"></system-button-icon></button></div><div class="slds-form-element__control"><div class="slds-truncate" title="{{field}}"><input class="slds-input slds-m-vertical--xx-small" type="text" (focus)="onFocus()" [(ngModel)]="model.data.name"></div></div></div><ng-container *ngIf="isExpanded"><object-record-fieldset [fieldset]="formFieldSet" [direction]="\'vertical\'"></object-record-fieldset><div class="slds-form-element"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand .slds-button-space-left slds-float--right" (click)="save()">Save</button></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.modal,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddTask)}();exports.ObjectActivitiyTimelineAddTask=ObjectActivitiyTimelineAddTask;var ObjectActivitiyTimelineAddEmail=function(){function ObjectActivitiyTimelineAddEmail(e,t,i,s,o,l,a,n,d){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.session=l,this.backend=a,this.modal=n,this.ViewContainerRef=d,this.fromEmails=[],this.formFields=[],this.fromInbox="",this.formFieldSet="",this.isExpanded=!1,this.isInitialized=!1}return Object.defineProperty(ObjectActivitiyTimelineAddEmail.prototype,"firstFormField",{get:function(){return this.formFields.filter(function(e,t){return 0===t})},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddEmail.prototype.ngOnInit=function(){this.initializeEmail(),this.subscribeParent(),this.setEditMode(),this.getFields()},ObjectActivitiyTimelineAddEmail.prototype.initializeEmail=function(){this.isInitialized=!0,this.model.module="Emails",this.model.id=this.model.generateGuid(),this.model.initializeModel(),this.model.data.parent_type=this.activitiyTimeLineService.parent.module,this.model.data.parent_id=this.activitiyTimeLineService.parent.id,this.model.data.parent_name=this.activitiyTimeLineService.parent.data.summary_text,this.model.data.type="out",this.model.data.status="created",this.model.data.recipient_addresses=[],this.model.data.from_addr_name=this.session.authData.email},ObjectActivitiyTimelineAddEmail.prototype.subscribeParent=function(){var t=this;this.activitiyTimeLineService.parent.data$.subscribe(function(e){0==t.model.data.recipient_addresses.length&&t.determineToAddr(),e.id==t.model.data.parent_id&&(t.model.data.parent_name=e.summary_text)})},ObjectActivitiyTimelineAddEmail.prototype.setEditMode=function(){this.view.isEditable=!0,this.view.setEditMode()},ObjectActivitiyTimelineAddEmail.prototype.getFields=function(){var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddEmail",this.model.module);this.formFieldSet=e.fieldset,this.formFields=this.metadata.getFieldSetFields(e.fieldset)},ObjectActivitiyTimelineAddEmail.prototype.onFocus=function(){var o=this;this.isInitialized||(this.determineToAddr(),this.backend.getRequest("EmailManager/outbound").subscribe(function(e){if(0<e.length){for(var t=0,i=e;t<i.length;t++){var s=i[t];o.fromEmails.push(s)}o.fromInbox=e[0].id}})),this.isExpanded=!0},ObjectActivitiyTimelineAddEmail.prototype.determineToAddr=function(){this.activitiyTimeLineService.parent.data.email1&&(this.model.data.recipient_addresses=[{parent_type:this.activitiyTimeLineService.parent.module,parent_id:this.activitiyTimeLineService.parent.id,email_address:this.activitiyTimeLineService.parent.data.email1,id:this.model.generateGuid(),address_type:"to"}])},ObjectActivitiyTimelineAddEmail.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddEmail.prototype.send=function(){this.model.data.to_be_sent=!0,this.save()},ObjectActivitiyTimelineAddEmail.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.isExpanded=!1,t.model.data.to_be_sent=!1,t.initializeEmail(),t.determineToAddr()})},ObjectActivitiyTimelineAddEmail.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector)},ObjectActivitiyTimelineAddEmail=__decorate([core_1.Component({selector:"object-activitiytimeline-add-email",template:'<div class="slds-p-around--x-small"><div class="slds-form-element" (click)="onFocus()"><field-label [fieldname]="\'name\'" [fieldconfig]="{required:true}"></field-label><field-container field="name"></field-container></div><ng-container *ngIf="isExpanded"><div class="slds-form-element"><div class="slds-form-element"><field-label [fieldname]="\'mailbox_id\'"></field-label><field-container [field]="\'mailbox_id\'" [fieldconfig]="{scope: \'outboundsingle\'}"></field-container></div></div><div class="slds-form-element"><field-label [fieldname]="\'to_addrs_names\'"></field-label><field-container field="to_addrs_names" [fieldconfig]="{fieldtype:\'emailrecipients\', addresstype: \'to\'}"></field-container></div><div class="slds-form-element"><field-label [fieldname]="\'cc_addrs_names\'"></field-label><field-container field="cc_addrs_names" [fieldconfig]="{fieldtype:\'emailrecipients\', addresstype: \'cc\'}"></field-container></div><div class="slds-form-element"><div class="slds-form-element"><field-label fieldname="emailtemplate_id"></field-label><field-container field="emailtemplate_id" [fieldconfig]="{fieldtype:\'emailtemplate\'}"></field-container></div></div><div class="slds-form-element"><field-label [fieldname]="\'body\'"></field-label><div class="slds-form-element__control"><field-html [fieldname]="\'body\'"></field-html></div></div><div class="slds-form-element"><field-label [fieldname]="\'parent_name\'"></field-label><field-container [field]="\'parent_name\'"></field-container></div><object-relatedlist-files></object-relatedlist-files><div class="slds-form-element"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand .slds-button-space-left slds-float--right" (click)="send()">{{language.getLabel(\'LBL_SEND\')}}</button></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.session,services_1.backend,services_1.modal,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddEmail)}();exports.ObjectActivitiyTimelineAddEmail=ObjectActivitiyTimelineAddEmail;var ObjectActivitiyTimelineAddNote=function(){function ObjectActivitiyTimelineAddNote(e,t,i,s,o,l,a){this.metadata=e,this.activitiyTimeLineService=t,this.model=i,this.view=s,this.language=o,this.modal=l,this.ViewContainerRef=a,this.formFields=[],this.formFieldSet="",this.isExpanded=!1}return Object.defineProperty(ObjectActivitiyTimelineAddNote.prototype,"firstFormField",{get:function(){return this.formFields.filter(function(e,t){return 0===t})},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActivitiyTimelineAddNote.prototype,"moreFormFields",{get:function(){return this.formFields.filter(function(e,t){return 0<t})},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineAddNote.prototype.ngOnInit=function(){var t=this;this.model.module="Notes",this.model.data.name="Note",this.activitiyTimeLineService.parent.data$.subscribe(function(e){(e.id=t.model.data.parent_id)&&(t.model.data.parent_name=e.summary_text)}),this.view.isEditable=!0,this.view.setEditMode();var e=this.metadata.getComponentConfig("ObjectActivitiyTimelineAddNote",this.model.module);this.formFieldSet=e.fieldset,this.formFields=this.metadata.getFieldSetFields(e.fieldset)},ObjectActivitiyTimelineAddNote.prototype.initializeMeeting=function(){this.model.module="Notes",this.model.id=this.model.generateGuid(),this.model.initializeModel(this.activitiyTimeLineService.parent),this.model.data.name="Note"},ObjectActivitiyTimelineAddNote.prototype.onFocus=function(){this.isExpanded||(this.isExpanded=!0,this.initializeMeeting())},ObjectActivitiyTimelineAddNote.prototype.cancel=function(){this.isExpanded=!1},ObjectActivitiyTimelineAddNote.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.initializeMeeting(),t.isExpanded=!1})},ObjectActivitiyTimelineAddNote.prototype.expand=function(){this.modal.openModal("GlobalDockedComposerModal",!0,this.ViewContainerRef.injector).subscribe(function(e){})},ObjectActivitiyTimelineAddNote=__decorate([core_1.Component({selector:"object-activitiytimeline-add-note",template:'<div><div *ngFor="let field of firstFormField" class="slds-form-element"><div class="slds-grid slds-grid--align-spread"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><button *ngIf="isExpanded" class="slds-button slds-button_icon slds-button_icon" (click)="expand()"><system-button-icon [icon]="\'expand_alt\'" [size]="\'xx-small\'"></system-button-icon></button></div><div class="slds-form-element__control"><div class="slds-truncate" title="{{field}}"><input class="slds-input slds-m-vertical--xx-small" type="text" (focus)="onFocus()" [(ngModel)]="model.data.name"></div></div></div><ng-container *ngIf="isExpanded"><object-record-fieldset [fieldset]="formFieldSet" [direction]="\'vertical\'"></object-record-fieldset><div class="slds-form-element"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand .slds-button-space-left slds-float--right" (click)="save()">Save</button></div></ng-container></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.activitiyTimeLineService,services_1.model,services_1.view,services_1.language,services_1.modal,core_1.ViewContainerRef])],ObjectActivitiyTimelineAddNote)}();exports.ObjectActivitiyTimelineAddNote=ObjectActivitiyTimelineAddNote;var ObjectActivitiyTimelineSummary=function(){function e(e,t,i,s){this.metadata=e,this.model=t,this.language=i,this.activitiyTimeLineService=s,this.showSummary=!1,this.componentRefs=[]}return Object.defineProperty(e.prototype,"activities",{get:function(){return this.activitiyTimeLineService.activities.History.list},enumerable:!0,configurable:!0}),e.prototype.displaySummary=function(){this.showSummary=!0,this.activitiyTimeLineService.activities.History.list.length<25&&this.activitiyTimeLineService.canLoadMore("History")&&this.activitiyTimeLineService.getMoreTimeLineData("History",20)},e.prototype.onScroll=function(e){var t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.activitiyTimeLineService.canLoadMore("History")&&this.activitiyTimeLineService.getMoreTimeLineData("History",20)},e.prototype.hideSummary=function(){this.showSummary=!1},e.prototype.getDate=function(e){var t="date_start";switch(e.module){case"Tasks":t="date_due";break;case"Emails":case"Notes":t="date_entered"}return new moment(Date.parse(e.data[t])).format("DD.MM.YYYY")},e.prototype.setActivitiy=function(e){var i=this;this.model.module=e.module,this.model.id=e.id,this.model.data=e.data;for(var t=0,s=this.componentRefs;t<s.length;t++){s[t].destroy()}var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineSummary",e.module);if(o&&o.componentsets)for(var l=0,a=o.componentsets;l<a.length;l++)for(var n=a[l],d=function(t){r.metadata.addComponent(t.component,r.detailContainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},r=this,c=0,m=this.metadata.getComponentSetObjects(n);c<m.length;c++){d(m[c])}},__decorate([core_1.ViewChild("listContainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"listContainer",void 0),__decorate([core_1.ViewChild("detailContainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"detailContainer",void 0),e=__decorate([core_1.Component({selector:"object-activitiytimeline-summary",template:'<button class="slds-button slds-button--neutral showMoreButton" type="button" (click)="displaySummary()">{{language.getLabel(\'LBL_SUMMARY\')}}</button><ng-container *ngIf="showSummary"><div role="dialog" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header"><button class="slds-button slds-modal__close slds-button--icon-inverse" (click)="hideSummary()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading--medium">{{language.getLabel(\'LBL_PAST_ACTIVITIES\')}} {{language.getLabel(\'LBL_SUMMARY\')}}</h2></div><div style="height: 70vh" class="slds-modal__content"><div class="slds-grid" style="height: 100%"><div #listContainer class="slds-size--1-of-3 slds-border--right slds-p-around--x-small slds-scrollable" style="height: 100%" (scroll)="onScroll($event)"><ul class="slds-timeline"><ng-container *ngFor="let activity of activities"><li [ngSwitch]="activity.module" (click)="setActivitiy(activity)" [ngClass]="{\'slds-border--top slds-border--bottom\' : activity.id == model.id}"><object-activitiytimeline-item-container [activity]="activity"></object-activitiytimeline-item-container></li></ng-container></ul><system-spinner class="slds-p-around--small" *ngIf="activitiyTimeLineService.activities.History.loading"></system-spinner></div><div class="slds-size--2-of-3" style="height: 100%; overflow: auto"><div *ngIf="model.module" class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><object-icon [module]="model.module"></object-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset">{{language.getModuleName(model.module)}}</p><div><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">{{model.data.name}}</h1></div></div></div></div></div></div><div class="slds-p-around--medium"><div #detailContainer></div></div></div></div></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="hideSummary()">{{language.getLabel(\'LBL_CLOSE\')}}</button></div></div></div><div class="slds-backdrop slds-backdrop--open"></div></ng-container>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.language,services_1.activitiyTimeLineService])],e)}();exports.ObjectActivitiyTimelineSummary=ObjectActivitiyTimelineSummary;var ObjectActivitiyTimelineSummaryButton=function(){function e(e,t,i,s){this.metadata=e,this.model=t,this.language=i,this.modal=s}return e.prototype.displaySummary=function(){var t=this;this.modal.openModal("ObjectActivitiyTimelineSummaryModal").subscribe(function(e){e.instance.parent=t.model})},e=__decorate([core_1.Component({selector:"object-activitiytimeline-summary-button",template:'<button class="slds-button slds-button--neutral slds-is-absolute" style="right:.5rem; top:-3px;" type="button" (click)="displaySummary()">{{language.getLabel(\'LBL_SUMMARY\')}}</button>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.language,services_1.modal])],e)}();exports.ObjectActivitiyTimelineSummaryButton=ObjectActivitiyTimelineSummaryButton;var ObjectActivitiyTimelineSummaryModal=function(){function ObjectActivitiyTimelineSummaryModal(e,t,i,s){this.metadata=e,this.model=t,this.language=i,this.activitiyTimeLineService=s,this.parent={},this.self={},this.componentRefs=[]}return Object.defineProperty(ObjectActivitiyTimelineSummaryModal.prototype,"activities",{get:function(){return this.activitiyTimeLineService.activities.History.list},enumerable:!0,configurable:!0}),ObjectActivitiyTimelineSummaryModal.prototype.ngOnInit=function(){this.activitiyTimeLineService.parent=this.parent,this.activitiyTimeLineService.defaultLimit=25,this.activitiyTimeLineService.modules=["History"],this.activitiyTimeLineService.reload()},ObjectActivitiyTimelineSummaryModal.prototype.onScroll=function(e){var t=this.listContainer.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.activitiyTimeLineService.canLoadMore("History")&&this.activitiyTimeLineService.getMoreTimeLineData("History",20)},ObjectActivitiyTimelineSummaryModal.prototype.hideSummary=function(){this.self.destroy()},ObjectActivitiyTimelineSummaryModal.prototype.getDate=function(e){var t="date_start";switch(e.module){case"Tasks":t="date_due";break;case"Emails":case"Notes":t="date_entered"}return new moment(Date.parse(e.data[t])).format("DD.MM.YYYY")},ObjectActivitiyTimelineSummaryModal.prototype.setActivitiy=function(e){var i=this;this.model.module=e.module,this.model.id=e.id,this.model.data=e.data;for(var t=0,s=this.componentRefs;t<s.length;t++){s[t].destroy()}var o=this.metadata.getComponentConfig("ObjectActivitiyTimelineSummary",e.module);if(o&&o.componentsets)for(var l=0,a=o.componentsets;l<a.length;l++)for(var n=a[l],d=function(t){r.metadata.addComponent(t.component,r.detailContainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},r=this,c=0,m=this.metadata.getComponentSetObjects(n);c<m.length;c++){d(m[c])}},__decorate([core_1.ViewChild("listContainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectActivitiyTimelineSummaryModal.prototype,"listContainer",void 0),__decorate([core_1.ViewChild("detailContainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectActivitiyTimelineSummaryModal.prototype,"detailContainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActivitiyTimelineSummaryModal.prototype,"parent",void 0),ObjectActivitiyTimelineSummaryModal=__decorate([core_1.Component({template:'<div role="dialog" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header"><button class="slds-button slds-modal__close slds-button--icon-inverse" (click)="hideSummary()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading--medium">{{language.getLabel(\'LBL_PAST_ACTIVITIES\')}} {{language.getLabel(\'LBL_SUMMARY\')}}</h2></div><div style="height: 70vh" class="slds-modal__content"><div class="slds-grid" style="height: 100%"><div #listContainer class="slds-size--1-of-3 slds-border--right slds-p-around--x-small slds-scrollable" style="height: 100%" (scroll)="onScroll($event)"><div class="slds-border--bottom slds-p-vertical--small slds-grid"><object-activitiy-timeline-filter class="slds-col--bump-left slds-p-horizontal--xxx-small"></object-activitiy-timeline-filter></div><ul class="slds-timeline"><li *ngFor="let activity of activities" (click)="setActivitiy(activity)" [ngClass]="{\'slds-border--top slds-border--bottom\' : activity.id == model.id}"><object-activitiytimeline-item-container [activity]="activity"></object-activitiytimeline-item-container></li></ul><system-spinner class="slds-p-around--small" *ngIf="activitiyTimeLineService.activities.History.loading"></system-spinner></div><div class="slds-size--2-of-3" style="height: 100%; overflow: auto"><div *ngIf="model.module" class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><object-icon [module]="model.module"></object-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset">{{language.getModuleName(model.module)}}</p><div><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">{{model.data.name}}</h1></div></div></div></div></div></div><div class="slds-p-around--medium"><div #detailContainer></div></div></div></div></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="hideSummary()">{{language.getLabel(\'LBL_CLOSE\')}}</button></div></div></div>',providers:[services_1.activitiyTimeLineService,services_1.model]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.language,services_1.activitiyTimeLineService])],ObjectActivitiyTimelineSummaryModal)}();exports.ObjectActivitiyTimelineSummaryModal=ObjectActivitiyTimelineSummaryModal;var ObjectRecordDetails=function(){function ObjectRecordDetails(e,t,i,s,o,l){this.view=e,this.metadata=t,this.componentFactoryResolver=i,this.model=s,this.language=o,this.renderer=l,this.componentSet="",this.componentconfig={},this.view.isEditable=!0}return ObjectRecordDetails.prototype.ngOnInit=function(){this.componentconfig.readonly&&(this.view.isEditable=!1),this.buildContainer()},ObjectRecordDetails.prototype.buildContainer=function(){if(this.componentconfig.componentset)this.componentSet=this.componentconfig.componentset;else{var e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}},ObjectRecordDetails.prototype.cancel=function(){this.model.cancelEdit(),this.view.setViewMode()},ObjectRecordDetails.prototype.save=function(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())},ObjectRecordDetails.prototype.getBoxStyle=function(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)","border-radius":".25rem"}:this.componentconfig.displayborder?{border:"1px solid #dddbda","border-radius":".25rem"}:void 0},Object.defineProperty(ObjectRecordDetails.prototype,"showHeader",{get:function(){return!!this.componentconfig.header},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRecordDetails.prototype,"header",{get:function(){return this.language.getLabel(this.componentconfig.header,this.model.module)},enumerable:!0,configurable:!0}),ObjectRecordDetails=__decorate([core_1.Component({selector:"object-record-details",template:'<h3 *ngIf="showHeader" class="slds-text-heading_small slds-theme_shade slds-p-around--x-small">{{header}}</h3><div class="slds-m-vertical--small slds-is-relative" [ngStyle]="getBoxStyle()" viewprovider><system-componentset [componentset]="componentSet"></system-componentset><div class="slds-text-align--center slds-p-bottom--small" *ngIf="view.isEditMode()"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand slds-button-space-left" (click)="save()">{{language.getLabel(\'LBL_SAVE\')}}</button></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,core_1.ComponentFactoryResolver,services_1.model,services_1.language,core_1.Renderer2])],ObjectRecordDetails)}();exports.ObjectRecordDetails=ObjectRecordDetails;var ObjectRecordDetailsTab=function(){function ObjectRecordDetailsTab(e,t,i,s){this.activatedRoute=e,this.metadata=t,this.model=i,this.language=s,this.componentconfig={},this.expanded=!0}return ObjectRecordDetailsTab.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1)},Object.defineProperty(ObjectRecordDetailsTab.prototype,"fieldSet",{get:function(){try{return this.componentconfig.fieldset}catch(e){return""}},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRecordDetailsTab.prototype,"showTitle",{get:function(){try{return!this.componentconfig.hidelabel}catch(e){return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectRecordDetailsTab.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!0,configurable:!0}),ObjectRecordDetailsTab.prototype.getFieldsets=function(){return this.metadata.getFieldSetFields(this.componentconfig.fieldset)},ObjectRecordDetailsTab.prototype.togglePanel=function(){this.expanded=!this.expanded},ObjectRecordDetailsTab.prototype.getChevronStyle=function(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}},ObjectRecordDetailsTab.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},ObjectRecordDetailsTab.prototype.getContainerStyle=function(){return{}},ObjectRecordDetailsTab=__decorate([core_1.Component({selector:"object-record-details-tab",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded, \'slds-hide\': hidden}"><h3 *ngIf="showTitle" class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate" title="Section Title">{{language.getModuleLabel(model.module, componentconfig.name)}}</span></button></h3><div [ngStyle]="getContainerStyle()"><div [ngStyle]="getTabStyle()"><object-record-fieldset [fieldset]="fieldSet" [direction]="\'vertical\'"></object-record-fieldset></div></div></div>'}),__metadata("design:paramtypes",[router_1.ActivatedRoute,services_1.metadata,services_1.model,services_1.language])],ObjectRecordDetailsTab)}();exports.ObjectRecordDetailsTab=ObjectRecordDetailsTab;var ObjectRecordAdministrationTab=function(){function ObjectRecordAdministrationTab(e,t,i,s){this.activatedRoute=e,this.metadata=t,this.model=i,this.language=s,this.componentconfig={},this.expanded=!0,this.territorymanaged=!1,this.fields={spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},assigned_user_name:{field:"assigned_user_name",fieldconfig:{}},created_by_name:{field:"created_by_name",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_name:{field:"modified_by_name",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}}}return ObjectRecordAdministrationTab.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1),this.metadata.getModuleFields(this.model.module).spiceacl_primary_territory&&(this.territorymanaged=!0)},Object.defineProperty(ObjectRecordAdministrationTab.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!0,configurable:!0}),ObjectRecordAdministrationTab=__decorate([core_1.Component({selector:"object-record-details-tab",template:'<system-collapsable-tab [title]="componentconfig.name" [expanded]="expanded"><div *ngIf="territorymanaged" class="slds-grid slds-wrap"><div class="slds-size--1-of-1 slds-medium-size--1-of-2"><object-record-fieldset-field [fieldsetitem]="fields.spiceacl_primary_territory"></object-record-fieldset-field></div><div class="slds-size--1-of-1 slds-medium-size--1-of-2"><object-record-fieldset-field [fieldsetitem]="fields.spiceacl_territories_hash"></object-record-fieldset-field></div></div><div class="slds-grid slds-wrap"><div class="slds-size--1-of-1 slds-medium-size--1-of-2"><object-record-fieldset-field [fieldsetitem]="fields.assigned_user_name"></object-record-fieldset-field></div><div class="slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-4"><object-record-fieldset-field [fieldsetitem]="fields.created_by_name"></object-record-fieldset-field></div><div class="slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-4"><object-record-fieldset-field [fieldsetitem]="fields.modified_by_name"></object-record-fieldset-field></div></div></system-collapsable-tab>'}),__metadata("design:paramtypes",[router_1.ActivatedRoute,services_1.metadata,services_1.model,services_1.language])],ObjectRecordAdministrationTab)}();exports.ObjectRecordAdministrationTab=ObjectRecordAdministrationTab;var ObjectRecordDetailsTabRow=function(){function e(e,t,i,s){this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=i,this.model=s,this.initialized=!1,this.componentconfig={},this.componentRefs=[],this.rowFields=[],this.fieldset=""}return e.prototype.ngOnInit=function(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)},e.prototype.getFieldSizeClass=function(){return"slds-size--1-of-"+this.rowFields.length},e.prototype.getFieldWidth=function(){return{width:Math.round(1/this.rowFields.length*100)+"%"}},e.prototype.showLabel=function(e){return!0!==e.hidelabel},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-record-details-tab-row",template:'<div class="slds-p-around--x-small" *ngFor="let field of rowFields" [ngClass]="getFieldSizeClass()"><field-label *ngIf="showLabel(field.fieldconfig) && field.field !== \'blank\'" [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-has-divider--bottom slds-p-vertical--x-small spicecrm-fieldminheight\'"></field-container></div>'}),__metadata("design:paramtypes",[router_1.ActivatedRoute,services_1.metadata,core_1.ComponentFactoryResolver,services_1.model])],e)}();exports.ObjectRecordDetailsTabRow=ObjectRecordDetailsTabRow;var ObjectRecordDetailsTabRowField=function(){function e(){this.field={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"object-record-details-tab-row-field",template:'<field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-text-body--regular slds-truncate slds-m-vertical--x-small\'"></field-container>'}),__metadata("design:paramtypes",[])],e)}();exports.ObjectRecordDetailsTabRowField=ObjectRecordDetailsTabRowField;var ObjectRecordTabbedDetails=function(){function ObjectRecordTabbedDetails(e,t,i,s,o){this.view=e,this.metadata=t,this.componentFactoryResolver=i,this.model=s,this.language=o,this.componentconfig={},this.activeTab=0,this.activatedTabs=[0],this.componentTabs=[],this.view.isEditable=!0}return Object.defineProperty(ObjectRecordTabbedDetails.prototype,"tabs",{get:function(){return this.componentTabs?this.componentTabs:[]},enumerable:!0,configurable:!0}),ObjectRecordTabbedDetails.prototype.ngOnInit=function(){if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{var e=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=e.tabs}},ObjectRecordTabbedDetails.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectRecordTabbedDetails.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)},ObjectRecordTabbedDetails.prototype.showTab=function(e){return e===this.activeTab},ObjectRecordTabbedDetails.prototype.getDisplay=function(e){if(e!==this.activeTab)return{display:"none"}},ObjectRecordTabbedDetails.prototype.cancel=function(){this.model.cancelEdit(),this.view.setViewMode()},ObjectRecordTabbedDetails.prototype.save=function(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())},ObjectRecordTabbedDetails.prototype.showErrorsOnTab=function(e,t){this.componentTabs[e].hasErrors=t},ObjectRecordTabbedDetails=__decorate([core_1.Component({selector:"object-record-tabbed-details",template:'<div class="slds-tabs--scoped slds-p-bottom--small"><ul class="slds-tabs--scoped__nav" role="tablist"><li *ngFor="let tab of tabs; let tabindex = index" class="slds-tabs--scoped__item slds-text-title--caps slds-active" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--scoped__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-badge" *ngIf="tab.hasErrors" title="Invalid fields!">{{tab.hasErrors}}</span> {{language.getLabel(tab.name, model.module)}}</a></li></ul><ng-container *ngFor="let tab of tabs; let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" class="slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none" [ngClass]="{\'slds-active\': showTab(tabindex)}" role="tabpanel" [hidden]="!showTab(tabindex)"><object-tab-container-item *ngIf="tab.componentset" (taberrors)="showErrorsOnTab(tabindex,$event)" [componentset]="tab.componentset"></object-tab-container-item></div></ng-container></div>',styles:[".slds-badge { font-weight: bold; background-color: #c00; color: #fff; padding: .125rem .4rem; }"]}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,core_1.ComponentFactoryResolver,services_1.model,services_1.language])],ObjectRecordTabbedDetails)}();exports.ObjectRecordTabbedDetails=ObjectRecordTabbedDetails;var ObjectRecordTabbedDetailsTab=function(){function e(e,t,i,s,o){this.view=e,this.metadata=t,this.componentFactoryResolver=i,this.model=s,this.language=o,this.componentset="",this.componentRefs=[]}return e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.buildContainer=function(){for(var i=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var s=function(t){o.metadata.addComponent(t.component,o.panelcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,i.componentRefs.push(e)})},o=this,l=0,a=this.metadata.getComponentSetObjects(this.componentset);l<a.length;l++){s(a[l])}},__decorate([core_1.ViewChild("panelcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"panelcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"componentset",void 0),e=__decorate([core_1.Component({selector:"object-record-tabbed-details-tab",template:"<div #panelcontainer></div>"}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,core_1.ComponentFactoryResolver,services_1.model,services_1.language])],e)}();exports.ObjectRecordTabbedDetailsTab=ObjectRecordTabbedDetailsTab;var ObjectModalModuleLookup=function(){function ObjectModalModuleLookup(e,t,i,s){this.language=e,this.model=t,this.modellist=i,this.metadata=s,this.displayFields=[],this.listFields=[],this.allSelected=!1,this.searchTerm="",this.searchTermOld="",this.searchTimeOut=void 0,this.self={},this.multiselect=!1,this.module="",this.modulefilter="",this.selectedItems=new core_1.EventEmitter,this.usedSearchTerm=new core_1.EventEmitter}return Object.defineProperty(ObjectModalModuleLookup.prototype,"checkbox",{get:function(){return this.allSelected},set:function(e){(this.allSelected=e)?this.modellist.setAllSelected():this.modellist.setAllUnselected()},enumerable:!0,configurable:!0}),ObjectModalModuleLookup.prototype.contentStyle=function(){var e=this.tablecontent.element.nativeElement.getBoundingClientRect(),t=this.modalcontent.element.nativeElement.getBoundingClientRect();return{height:t.height-(e.top-t.top)}},ObjectModalModuleLookup.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectList",this.module);this.displayFields=this.metadata.getFieldSetFields(e.fieldset),this.model.module=this.module,this.modellist.setModule(this.module),this.modellist.modulefilter=this.modulefilter;for(var t=0,i=this.displayFields;t<i.length;t++){var s=i[t];this.listFields.push(s.field)}this.modellist.getListData(this.listFields),""!=this.searchTerm&&this.doSearch()},ObjectModalModuleLookup.prototype.doSearch=function(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData(this.listFields)},ObjectModalModuleLookup.prototype.triggerSearch=function(e){var t=this;if(this.searchTerm!==this.searchTermOld)switch(e.key){case"Enter":0<this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.doSearch()},1e3)}},ObjectModalModuleLookup.prototype.onScroll=function(e){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()},ObjectModalModuleLookup.prototype.closePopup=function(){this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()},ObjectModalModuleLookup.prototype.getSelectedCount=function(){return this.modellist.getSelectedCount()},ObjectModalModuleLookup.prototype.selectItems=function(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()},ObjectModalModuleLookup.prototype.clickRow=function(e,t){this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()},ObjectModalModuleLookup.prototype.onModalEscX=function(){this.closePopup()},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModalModuleLookup.prototype,"tablecontent",void 0),__decorate([core_1.ViewChild("modalcontent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModalModuleLookup.prototype,"modalcontent",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ObjectModalModuleLookup.prototype,"selectedItems",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ObjectModalModuleLookup.prototype,"usedSearchTerm",void 0),ObjectModalModuleLookup=__decorate([core_1.Component({selector:"object-modal-module-lookup",template:'<system-modal size="large"><system-modal-header (close)="closePopup()">{{language.getLabel(\'LBL_SEARCH\')}}: {{language.getModuleName(model.module, true)}}</system-modal-header><system-modal-content #modalcontent margin="none"><div class="slds-lookup" data-select="multi" data-scope="single" data-typeahead="true"><div class="slds-form-element slds-p-top--medium slds-p-horizontal--medium slds-m-bottom--small"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right"><system-utility-icon [icon]="\'search\'" [size]="\'x-small\'" [addclasses]="\'slds-input__icon\'"></system-utility-icon><input type="text" id="lookup" class="slds-input" [(ngModel)]="searchTerm" (keyup)="triggerSearch($event)" [placeholder]="language.getModuleName(model.module)"></div></div><div class="slds-theme--shade slds-p-around--x-small slds-border--top">{{modellist.listData.totalcount}} Results, sorted by {{language.getFieldDisplayName(modellist.module, modellist.sortfield)}}, selected {{modellist.getSelectedCount()}}</div><div style="height:75vh; overflow-y: auto;" #tablecontent (scroll)="onScroll($event)" [ngStyle]="contentStyle()"><table class="slds-table slds-table--bordered slds-table--cell-buffer" [ngClass]="{\'slds-no-row-hover\':multiselect,\'singleselect\':!multiselect}" role="listbox"><thead><tr><th *ngIf="multiselect" class="slds-cell-shrink" scope="col"><label class="slds-checkbox"><input type="checkbox" name="options" [(ngModel)]="checkbox"> <span class="slds-checkbox--faux"></span> <span class="slds-assistive-text">Select All</span></label></th><th *ngFor="let displayField of displayFields" scope="col"><div class="slds-truncate" title="Account Name"><field-label [fieldname]="displayField.field"></field-label></div></th></tr></thead><tbody><ng-container *ngIf="!multiselect"><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="displayFields" [listItem]="listItem" [showActionMenu]="false" [rowselect]="multiselect" [displaylinks]="false" class="slds-hint-parent" (click)="clickRow($event, listItem)"></tr></ng-container><ng-container *ngIf="multiselect"><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="displayFields" [listItem]="listItem" [showActionMenu]="false" [rowselect]="multiselect" [displaylinks]="false" class="slds-hint-parent"></tr></ng-container></tbody></table><system-spinner *ngIf="modellist.isLoading"></system-spinner></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closePopup($event)">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button *ngIf="multiselect" class="slds-button slds-button--brand" [disabled]="getSelectedCount() == 0" (click)="selectItems()">{{language.getLabel(\'LBL_SELECT\')}}</button></system-modal-footer></system-modal>',providers:[services_1.view,services_1.model,services_1.modellist],styles:["::ng-deep table.singleselect tr:hover td { cursor: pointer; }","::ng-deep field-generic-display > div { padding-left: 0 ! padding-right: 0 ! }"]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.modellist,services_1.metadata])],ObjectModalModuleLookup)}();exports.ObjectModalModuleLookup=ObjectModalModuleLookup;var ObjectSelectButton=function(){function e(e,t,i){this.metadata=e,this.popup=t,this.model=i,this.module="",this.displaymodulename=!0,this.selectedItems=new core_1.EventEmitter,this.displayModal=!1,this.popupSubscribe=void 0}return e.prototype.ngOnInit=function(){this.model.module=this.module},e.prototype.getModuleSingular=function(){return this.displaymodulename?this.metadata.getModuleSingular(this.module):""},e.prototype.openModal=function(){var e=this;this.displayModal=!0,this.popupSubscribe=this.popup.closePopup$.subscribe(function(){e.displayModal=!1,e.popupSubscribe.unsubscribe()})},e.prototype.emitSelectedItems=function(e){this.selectedItems.emit(e)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displaymodulename",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selectedItems",void 0),e=__decorate([core_1.Component({selector:"object-select-button",template:'<button class="slds-button slds-button--neutral" (click)="openModal()">Select</button><object-modal-module-lookup *ngIf="displayModal" (selectedItems)="emitSelectedItems($event)"></object-modal-module-lookup>',providers:[services_1.model,services_1.popup]}),__metadata("design:paramtypes",[services_1.metadata,services_1.popup,services_1.model])],e)}();exports.ObjectSelectButton=ObjectSelectButton;var ObjectImport=function(){function e(e,t,i,s,o,l,a,n,d,r){this.objectimport=e,this.language=t,this.metadata=i,this.model=s,this.navigation=o,this.router=l,this.backend=a,this.toast=n,this.cdRef=d,this.activatedRoute=r,this.currentImportStep=0,this.importSteps=["select","map","fixed","check","result"],this.importStepsText=["LBL_SELECT_UPLOAD_FILE","LBL_MAP_FIELDS","LBL_ADD_FIXED_FIELDS","LBL_DUPLICATE_CHECK","LBL_RESULTS"],this.importAction="new",this.processing=!1,this.modelFields=void 0,this.requiredModelFields=void 0,this.stepText="",this.model.module=this.activatedRoute.params.value.module,this.metadata.checkModuleAcl(this.model.module,"import")||(this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_IMPORT")+" "+this.language.getModuleName(this.model.module),"error"),this.router.navigate(["/module/"+this.model.module])),this.getModuleFields()}return Object.defineProperty(e.prototype,"templateName",{get:function(){return this.templatename},set:function(e){this.templatename=e},enumerable:!0,configurable:!0}),e.prototype.getModuleFields=function(){if(""!==this.model.module){this.modelFields=[];var e=this.metadata.getModuleFields(this.model.module);for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];"link"!==i.type&&"relate"!==i.type&&"non-db"!==i.source&&"id"!=i.name&&(i.vname?i.displayname=this.language.getModuleLabel(this.model.module,i.vname)+" ("+i.name+")":i.displayname=i.name,this.modelFields.push(i))}}this.requiredModelFields=this.modelFields.filter(function(e){return"id"!=e.name&&e.required})},e.prototype.ngAfterViewInit=function(){var t=this;this.navigation.setActiveModule(this.model.module),this.backend.getRequest("/modules/SpiceImports/savedImports/"+this.model.module).subscribe(function(e){t.objectimport.savedImports=e})},e.prototype.ngAfterViewChecked=function(){this.objectimport.stepLongText=this.language.getLabel(this.importStepsText[this.currentImportStep],"","long"),this.cdRef.detectChanges()},e.prototype.setImportAction=function(e){var t;switch(this.importAction=e){case"new":t=this.importSteps.indexOf("update"),this.importSteps[t]="check",this.importStepsText[t]="LBL_DUPLICATE_CHECK";break;case"update":t=this.importSteps.indexOf("check"),this.importSteps[t]="update",this.importStepsText[t]="LBL_UPDATE_EXISTING_RECORDS"}},e.prototype.getCurrentStep=function(){return this.objectimport.stepLongText=this.language.getLabel(this.importStepsText[this.currentImportStep],"","long"),this.language.getLabel(this.importStepsText[this.currentImportStep])},e.prototype.gotoModule=function(){this.router.navigate(["/module/"+this.model.module])},e.prototype.getContainerStyle=function(){return{height:"calc(100vh - "+this.contentcontainer.element.nativeElement.getBoundingClientRect().top+"px)","overflow-y":"auto"}},e.prototype.getStepClass=function(e){var t=this.importSteps.indexOf(e);return t==this.currentImportStep?"slds-is-active":t<this.currentImportStep?"slds-is-completed":void 0},e.prototype.getStepComplete=function(e){return this.importSteps.indexOf(e)<this.currentImportStep},e.prototype.getProgressBarWidth=function(){return{width:this.currentImportStep/(this.importSteps.length-1)*100+"%"}},e.prototype.nextStep=function(){switch(this.currentImportStep){case 0:if(""===this.objectimport.fileName)return this.toast.sendToast(this.language.getLabel("MSG_SELECT_VALID_FILE"),"error");if("choose"==this.objectimport.importTemplateAction&&Object.keys(this.objectimport.fileMapping).length<=0&&0==this.objectimport.checkFields.length&&0==this.objectimport.fixedFields.length)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");if("new"==this.objectimport.importTemplateAction&&!this.templateName)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");this.currentImportStep++;break;case 1:if(Object.keys(this.objectimport.fileMapping).length<=0)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");if("have"==this.objectimport.idFieldAction&&""==this.objectimport.idField)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.currentImportStep++;break;case 2:for(var e=0,t=this.objectimport.fixedFields;e<t.length;e++){var i=t[e];if(!this.model.data.hasOwnProperty(i.field))return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");if(this.model.data[i.field].length<1)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error")}if(!this.checkRequiredMapped()&&"new"==this.objectimport.importAction)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");this.currentImportStep++;break;case 3:if("update"==this.importAction&&this.objectimport.checkFields.length<1)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.import();break;case 4:this.gotoModule(),this.currentImportStep=0;break;default:this.currentImportStep++}},e.prototype.checkRequiredMapped=function(){for(var e=_.invert(this.objectimport.fileMapping),t=0,i={},s=0,o=this.objectimport.fixedFields;s<o.length;s++){var l=o[s];i[l.field]=l.field}for(var a=0,n=this.requiredModelFields;a<n.length;a++){var d=n[a];"id"!=d.name&&(e[d.name]&&t++,i[d.name]&&t++)}return this.requiredModelFields.length==t},e.prototype.prevStep=function(){0<this.currentImportStep&&this.currentImportStep--},e.prototype.showNext=function(){return this.currentImportStep<this.importSteps.length-2},e.prototype.showImport=function(){return this.currentImportStep==this.importSteps.length-2},e.prototype.showExit=function(){return this.currentImportStep==this.importSteps.length-1},e.prototype.import=function(){var t=this,e=this.prepareObjectImport("import");this.objectimport.result={},this.processing=!0,this.backend.postRequest("/modules/SpiceImports/import",{objectimport:JSON.stringify(e)}).subscribe(function(e){switch(e.status){case"imported":t.objectimport.result=e;break;case"scheduled":t.gotoModule(),t.toast.sendToast(e.msg,"success");break;case"error":t.toast.sendToast(e.msg,"error","",!1)}t.processing=!1,t.currentImportStep++})},e.prototype.prepareObjectImport=function(e){var t=_.omit(this.objectimport,"fileData","savedImports","result","importTemplateAction","stepLongText");return t.fixedFieldsValues=this.model.data,t.module=this.model.module,""!=this.objectimport.idField&&(t.fileMapping[this.objectimport.idField]="id"),"have"==t.idFieldAction&&(t.checkFields=[{mappedField:this.objectimport.idField,moduleField:"id"}]),t},__decorate([core_1.ViewChild("contentcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"contentcontainer",void 0),e=__decorate([core_1.Component({selector:"object-import",template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><system-icon [module]="model.module"></system-icon><div class="slds-media__body"><nav role="navigation" aria-label="Breadcrumbs"><ol class="slds-breadcrumb slds-list--horizontal"><li class="slds-breadcrumb__item slds-text-title--caps"><a href="javascript:void(0);" (click)="gotoModule()">{{language.getModuleName(model.module)}}</a></li><li class="slds-breadcrumb__item slds-text-title--caps"><a href="javascript:void(0);">{{language.getLabel(\'LBL_IMPORT\')}}</a></li><li *ngIf="currentImportStep >= 1" class="slds-breadcrumb__item slds-text-title--caps slds-p-left--x-small">{{ objectimport.importAction == \'new\' ? language.getLabel(\'LBL_LOAD_NEW_RECORDS\'): language.getLabel(\'LBL_UPDATE_EXISTING_RECORDS\')}}</li></ol></nav><div><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">{{getCurrentStep()}}</h1></div></div></div></div></div></div><div class="slds-grid slds-grid--align-spread slds-p-around--small slds-theme--shade slds-border--bottom"><button class="slds-button slds-button--neutral" [disabled]="showExit()" (click)="prevStep()" [ngClass]="{\'slds-hide\': !currentImportStep}">{{language.getLabel(\'LBL_PREVIOUS\')}}</button><div class="slds-progress slds-progress--shade"><ol class="slds-progress__list"><li *ngFor="let importStep of importSteps" class="slds-progress__item" [ngClass]="getStepClass(importStep)"><button class="slds-button slds-progress__marker" [ngClass]="{\'slds-button--icon slds-progress__marker--icon\': getStepComplete(importStep)}"><span class="slds-assistive-text">{{importStep}}</span><system-button-icon *ngIf="getStepComplete(importStep)" [icon]="\'success\'"></system-button-icon></button></li></ol><div class="slds-progress-bar slds-progress-bar_x-small"><span class="slds-progress-bar__value" [ngStyle]="getProgressBarWidth()"></span></div></div><button *ngIf="showNext()" class="slds-button slds-button--neutral" (click)="nextStep()">{{language.getLabel(\'LBL_NEXT\')}}</button> <button *ngIf="showImport()" [disabled]="processing" class="slds-button slds-button--brand slds-grid slds-grid_vertical-align-center" (click)="nextStep()"><span *ngIf="!processing" class="slds-p-right--xx-small">{{objectimport.importAction == \'new\' ? language.getLabel(\'LBL_IMPORT\'): language.getLabel(\'LBL_UPDATE\') }}</span> <span *ngIf="processing" class="slds-p-right--xx-small">{{objectimport.importAction == \'new\' ? language.getLabel(\'LBL_IMPORTING\'): language.getLabel(\'LBL_UPDATING\') }}</span><system-spinner *ngIf="processing" inverse="true" [size]="16"></system-spinner></button> <button *ngIf="showExit()" class="slds-button slds-button--brand" (click)="nextStep()">{{language.getLabel(\'LBL_CLOSE\')}}</button></div><div #contentcontainer class="slds-scrollable--y" [ngStyle]="getContainerStyle()"><object-import-select (templateNameSet)="templateName = $event" (importActionSet)="setImportAction($event)" [hidden]="currentImportStep!==0"></object-import-select><object-import-map [modelfields]="modelFields" [requiredmodelfields]="requiredModelFields" [hidden]="currentImportStep!==1"></object-import-map><object-import-fixed [modelfields]="modelFields" [requiredmodelfields]="requiredModelFields" [hidden]="currentImportStep!==2" [currentimportstep]="currentImportStep"></object-import-fixed><object-import-check *ngIf="currentImportStep === 3 && objectimport.importAction == \'new\'"></object-import-check><object-import-update *ngIf="currentImportStep === 3 && objectimport.importAction == \'update\'"></object-import-update><object-import-result [hidden]="currentImportStep!==4"></object-import-result></div>',providers:[services_1.model,objectimport],styles:[":host >>> .slds-progress__marker global-button-icon svg {fill:#CA1B1F}",":host >>> .slds-progress__marker:hover global-button-icon svg {fill:#FD595D}",":host >>> .slds-progress__marker:active global-button-icon svg {fill:#FD595D}",":host >>> .slds-progress__marker:focus global-button-icon svg {fill:#FD595D}"]}),__metadata("design:paramtypes",[objectimport,services_1.language,services_1.metadata,services_1.model,services_1.navigation,router_1.Router,services_1.backend,services_1.toast,core_1.ChangeDetectorRef,router_1.ActivatedRoute])],e)}();exports.ObjectImport=ObjectImport;var ObjectImportSelect=function(){function e(e,t,i,s,o,l,a,n){this.objectimport=e,this.toast=t,this.language=i,this.session=s,this.configurationService=o,this.model=l,this.backend=a,this.renderer=n,this.showUploadModal=!1,this.theProgress=0,this.templateNameSet=new core_1.EventEmitter,this.importActionSet=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"enclosure",{get:function(){return this.object},set:function(e){this.objectimport.enclosure=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"separator",{get:function(){return this.object},set:function(e){this.objectimport.separator=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateName",{get:function(){return this.object},set:function(e){this.objectimport.templateName=e,this.templateNameSet.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"importAction",{get:function(){return this.object},set:function(e){this.objectimport.importAction=e,this.importActionSet.emit(e),this.objectimport.idField="",this.templateName=void 0,this.resetOptions(),this.objectimport.resetSettings()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"importTemplateAction",{get:function(){return this.object},set:function(e){"choose"!=(this.objectimport.importTemplateAction=e)&&this.objectimport.resetSettings()},enumerable:!0,configurable:!0}),e.prototype.preventdefault=function(e){(1==e.dataTransfer.items.length&&"file"===e.dataTransfer.items[0].kind||0<e.dataTransfer.files.length)&&(e.preventDefault(),e.stopPropagation())},e.prototype.resetOptions=function(){this.objectimport.importDuplicateAction="ignore",this.objectimport.importTemplateAction="none",this.objectimport.idFieldAction="auto"},e.prototype.onDrop=function(e){this.preventdefault(e);var t=e.dataTransfer.files;t&&1==t.length&&this.doupload(t)},e.prototype.hasSavedImports=function(){return 0<this.objectimport.savedImports.length},e.prototype.getSavedImports=function(){return this.objectimport.savedImports},e.prototype.setSavedImport=function(e){this.objectimport.setSavedImport(e.srcElement.value)},e.prototype.selectFile=function(){var e=new MouseEvent("click",{bubbles:!0});this.renderer.invokeElementMethod(this.fileupload.element.nativeElement,"dispatchEvent",[e])},e.prototype.uploadFile=function(){var e=this.fileupload.element.nativeElement.files;this.doupload(e)},e.prototype.doupload=function(t){var i=this;t[0]&&t[0].name&&(this.showUploadModal=!0,this.uploadAttachments(t).subscribe(function(e){e.progress?i.theProgress=e.progress.loaded/e.progress.total*100:e.files?(i.objectimport.fileName=t[0].name,i.objectimport.fileId=e.files[0].filemd5,i.objectimport.fileHeader=e.files[0].fileheader,i.objectimport.fileData=e.files[0].filedata,i.objectimport.fileRows=e.files[0].filerows,i.objectimport.fileTooBig=e.fileTooBig,0===e.files[0].filedata.length&&(i.clearFile(),i.toast.sendToast(i.language.getLabel("ERR_CANT_READ_FILE_DATA"),"error","",!1)),e.fileTooBig&&0<e.files[0].filedata.length&&i.toast.sendToast(i.language.getLabel("MSG_FILE_ROWS_TOO_LARGE"),"warning","",!1)):"error"===e.status&&i.toast.sendToast(i.language.getLabel("ERR_UPLOAD_FAILED"),"error",e.data,!1)},function(e){},function(){return i.closeUploadPopup()}))},e.prototype.closeUploadPopup=function(){this.showUploadModal=!1},e.prototype.getBarStyle=function(){return{width:this.theProgress+"%"}},e.prototype.uploadAttachments=function(e){if(0!==e.length){var i=new rxjs_1.Subject,t=new FormData;t.append("file",e[0],e[0].name);var s=new XMLHttpRequest,o={};return s.onreadystatechange=function(e){if(void 0===e&&(e=this),4==s.readyState)try{var t=JSON.parse(s.response);i.next({files:t.files,fileTooBig:t.fileTooBig}),i.complete()}catch(e){o={status:"error",data:"Unknown error occurred: ["+s.responseText+"]"},i.next(o),i.complete()}},s.upload.addEventListener("progress",function(e){i.next({progress:{total:e.total,loaded:e.loaded}})},!1),s.open("POST",this.configurationService.getBackendUrl()+"/modules/SpiceImports/upf?separator="+this.separator+"&enclosure="+this.enclosure,!0),s.setRequestHeader("OAuth-Token",this.session.authData.sessionId),s.send(t),i.asObservable()}},e.prototype.clearFile=function(){this.backend.deleteRequest("/modules/SpiceImports/upf",{filemd5:this.objectimport.fileId}),this.objectimport.fileName="",this.objectimport.fileId="",this.objectimport.fileHeader=[],this.objectimport.fileData=[],this.objectimport.fileRows="",this.objectimport.resetSettings()},__decorate([core_1.ViewChild("fileupload",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"fileupload",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"templateNameSet",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"importActionSet",void 0),e=__decorate([core_1.Component({selector:"object-import-select",template:'<div class="slds-grid slds-wrap spice-h-full"><div class="slds-p-horizontal--small slds-size--1-of-4 slds-border--right spice-h-full"><div class="slds-text-body--regular slds-box slds-m-top--small slds-text-color--weak" style="padding: .25rem">{{ objectimport.stepLongText }}</div><div class="slds-form slds-m-around--medium"><div class="slds-form-element slds-m-vertical--medium"><div *ngIf="objectimport.fileId === \'\'" class="slds-form-element__control"><div class="slds-file-selector slds-file-selector--files slds-p-vertical--xx-small slds-grid" (drop)="onDrop($event)" (dragover)="preventdefault($event)" (dragleave)="preventdefault($event)"><div class="slds-file-selector__dropzone slds-p-left--small slds-p-vertical--small slds-p-right--xx-small slds-grid"><input #fileupload type="file" accept=".csv" class="slds-file-selector__input slds-assistive-text" (click)="fileupload.value = null" (change)="uploadFile()"> <label class="slds-file-selector__body slds-p-top--medium"><div class="slds-file-selector__button slds-button slds-button--neutral" (click)="selectFile()"><system-button-icon [icon]="\'upload\'" class="slds-m-right--xxx-small"></system-button-icon>{{language.getLabel(\'LBL_UPLOAD\')}}</div></label><div class="slds-grid slds-m-vertical--x-small slds-m-left--medium"><fieldset class="slds-form-element"><div class="slds-form-element__control"><div class="slds-radio_button-group"><span class="slds-button slds-radio_button" style="line-height: 1.10rem"><input type="radio" [(ngModel)]="separator" name="separator" id="semicolon" value="semicolon"> <label class="slds-radio_button__label" for="semicolon"><span class="slds-radio_faux" style="padding: 0 7px">;</span></label></span> <span class="slds-button slds-radio_button" style="line-height: 1.10rem"><input type="radio" [(ngModel)]="separator" name="separator" id="comma" value="comma"> <label class="slds-radio_button__label" for="comma"><span class="slds-radio_faux" style="padding: 0 7px">,</span></label></span></div></div><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_SEPARATOR\')}}</legend></fieldset><fieldset class="slds-form-element"><div class="slds-form-element__control"><div class="slds-radio_button-group"><span class="slds-button slds-radio_button" style="line-height: 1.10rem"><input type="radio" [(ngModel)]="enclosure" name="enclosure" id="singleq" value="single"> <label class="slds-radio_button__label" for="singleq"><span class="slds-radio_faux" style="padding: 0 7px">\'</span></label></span> <span class="slds-button slds-radio_button" style="line-height: 1.10rem"><input type="radio" [(ngModel)]="enclosure" name="enclosure" id="noneq" value="none"> <label class="slds-radio_button__label" for="noneq"><span class="slds-radio_faux" style="padding: 0 7px"></span></label></span> <span class="slds-button slds-radio_button" style="line-height: 1.10rem"><input type="radio" [(ngModel)]="enclosure" name="enclosure" id="doubleq" value="double"> <label class="slds-radio_button__label" for="doubleq"><span class="slds-radio_faux" style="padding: 0 7px">"</span></label></span></div></div><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_ENCLOSURE\')}}</legend></fieldset></div></div></div></div><div *ngIf="objectimport.fileId !== \'\'" class="slds-form-element__control"><div class="slds-pill slds-m-top--small slds-m-bottom--xxx-small slds-p-vertical--xx-small slds-p-horizontal--x-small"><a href="javascript:void(0);" class="slds-pill__label">{{objectimport.fileName}}</a> <button class="slds-button slds-button--icon slds-pill__remove" (click)="clearFile()"><system-button-icon [icon]="\'close\'"></system-button-icon></button></div><div>({{objectimport.fileRows}}) {{language.getLabel(\'LBL_RECORDS\')}}</div></div></div><div class="slds-form-element slds-m-vertical--medium"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_IMPORT_ACTION\')}}</legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="importactionnew" name="options" value="new" [(ngModel)]="importAction"> <label class="slds-radio__label" for="importactionnew"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_LOAD_NEW_RECORDS\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="importactionupdate" name="options" value="update" [(ngModel)]="importAction"> <label class="slds-radio__label" for="importactionupdate"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_UPDATE_EXISTING_RECORDS\')}}</span></label></span></div></div><div [hidden]="!objectimport.fileId" class="slds-form-element slds-m-vertical--medium"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_IMPORT_TEMPLATE\')}}</legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="importtemplatenone" value="none" name="template" [(ngModel)]="importTemplateAction"> <label class="slds-radio__label" for="importtemplatenone"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">none</span></label></span> <span *ngIf="hasSavedImports()" class="slds-radio"><input type="radio" id="importtemplatechoose" value="choose" name="template" [(ngModel)]="importTemplateAction"> <label class="slds-radio__label" for="importtemplatechoose"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_SELECT\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="importtemplatesave" value="new" name="template" [(ngModel)]="importTemplateAction"> <label class="slds-radio__label" for="importtemplatesave"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_SAVE_AS\')}}</span></label></span></div></div><div *ngIf="importTemplateAction==\'choose\' && objectimport.fileId" class="slds-form-element slds-m-vertical--medium"><label class="slds-form-element__label">{{language.getLabel(\'LBL_SELECT_TEMPLATE\', \'\', \'short\')}}</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" (change)="setSavedImport($event)"><option></option><option *ngFor="let savedImport of getSavedImports()" [value]="savedImport.id">{{savedImport.name}}</option></select></div></div></div><div *ngIf="importTemplateAction==\'new\'" class="slds-form-element slds-m-vertical--medium"><div class="slds-form-element"><label class="slds-form-element__label">{{language.getLabel(\'LBL_TEMPLATE_NAME\')}}</label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="templateName"></div></div></div></div></div><div class="slds-size--3-of-4 spice-h-full"><table *ngIf="objectimport.fileHeader.length > 0" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps slds-p-vertical--small"><th scope="col"><div style="font-weight: 600" class="slds-truncate slds-p-vertical--xx-small">{{language.getLabel(\'LBL_HEADER\')}}</div></th><th colspan="2" scope="col"><div style="font-weight: 600" class="slds-truncate slds-p-vertical--xx-small">{{language.getLabel(\'LBL_RECORDS\')}} ({{objectimport.fileRows}})</div></th></tr></thead><tbody><tr *ngFor="let row of objectimport.fileHeader; let columnindex = index"><td scope="row"><div class="slds-truncate">{{row}}</div></td><td *ngFor="let record of objectimport.fileData"><div class="slds-truncate">{{record[columnindex]}}</div></td></tr></tbody></table></div></div><ng-container *ngIf="showUploadModal"><div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header slds-modal__header--empty"></div><div class="slds-modal__content slds-p-around--medium">{{language.getLabel(\'LBL_UPLOADING\')}}{{theFile}} ...<div class="uploadbar"><div class="uploadprogress" [ngStyle]="getBarStyle()"></div></div></div></div></div><div class="slds-backdrop slds-backdrop--open"></div></ng-container>',styles:[":host {height: 100%;}",":host >>> div.uploadbar {margin-left:-16px;margin-right:-16px;margin-top:16px;margin-bottom:-16px;width:calc(100% + 32px);height:8px;}",":host >>> div.uploadprogress {width: 90%;height: 100%;background-color: red;}",".slds-radio--button [type=radio]:checked+.slds-radio--button__label, \n        .slds-radio--button [type=radio]:checked+.slds-radio--faux, \n        .slds-radio--button [type=radio]:checked+.slds-radio_button__label, \n        .slds-radio--button [type=radio]:checked+.slds-radio_faux, \n        .slds-radio--button [type=radio]:checked~.slds-radio--faux, \n        .slds-radio--button [type=radio]:checked~.slds-radio_faux, \n        .slds-radio_button [type=radio]:checked+.slds-radio--button__label, \n        .slds-radio_button [type=radio]:checked+.slds-radio--faux, \n        .slds-radio_button [type=radio]:checked+.slds-radio_button__label, \n        .slds-radio_button [type=radio]:checked+.slds-radio_faux, \n        .slds-radio_button [type=radio]:checked~.slds-radio--faux, \n        .slds-radio_button [type=radio]:checked~.slds-radio_faux \n        { background-color: #CA1B1F}"]}),__metadata("design:paramtypes",[objectimport,services_1.toast,services_1.language,services_1.session,services_1.configurationService,services_1.model,services_1.backend,core_1.Renderer])],e)}();exports.ObjectImportSelect=ObjectImportSelect;var ObjectImportMap=function(){function e(e,t,i,s){this.objectimport=e,this.language=t,this.metadata=i,this.model=s,this.modelFields=void 0,this.requiredModelFields=void 0}return Object.defineProperty(e.prototype,"idFieldAction",{get:function(){return this.object},set:function(e){"auto"==(this.objectimport.idFieldAction=e)&&(this.objectimport.idField="")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.object},enumerable:!0,configurable:!0}),e.prototype.getMapping=function(e){return this.objectimport.getMapping(e)},e.prototype.setMapping=function(e,t){this.objectimport.setMapping(e,t.srcElement.value)},e.prototype.checkRequired=function(t){var e=_.invert(this.objectimport.fileMapping).hasOwnProperty(t),i=this.objectimport.fixedFields.some(function(e){return e.field==t});return!(!e&&!i)},e.prototype.isChosen=function(e){return!!_.invert(this.objectimport.fileMapping)[e]},__decorate([core_1.Input("modelfields"),__metadata("design:type",Array)],e.prototype,"modelFields",void 0),__decorate([core_1.Input("requiredmodelfields"),__metadata("design:type",Array)],e.prototype,"requiredModelFields",void 0),e=__decorate([core_1.Component({selector:"object-import-map",template:'<div class="slds-grid slds-wrap spice-h-full"><div class="slds-p-horizontal--small slds-size--1-of-4 slds-border--right spice-h-full"><div class="slds-text-body--regular slds-box slds-m-vertical--small slds-text-color--weak" style="padding: .25rem">{{ objectimport.stepLongText }}</div><div *ngIf="modelFields && this.objectimport.importAction == \'new\'"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'MSG_REQUIRED_MAPPED_FIXED\')}}</legend><div class="slds-tile__detail slds-text-body--small slds-p-horizontal--small"><div class="slds-grid" *ngFor="let field of this.requiredModelFields"><span class="slds-truncate">{{ field.displayname }}</span> <span class="slds-col--bump-left slds-truncate"><system-button-icon [ngClass]="{\'slds-text-color_success\' : checkRequired(field.name), \'slds-text-color--error\': !checkRequired(field.name)}" [icon]="checkRequired(field.name) ? \'success\' : \'record\'"></system-button-icon></span></div></div></div><div class="slds-m-vertical--x-small"><fieldset class="slds-form-element slds-m-top--small"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_UNIQUE_FIELD\')}}</legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="idFieldAuto" name="idFieldOptions" value="auto" [(ngModel)]="idFieldAction"> <label class="slds-radio__label" for="idFieldAuto"><span class="slds-radio_faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_HAVE_NO_ID\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="idFieldHave" name="idFieldOptions" value="have" [(ngModel)]="idFieldAction"> <label class="slds-radio__label" for="idFieldHave"><span class="slds-radio_faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_ALREAD_HAVE_ID\')}}</span></label></span></div></fieldset><div *ngIf="idFieldAction == \'have\'" class="slds-form-element slds-m-vertical--small"><label class="slds-form-element__label" for="idFieldSelect">{{language.getLabel(\'LBL_SELECT_ID_FIELD\')}}</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" id="idFieldSelect" [(ngModel)]="objectimport.idField"><option></option><option *ngFor="let field of objectimport.fileHeader" [value]="field">{{ field }}</option></select></div></div></div></div></div><div class="slds-size--3-of-4 spice-h-full"><table *ngIf="objectimport.fileHeader.length > 0" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col" colspan="2"><div style="font-weight: 600" class="slds-truncate slds-p-vertical--xx-small">{{language.getLabel(\'LBL_HEADER\')}}</div></th><th scope="col"><div style="font-weight: 600" class="slds-truncate slds-p-vertical--xx-small">{{ model.module }} {{language.getLabel(\'LBL_FIELDS\')}}</div></th><th colspan="2" scope="col"><div style="font-weight: 600" class="slds-truncate slds-p-vertical--xx-small">{{language.getLabel(\'LBL_RECORDS\')}} ({{objectimport.fileRows}})</div></th></tr></thead><tbody><tr *ngFor="let row of objectimport.fileHeader; let columnindex = index"><td scope="row" class="slds-p-right--none slds-p-left--none slds-text-align_center" width="22px"><div class="slds-text-align_center slds-p-around--xx-small"><system-button-icon *ngIf="objectimport.idField == row" [size]="small" [icon]="\'lock\'"></system-button-icon></div></td><td scope="row"><div class="slds-truncate">{{row}}</div></td><td><div class="slds-truncate"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [disabled]="objectimport.idField == row" [value]="objectimport.idField == row ? \'\' : getMapping(row)" (change)="setMapping(row, $event)"><option></option><ng-container *ngFor="let field of modelFields"><option [disabled]="isChosen(field.name)" [value]="field.name">{{field.displayname}}</option></ng-container></select></div></div></div></td><td *ngFor="let record of objectimport.fileData"><div class="slds-truncate">{{record[columnindex]}}</div></td></tr></tbody></table></div></div>'}),__metadata("design:paramtypes",[objectimport,services_1.language,services_1.metadata,services_1.model])],e)}();exports.ObjectImportMap=ObjectImportMap;var ObjectImportFixed=function(){function e(e,t,i,s,o){this.objectimport=e,this.language=t,this.metadata=i,this.model=s,this.view=o,this.requiredModelFields=void 0,this.filteredModuleFileds=void 0,this.modelfields=void 0,this.view.isEditable=!0,this.view.setEditMode()}return Object.defineProperty(e.prototype,"modelFields",{get:function(){return this.modelfields},set:function(e){this.modelfields=e,this.filteredModuleFileds=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentImportStep",{set:function(e){2==e&&this.getFilteredModuleFields()},enumerable:!0,configurable:!0}),e.prototype.getFilteredModuleFields=function(){var t=_.invert(this.objectimport.fileMapping);this.filteredModuleFileds=this.modelFields.filter(function(e){return!t.hasOwnProperty(e.name)})},e.prototype.setFixedField=function(e,t){this.objectimport.setFixedField(e,t)},e.prototype.getFixed=function(e){return this.objectimport.getFixed(e)},e.prototype.removeFixed=function(e){this.model.data=_.omit(this.model.data,this.objectimport.fixedFields[e].field),this.objectimport.removeFixed(e)},e.prototype.checkRequired=function(t){var e=_.invert(this.objectimport.fileMapping).hasOwnProperty(t),i=this.objectimport.fixedFields.some(function(e){return e.field==t});return!(!e&&!i)},e.prototype.isChosen=function(e){return!!_.invert(this.objectimport.fileMapping)[e]},__decorate([core_1.Input("modelfields"),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],e.prototype,"modelFields",null),__decorate([core_1.Input("currentimportstep"),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],e.prototype,"currentImportStep",null),__decorate([core_1.Input("requiredmodelfields"),__metadata("design:type",Array)],e.prototype,"requiredModelFields",void 0),e=__decorate([core_1.Component({selector:"object-import-fixed",template:'<div class="slds-grid slds-wrap spice-h-full"><div class="slds-p-horizontal--small slds-size--1-of-4 slds-border--right spice-h-full"><div class="slds-text-body--regular slds-box slds-m-vertical--small slds-text-color--weak" style="padding: .25rem">{{ objectimport.stepLongText }}</div><div *ngIf="modelFields && this.objectimport.importAction == \'new\'"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'MSG_REQUIRED_MAPPED_FIXED\')}}</legend><div class="slds-tile__detail slds-text-body--small slds-p-horizontal--small"><div class="slds-grid" *ngFor="let field of this.requiredModelFields"><span class="slds-truncate">{{ field.displayname }}</span> <span class="slds-col--bump-left slds-truncate"><system-button-icon [ngClass]="{\'slds-text-color_success\' : checkRequired(field.name), \'slds-text-color--error\': !checkRequired(field.name)}" [icon]="checkRequired(field.name) ? \'success\' : \'record\'"></system-button-icon></span></div></div></div></div><div class="slds-size--3-of-4 spice-h-full"><table *ngIf="objectimport.fileHeader.length > 0" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col" width="50%"><div class="slds-truncate slds-p-vertical--xx-small" style="font-weight: 600">{{language.getLabel(\'LBL_FIELD\')}}</div></th><th scope="col" width="50%"><div class="slds-truncate slds-p-vertical--xx-small" style="font-weight: 600">{{language.getLabel(\'LBL_VALUE\')}}</div></th><th scope="col"></th></tr></thead><tbody><tr *ngFor="let row of objectimport.fixedFields; let rowIndex = index;"><td><div class="slds-truncate"><div class="slds-form-element__control"><div><select class="slds-select" [disabled]="getFixed(row)" [value]="getFixed(row)" (change)="setFixedField(rowIndex, $event.srcElement.value)"><option></option><option *ngFor="let field of filteredModuleFileds" [disabled]="isChosen(field.name)" [value]="field.name">{{field.displayname}}</option></select></div></div></div></td><td><div class="slds-truncate"><div *ngIf="row.field" class="slds-form-element__control"><field-container [field]="row.field"></field-container></div></div></td><td><button class="slds-button slds-button--icon" (click)="removeFixed(rowIndex)"><system-button-icon [icon]="\'clear\'" [size]="\'large\'"></system-button-icon></button></td></tr></tbody></table><div class="slds-grid slds-grid--align-center slds-p-vertical--xx-small"><button type="button" class="slds-button slds-button--brand" (click)="objectimport.addFixed()">{{language.getLabel(\'LBL_ADD_FIXED_FIELDS\', \'\', \'short\')}}</button></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[objectimport,services_1.language,services_1.metadata,services_1.model,services_1.view])],e)}();exports.ObjectImportFixed=ObjectImportFixed;var ObjectImportCheck=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.objectimport=s}return Object.defineProperty(e.prototype,"fileMapping",{get:function(){return this.object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"importDuplicateAction",{get:function(){return this.object},set:function(e){this.objectimport.importDuplicateAction=e,this.setCheckFields(e)},enumerable:!0,configurable:!0}),e.prototype.setCheckFields=function(e){if("log"==e)for(var t in this.objectimport.checkFields=[],this.fileMapping)this.fileMapping.hasOwnProperty(t)&&this.objectimport.checkFields.push({mappedField:t,moduleField:this.fileMapping[t]});else this.objectimport.checkFields=[]},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"currentImportStep",void 0),e=__decorate([core_1.Component({selector:"object-import-check",template:'<div class="slds-grid slds-wrap spice-h-full"><div class="slds-p-horizontal--small slds-size--1-of-4 slds-border--right spice-h-full"><div class="slds-text-body--regular slds-box slds-m-top--small slds-text-color--weak" style="padding: .25rem">{{ objectimport.stepLongText }}</div><div class="slds-form slds-m-around--medium"><div class="slds-form-element slds-m-vertical--medium"><legend class="slds-form-element__legend slds-form-element__label">{{language.getLabel(\'LBL_DUPLICATE_ACTION\')}}</legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="importduplicateactionignore" name="duplicateoptions" value="ignore" [(ngModel)]="importDuplicateAction"> <label class="slds-radio__label" for="importduplicateactionignore"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_IGNORE_DUPLICATE\')}}</span></label></span> <span class="slds-radio"><input type="radio" id="importduplicateactionlog" name="duplicateoptions" value="log" [(ngModel)]="importDuplicateAction"> <label class="slds-radio__label" for="importduplicateactionlog"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_LOG_DUPLICATES\')}}</span></label></span></div></div></div></div><div class="slds-p-horizontal--small slds-size--3-of-4 spice-h-full"></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,objectimport])],e)}();exports.ObjectImportCheck=ObjectImportCheck;var ObjectImportUpdate=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.objectimport=s,this.checkFields=[]}return Object.defineProperty(e.prototype,"fileMapping",{get:function(){return this.object},enumerable:!0,configurable:!0}),e.prototype.setCheckedField=function(t,e,i){i?(this.objectimport.checkFields=this.objectimport.checkFields.filter(function(e){return e.mappedField!==t}),this.objectimport.checkFields.push({mappedField:t,moduleField:e})):this.objectimport.checkFields=this.objectimport.checkFields.filter(function(e){return e.mappedField!==t})},e.prototype.getCheckedField=function(t){return this.objectimport.checkFields.some(function(e){return e.mappedField==t})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"currentImportStep",void 0),e=__decorate([core_1.Component({selector:"object-import-update",template:'<div class="slds-grid slds-wrap spice-h-full"><div class="slds-p-horizontal--small slds-size--1-of-4 slds-border--right spice-h-full"><div class="slds-text-body--regular slds-box slds-m-top--small slds-text-color--weak" style="padding: .25rem"><system-button-icon class="slds-m-right--xx-small" [size]="small" [icon]="\'lock\'"></system-button-icon>{{ objectimport.stepLongText }}</div></div><div *ngIf="objectimport.fileHeader?.length > 0" class="slds-size--3-of-4 spice-h-full"><table class="slds-table slds-table--bordered slds-table--cell-buffer" style="border-top: none"><thead><tr class="slds-text-title--caps"><th scope="row"><system-button-icon [size]="small" [icon]="\'lock\'"></system-button-icon></th><th scope="col"><div class="slds-truncate slds-p-vertical--x-small"><div class="slds-form-element__control" style="font-weight: 600">{{language.getLabel(\'LBL_MAPPED_FIELDS\')}}</div></div></th><th scope="col"><div class="slds-truncate slds-p-vertical--x-small" style="font-weight: 600">{{ model.module }} {{language.getLabel(\'LBL_FIELDS\')}}</div></th></tr></thead><tbody><tr><td scope="row"><span class="slds-checkbox"><input type="checkbox" id="idField" [checked]="getCheckedField(objectimport.idField)" (change)="setCheckedField(objectimport.idField, \'id\', $event.srcElement.checked)"> <label class="slds-checkbox__label" for="idField"><span class="slds-checkbox_faux"></span></label></span></td><td scope="row"><div class="slds-truncate">{{ objectimport.idField }}</div></td><td scope="row"><div class="slds-truncate">id</div></td></tr><tr *ngFor="let field of fileMapping | objectkeyvalues"><td scope="row"><span class="slds-checkbox"><input type="checkbox" id="{{field.key}}" [checked]="getCheckedField(field.key)" (change)="setCheckedField(field.key, field.value, $event.srcElement.checked)"> <label class="slds-checkbox__label" for="{{field.key}}"><span class="slds-checkbox_faux"></span></label></span></td><td scope="row"><div class="slds-truncate">{{ field.key }}</div></td><td scope="row"><div class="slds-truncate">{{field.value}}</div></td></tr></tbody></table></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,objectimport])],e)}();exports.ObjectImportUpdate=ObjectImportUpdate;var ObjectImportResult=function(){function ObjectImportResult(e,t,i,s,o,l,a,n){this.objectimport=e,this.toast=t,this.language=i,this.session=s,this.configurationService=o,this.model=l,this.renderer=a,this.router=n,this.showErrorModal=!1,this.theProgress=0}return ObjectImportResult.prototype.goToRecord=function(e){this.router.navigate(["/module/"+this.model.module+"/"+e])},__decorate([core_1.ViewChild("fileupload",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectImportResult.prototype,"fileupload",void 0),ObjectImportResult=__decorate([core_1.Component({selector:"object-import-result",template:'<div class="slds-wrap spice-h-full"><div class="spice-h-full"><table *ngIf="objectimport.result && objectimport.result.list && objectimport.result.list.length > 0" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div style="font-weight: 600" class="slds-truncate">{{language.getLabel(\'LBL_STATUS\')}}</div></th><th colspan="4" scope="col"><div style="font-weight: 600" class="slds-truncate">{{language.getLabel(\'LBL_DATA\')}}</div></th></tr></thead><tbody><tr [ngStyle]="{\'cursor\': row.recordId ? \'pointer\': \'initial\'}" *ngFor="let row of objectimport.result.list; let row = row" (click)="row.recordId ? goToRecord(row.recordId): false"><td scope="row"><div class="slds-truncate">{{row.status}}</div></td><td *ngFor="let recordData of row.data"><div class="slds-truncate">{{recordData}}</div></td></tr></tbody></table></div></div>',styles:[":host {height: 100%;}"]}),__metadata("design:paramtypes",[objectimport,services_1.toast,services_1.language,services_1.session,services_1.configurationService,services_1.model,core_1.Renderer,router_1.Router])],ObjectImportResult)}();exports.ObjectImportResult=ObjectImportResult;var ObjectMergeButton=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.modal=s,this.merged=new core_1.EventEmitter,this.showDialog=!1}return e.prototype.doMerge=function(){var t=this;this.modal.openModal("ObjectMergeModal").subscribe(function(e){e.instance.parentmodel=t.model,e.instance.mergemodels=t.mergemodels,e.instance.merged$.subscribe(function(e){t.merged.emit(e)})})},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"mergemodels",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"merged",void 0),e=__decorate([core_1.Component({selector:"object-merge-button",template:'<button class="slds-button slds-button--neutral slds-show--large" (click)="doMerge()"><span>{{language.getLabel(\'LBL_MERGE\')}}</span></button>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal])],e)}();exports.ObjectMergeButton=ObjectMergeButton;var ObjectMergeModal=function(){function ObjectMergeModal(e,t,i,s,o,l,a){this.language=e,this.metadata=t,this.objectmerge=i,this.model=s,this.modellist=o,this.backend=l,this.modal=a,this.mergemodels=[],this.merged$=new core_1.EventEmitter,this.currentMergeStep=0,this.mergeSteps=["records","fields","execute"],this.parentmodel={},this.self={}}return ObjectMergeModal.prototype.ngOnInit=function(){this.model.id=this.parentmodel.id,this.model.module=this.parentmodel.module,this.model.data=this.parentmodel.data,this.modellist.module=this.model.module,this.objectmerge.setModule(this.model.module),this.objectmerge.masterId=this.model.id,this.objectmerge.setAllfieldSources(this.model.id),this.model.data.selected=!0,this.model.data.id=this.model.id,this.modellist.listData.list.push(this.model.data);for(var e=0,t=this.mergemodels;e<t.length;e++){var i=t[e];this.modellist.listData.list.push(i)}},ObjectMergeModal.prototype.closeModal=function(){this.self.destroy()},ObjectMergeModal.prototype.getCurrentStep=function(){return this.mergeSteps[this.currentMergeStep]},ObjectMergeModal.prototype.getStepClass=function(e){var t=this.mergeSteps.indexOf(e);return t==this.currentMergeStep?"slds-is-active":t<this.currentMergeStep?"slds-is-completed":void 0},ObjectMergeModal.prototype.getStepComplete=function(e){return this.mergeSteps.indexOf(e)<this.currentMergeStep},ObjectMergeModal.prototype.getProgressBarWidth=function(){return{width:this.currentMergeStep/(this.mergeSteps.length-1)*100+"%"}},ObjectMergeModal.prototype.nextStep=function(){var i=this;if(this.currentMergeStep<this.mergeSteps.length-1)this.currentMergeStep,this.currentMergeStep++;else{for(var e={},t=0,s=this.objectmerge.mergeFields;t<s.length;t++){var o=s[t];this.objectmerge.mergeSource[o.name]!=this.objectmerge.masterId&&(e[o.name]=this.objectmerge.mergeSource[o.name])}for(var l=[],a=0,n=this.modellist.listData.list;a<n.length;a++){var d=n[a];d.id!=this.objectmerge.masterId&&l.push(d.id)}this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_MERGING",i.backend.postRequest("module/"+i.model.module+"/"+i.objectmerge.masterId+"/merge_bean",{},{fields:e,toDeleteBeanIds:l}).subscribe(function(e){t.instance.self.destroy(),i.model.id!=i.objectmerge.masterId?(i.model.id=i.objectmerge.masterId,i.model.goDetail()):(i.merged$.emit(!0),i.merged$.complete()),i.closeModal()})})}},ObjectMergeModal.prototype.prevDisabled=function(){return 0===this.currentMergeStep},ObjectMergeModal.prototype.nextDisabled=function(){switch(this.currentMergeStep){case 0:return!(1<this.modellist.getSelectedCount());default:return!1}},ObjectMergeModal.prototype.prevStep=function(){0<this.currentMergeStep&&this.currentMergeStep--},__decorate([core_1.Input(),__metadata("design:type",Array)],ObjectMergeModal.prototype,"mergemodels",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ObjectMergeModal.prototype,"merged$",void 0),ObjectMergeModal=__decorate([core_1.Component({selector:"object-merge-modal",template:'<system-modal size="large"><system-modal-header (close)="closeModal()">{{language.getLabel(\'LBL_MERGE_RECORD\')}} - {{model.data.summary_text}}</system-modal-header><system-modal-content margin="none" [grow]="true"><object-merge-modal-records [hidden]="currentMergeStep!==0"></object-merge-modal-records><object-merge-modal-data [hidden]="currentMergeStep!==1"></object-merge-modal-data><object-merge-modal-execute [hidden]="currentMergeStep!==2"></object-merge-modal-execute></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--align-spread"><div class="slds-progress slds-progress--shade slds-order--2"><ol class="slds-progress__list"><li *ngFor="let mergeStep of mergeSteps" class="slds-progress__item" [ngClass]="getStepClass(mergeStep)"><button class="slds-button slds-progress__marker" [ngClass]="{\'slds-button--icon slds-progress__marker--icon\': getStepComplete(mergeStep)}"><system-button-icon *ngIf="getStepComplete(mergeStep)" [icon]="\'success\'"></system-button-icon></button></li></ol><div class="slds-progress-bar slds-progress-bar_x-small"><div class="slds-progress-bar__value" [ngStyle]="getProgressBarWidth()"></div></div></div><button class="slds-button slds-button--neutral slds-order--1" (click)="prevStep()" [disabled]="prevDisabled()">{{language.getLabel(\'LBL_PREVIOUS\')}}</button> <button class="slds-button slds-button--brand slds-order--3" (click)="nextStep()" [disabled]="nextDisabled()">{{language.getLabel(\'LBL_NEXT\')}}</button></div></system-modal-footer></system-modal>',providers:[services_1.model,services_1.modellist,objectmerge],styles:[":host >>> .slds-progress__marker global-button-icon svg {fill:#CA1B1F}",":host >>> .slds-progress__marker:hover global-button-icon svg {fill:#FD595D}",":host >>> .slds-progress__marker:active global-button-icon svg {fill:#FD595D}",":host >>> .slds-progress__marker:focus global-button-icon svg {fill:#FD595D}"]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,objectmerge,services_1.model,services_1.modellist,services_1.backend,services_1.modal])],ObjectMergeModal)}();exports.ObjectMergeModal=ObjectMergeModal;var ObjectMergeModalRecords=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.modellist=s,this.listFields=[];for(var o=this.metadata.getComponentConfig("ObjectMergeModalRecords",this.model.module),l=0,a=this.metadata.getFieldSetFields(o.fieldset);l<a.length;l++){var n=a[l];!1!==n.fieldconfig.default&&this.listFields.push(n)}}return e.prototype.disableSelect=function(e){return e.id==this.model.id},e=__decorate([core_1.Component({selector:"object-merge-modal-records",template:'<table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col" style="width:3.25rem;" class="slds-text-align--right"></th><th scope="col" *ngFor="let listField of listFields"><div class="slds-truncate">{{language.getFieldDisplayName(model.module, listField.field)}}</div></th></tr></thead><tbody><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="listFields" [rowselect]="true" [rowselectdisabled]="disableSelect(listItem)" [listItem]="listItem" [showActionMenu]="false" class="slds-hint-parent"></tr></tbody></table>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist])],e)}();exports.ObjectMergeModalRecords=ObjectMergeModalRecords;var ObjectMergeModalData=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.modellist=i,this.objectmerge=s,this.modelFields={}}return e.prototype.getSelected=function(){for(var e=[],t=0,i=this.modellist.listData.list;t<i.length;t++){var s=i[t];s.selected&&e.push(s)}return e},e.prototype.selectAllFields=function(e){this.objectmerge.setAllfieldSources(e)},e.prototype.showField=function(e){for(var t=0,i=this.getSelected();t<i.length;t++){if(""!=i[t][e.name])return!0}return!1},e=__decorate([core_1.Component({selector:"object-merge-modal-data",template:'<table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"></th><th scope="col" *ngFor="let item of getSelected()"><div class="slds-truncate">{{item.summary_text}}</div></th></tr></thead><tbody><tr><td></td><td class="slds-truncate" *ngFor="let item of getSelected()"><a href="javascript:void(0)" (click)="selectAllFields(item.id)">{{language.getLabel(\'LBL_SELECT_ALL_FIELDS\')}}</a></td></tr><tr><td></td><td class="slds-truncate" *ngFor="let item of getSelected()"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-radio"><input type="radio" [id]="\'master\'+item.id" name="master" [value]="item.id" [(ngModel)]="objectmerge.masterId"> <label class="slds-radio__label" [attr.for]="\'master\'+item.id"><span class="slds-radio--faux"></span> <span class="slds-form-element__label">{{language.getLabel(\'LBL_USE_AS_MASTER\')}}</span></label></div></div></div></td></tr><tr *ngFor="let mergeField of objectmerge.mergeFields"><ng-container *ngIf="showField(mergeField)"><td class="slds-truncate">{{language.getFieldDisplayName(modellist.module, mergeField.name)}}</td><td class="slds-truncate" *ngFor="let item of getSelected()"><div class="slds-grid"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-radio"><input type="radio" [id]="\'master\'+mergeField.name+item.id" [name]="mergeField.name" [value]="item.id" [(ngModel)]="objectmerge.mergeSource[mergeField.name]"> <label class="slds-radio__label" [attr.for]="\'master\'+mergeField.name+item.id"><span class="slds-radio--faux"></span></label></div></div></div><object-merge-modal-data-field [fieldname]="mergeField.name" [fielddata]="item"></object-merge-modal-data-field></div></td></ng-container></tr></tbody></table>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.modellist,objectmerge])],e)}();exports.ObjectMergeModalData=ObjectMergeModalData;var ObjectMergeModalDataField=function(){function e(e,t){this.model=e,this.modellist=t,this.fieldname="",this.fielddata={},this.model.module=this.modellist.module}return e.prototype.ngOnInit=function(){this.model.data=this.fielddata},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldname",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fielddata",void 0),e=__decorate([core_1.Component({selector:"object-merge-modal-data-field",template:'<field-container [field]="fieldname" [fielddisplayclass]="\'slds-truncate\'"></field-container>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.model,services_1.modellist])],e)}();exports.ObjectMergeModalDataField=ObjectMergeModalDataField;var ObjectMergeModalExecute=function(){function e(e,t,i){this.language=e,this.metadata=t,this.model=i}return e=__decorate([core_1.Component({selector:"object-merge-modal-execute",template:"<div class=\"slds-p-around--medium\"><div class=\"slds-grid slds-grid--align-center slds-text-heading--medium slds-p-vertical--medium\">{{language.getAppLanglabel('MSG_CONFIRM_MERGE')}}</div><div class=\"slds-grid slds-grid--align-center slds-p-vertical--medium\">{{language.getAppLanglabel('MSG_CONFIRM_MERGE', 'long')}}</div></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],e)}();exports.ObjectMergeModalExecute=ObjectMergeModalExecute;var ObjectNotes=function(){function ObjectNotes(e,t,i){this.model=e,this.objectnote=t,this.language=i,this.newNote="",this.isPrivate=!1}return ObjectNotes.prototype.ngOnInit=function(){this.objectnote.module=this.model.module,this.objectnote.id=this.model.id,this.objectnote.getNotes()},ObjectNotes.prototype.clearNote=function(){this.newNote="",this.isPrivate=!1},ObjectNotes.prototype.addNote=function(){this.objectnote.addNote(this.newNote,this.isPrivate),this.newNote=""},ObjectNotes.prototype.togglePrivate=function(){this.isPrivate=!this.isPrivate},ObjectNotes.prototype.getPrivateIcon=function(){return this.isPrivate?"lock":"unlock"},ObjectNotes=__decorate([core_1.Component({selector:"object-notes",template:'<div class="slds-feed__item-comments"><div class="slds-media slds-comment slds-hint-parent"><div class="slds-media__figure"><span class="slds-icon_container slds-icon-standard-empty slds-icon_container--circle"><system-utility-icon [icon]="\'user\'" [size]="\'x-small\'" [addclasses]="\'slds-icon\'" [colorclass]="\'\'"></system-utility-icon></span></div><div class="slds-media__body"><div class="slds-publisher slds-publisher--comment"><textarea class="slds-publisher__input slds-input--bare slds-text-longform" [placeholder]="language.getLabel(\'LBL_CREATENOTE\')" [(ngModel)]="newNote"></textarea></div><div *ngIf="newNote !== \'\'" class="slds-m-top--x-small slds-m-bottom--medium slds-grid slds-grid--align-spread slds-grid--vertical-align-center"><button class="slds-button slds-button--icon-border" (click)="togglePrivate()"><system-utility-icon [icon]="getPrivateIcon()" [size]="\'xx-small\'"></system-utility-icon></button><div><button class="slds-button slds-button--neutral" (click)="clearNote()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="addNote()">{{language.getLabel(\'LBL_ADDNOTE\')}}</button></div></div></div></div></div><div class="slds-feed slds-p-top--small"><object-note *ngFor="let note of objectnote.notes" [note]="note"></object-note></div>',providers:[objectnote]}),__metadata("design:paramtypes",[services_1.model,objectnote,services_1.language])],ObjectNotes)}();exports.ObjectNotes=ObjectNotes;var ObjectNote=function(){function e(e){this.objectnote=e,this.note={}}return e.prototype.ngOnInit=function(){},e.prototype.getNoteTimeFromNow=function(){return moment(this.note.date).fromNow()},e.prototype.deleteNote=function(){this.objectnote.deleteNote(this.note.id)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"note",void 0),e=__decorate([core_1.Component({selector:"object-note",template:'<article class="slds-post slds-border--bottom slds-p-top--small"><header class="slds-post__header slds-media"><div class="slds-media__figure"><span class="slds-icon_container slds-icon-standard-empty slds-icon_container--circle"><system-utility-icon [icon]="\'user\'" [size]="\'x-small\'" [addclasses]="\'slds-icon\'" [colorclass]="\'\'"></system-utility-icon></span></div><div class="slds-media__body"><div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate"><p><a href="javascript:void(0);">{{note.user_name}}</a><ng-container *ngIf="!note.global">•<system-utility-icon [icon]="\'lock\'" [size]="\'xx-small\'"></system-utility-icon></ng-container></p><system-utility-icon [icon]="\'delete\'" [size]="\'xx-small\'" (click)="deleteNote()"></system-utility-icon></div><p class="slds-text-body--small"><a href="javascript:void(0);" class="slds-text-link--reset">{{getNoteTimeFromNow()}}</a></p></div></header><div><p>{{note.text}}</p></div></article>'}),__metadata("design:paramtypes",[objectnote])],e)}();exports.ObjectNote=ObjectNote;var ObjectAddressesPipe=function(){function e(){}return e.prototype.transform=function(e){var t=[];for(var i in e)t.push(e[i]);return t},e=__decorate([core_1.Pipe({name:"objectaddressespipe",pure:!1})],e)}();exports.ObjectAddressesPipe=ObjectAddressesPipe;var ObjectAddresses=function(){function ObjectAddresses(e,t,i,s,o){this.language=e,this.metadata=t,this.model=i,this.view=s,this.modelutilities=o,this.componentconfig={},this.expanded=!0}return Object.defineProperty(ObjectAddresses.prototype,"hasAddresses",{get:function(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}},enumerable:!0,configurable:!0}),ObjectAddresses.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1)},Object.defineProperty(ObjectAddresses.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!0,configurable:!0}),ObjectAddresses.prototype.getDisplay=function(){return 0<this.addresses.length||this.view.isEditMode()?"inherit":"none"},Object.defineProperty(ObjectAddresses.prototype,"addresses",{get:function(){var e=[];try{for(var t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e},enumerable:!0,configurable:!0}),ObjectAddresses.prototype.togglePanel=function(){this.expanded=!this.expanded},ObjectAddresses.prototype.getChevronStyle=function(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}},ObjectAddresses.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},ObjectAddresses.prototype.addAddress=function(){var e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}},ObjectAddresses=__decorate([core_1.Component({selector:"object-addresses",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded, \'slds-hide\': hidden}"><h3 class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate">{{language.getLabel(\'LBL_ADDRESSES\')}}</span></button></h3><div><div [ngStyle]="getTabStyle()"><ng-container *ngIf="hasAddresses"><object-address *ngFor="let address of addresses" [address]="address" [parent]="model" [fieldset]="componentconfig.fieldset"></object-address></ng-container><div *ngIf="view.isEditMode()" class="slds-box slds-m-around--x-small slds-align--absolute-center" style="padding:0.5rem;"><a href="javascript:void(0);" class="slds-text-link_reset" (click)="addAddress()">{{language.getLabel(\'LBL_ADD_ADDRESS\', \'Addresses\')}}</a></div></div></div></div>',host:{"[style.display]":"getDisplay()"}}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.modelutilities])],ObjectAddresses)}();exports.ObjectAddresses=ObjectAddresses;var ObjectAddress=function(){function e(e,t,i,s,o,l){this.language=e,this.metadata=t,this.model=i,this.view=s,this.modelutilities=o,this.footer=l,this.componentconfig={},this.address={},this.parent={},this.fieldset="",this.model.module="Addresses"}return e.prototype.ngOnInit=function(){if(this.model.id=this.address.id,this.model.data=this.modelutilities.backendModel2spice("Addresses",this.address),null==this.fieldset||""==this.fieldset){var e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}},e.prototype.deleteAddress=function(){var t=this;this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe(function(e){e.instance.title=t.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=t.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe(function(e){e&&(t.model.data.deleted=!0)})})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"address",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parent",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-address",template:'<div class="slds-box slds-m-around--x-small" style="padding: 0px"><object-record-fieldset [fieldset]="fieldset" [direction]="\'vertical\'"></object-record-fieldset><div *ngIf="view.isEditMode()" class="slds-text-align_right slds-m-around--x-small"><a href="javascript:void(0);" class="slds-text-link_reset" (click)="deleteAddress()">{{language.getLabel(\'LBL_DELETE\')}}</a></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.modelutilities,services_1.footer])],e)}();exports.ObjectAddress=ObjectAddress;var ObjectGDPRModal=function(){function ObjectGDPRModal(e){this.language=e,this.self={},this.gdprLog=[]}return ObjectGDPRModal.prototype.hideGDPRLog=function(){this.self.destroy()},ObjectGDPRModal.prototype.onModalEscX=function(){this.hideGDPRLog()},ObjectGDPRModal=__decorate([core_1.Component({template:'<div role="dialog" tabindex="-1" class="slds-modal slds-modal--large slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--shade"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" (click)="hideGDPRLog()"><system-button-icon [icon]="\'close\'" [size]="\'large\'" [inverse]="true"></system-button-icon></button><h2 class="slds-text-heading--medium">{{language.getLabel(\'LBL_GDPR\')}}</h2></div><div class="slds-modal__content slds-theme--default" style="height: 75vh;"><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_MODULE\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_NAME\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_DATA\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_MARKETING\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_CREATED_BY\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_DATE_ENTERED\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_MODIFIED_BY\')}}</div></th><th scope="col"><div class="slds-truncate">{{language.getLabel(\'LBL_DATE_MODIFIED\')}}</div></th></tr></thead><tbody><tr *ngFor="let gdprEntry of gdprLog"><td scope="row"><div class="slds-grid slds-grid--vertical-align-center"><system-icon [module]="gdprEntry.module" size="xx-small"></system-icon><div class="slds-truncate">{{gdprEntry.module}}</div></div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.summary_text}}</div></td><td scope="row"><span class="slds-checkbox"><input type="checkbox" disabled [id]="\'data\'+gdprEntry.id" [checked]="gdprEntry.gdpr_data_agreement == 1"> <label class="slds-checkbox__label" [attr.for]="\'data\'+gdprEntry.id"><span class="slds-checkbox_faux"></span></label></span></td><td scope="row"><span class="slds-checkbox"><input type="checkbox" disabled [id]="\'marketing\'+gdprEntry.id" [checked]="gdprEntry.gdpr_marketing_agreement == 1"> <label class="slds-checkbox__label" [attr.for]="\'marketing\'+gdprEntry.id"><span class="slds-checkbox_faux"></span></label></span></td><td scope="row"><div class="slds-truncate">{{gdprEntry.date_entered}}</div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.created_by_name}}</div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.modified_by_name}}</div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.date_modified}}</div></td></tr></tbody></table><div *ngIf="gdprLog.length === 0" class="slds-text-heading--small slds-p-around--medium">{{language.getLabel(\'MSG_NO_GDPRRECORDS_FOUND\')}}</div></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="hideGDPRLog()">{{language.getLabel(\'LBL_CLOSE\')}}</button></div></div></div>'}),__metadata("design:paramtypes",[services_1.language])],ObjectGDPRModal)}();exports.ObjectGDPRModal=ObjectGDPRModal;var ObjectPopoverHeader=function(){function ObjectPopoverHeader(e,t,i){this.language=e,this.model=t,this.metadata=i,this.fields=[]}return ObjectPopoverHeader.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectPopoverHeader",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))},ObjectPopoverHeader=__decorate([core_1.Component({selector:"[object-popover-header]",template:'<div class="slds-media slds-m-bottom--small slds-media--center"><div class="slds-media__figure"><system-icon [module]="model.module"></system-icon></div><div class="slds-media__body"><p class="slds-text-heading--medium slds-hyphenate"><a href="javascript:void(0);" (click)="model.goDetail()">{{model.data.summary_text}}</a></p></div></div><div class="slds-grid slds-wrap slds-grid--pull-padded"><div class="slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small" *ngFor="let field of fields"><dl><dt><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></dt><dd><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></dl></div></div>',providers:[services_1.view],host:{class:"slds-popover__header"}}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata])],ObjectPopoverHeader)}();exports.ObjectPopoverHeader=ObjectPopoverHeader;var ObjectPopoverBodyItem=function(){function ObjectPopoverBodyItem(e,t,i){this.language=e,this.model=t,this.metadata=i,this.module="",this.id="",this.modelIsLoading=!0,this.fields=[]}return ObjectPopoverBodyItem.prototype.ngOnInit=function(){var t=this;this.model.module=this.module,this.model.id=this.id,this.modelIsLoading=!0,this.model.getData(!0).subscribe(function(e){t.modelIsLoading=!1});var e=this.metadata.getComponentConfig("ObjectPopoverBodyItem",this.model.module);e.fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset))},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectPopoverBodyItem.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectPopoverBodyItem.prototype,"id",void 0),ObjectPopoverBodyItem=__decorate([core_1.Component({selector:"[object-popover-body-item]",template:'<div class="slds-media slds-m-bottom--small slds-media--center"><div class="slds-media__figure"><system-icon [module]="model.module"></system-icon></div><div class="slds-media__body"><system-spinner *ngIf="modelIsLoading"></system-spinner><p class="slds-text-heading--medium slds-truncate"><a href="javascript:void(0);" (click)="model.goDetail()">{{model.data.summary_text}}</a></p></div></div><div *ngIf="!modelIsLoading" class="slds-grid slds-wrap slds-grid--pull-padded"><div class="slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small" *ngFor="let field of fields"><dl><dt><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></dt><dd><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></dl></div></div>',providers:[services_1.model,services_1.view],host:{class:"slds-popover__body-list"}}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata])],ObjectPopoverBodyItem)}();exports.ObjectPopoverBodyItem=ObjectPopoverBodyItem;var ObjectRowItemComponent=function(){function e(e,t,i,s){this.model=e,this.view=t,this.router=i,this.language=s,this.rowselect=!1,this.listFields=[],this.listItem={},this.inlineedit=!1,this.showActionMenu=!0,this._selected=!1,this.select=new core_1.EventEmitter}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.data=this.listItem,this.view.isEditable=this.inlineedit&&this.model.data.acl.edit},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.select.emit(e)},enumerable:!0,configurable:!0}),e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input("rowselection"),__metadata("design:type",Boolean)],e.prototype,"rowselect",void 0),__decorate([core_1.Input("fields"),__metadata("design:type",Array)],e.prototype,"listFields",void 0),__decorate([core_1.Input("itemdata"),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"inlineedit",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showActionMenu",void 0),__decorate([core_1.Input("selected"),core_1.HostBinding("class.slds-is-active"),core_1.HostBinding("class.slds-is-selected"),__metadata("design:type",Boolean)],e.prototype,"_selected",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"select",void 0),e=__decorate([core_1.Component({selector:"[object-row-item]",template:'<td *ngIf="rowselect" role="gridcell" class="slds-cell-shrink"><label class="slds-checkbox"><input type="checkbox" [(ngModel)]="selected"> <span class="slds-checkbox--faux"></span></label></td><td *ngFor="let item of listFields" scope="row"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate slds-p-horizontal--x-small\'"></field-container></td><td *ngIf="showActionMenu" role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,router_1.Router,services_1.language])],e)}();exports.ObjectRowItemComponent=ObjectRowItemComponent;var ObjectModalModuleDBLookup=function(){function ObjectModalModuleDBLookup(e,t,i,s){this.language=e,this.model=t,this.modellist=i,this.metadata=s,this.displayFields=[],this.listFields=[],this.allSelected=!1,this.searchTerm="",this.searchTimeOut=void 0,this.self={},this.multiselect=!1,this.module="",this.selectedItems=new core_1.EventEmitter,this.searchConditions=[]}return Object.defineProperty(ObjectModalModuleDBLookup.prototype,"checkbox",{get:function(){return this.allSelected},set:function(e){(this.allSelected=e)?this.modellist.setAllSelected():this.modellist.setAllUnselected()},enumerable:!0,configurable:!0}),ObjectModalModuleDBLookup.prototype.contentStyle=function(){var e=this.tablecontent.element.nativeElement.getBoundingClientRect(),t=this.modalcontent.element.nativeElement.getBoundingClientRect();return{height:t.height-(e.top-t.top)}},ObjectModalModuleDBLookup.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectList",this.module);this.displayFields=this.metadata.getFieldSetFields(e.fieldset),this.model.module=this.module,this.modellist.setModule(this.module),!this.searchConditions&&e.searchconditions&&(this.searchConditions=JSON.parse(e.searchconditions)),this.modellist.searchConditions=this.searchConditions;for(var t=0,i=this.displayFields;t<i.length;t++){var s=i[t];this.listFields.push(s.field)}this.doSearch()},ObjectModalModuleDBLookup.prototype.doSearch=function(){this.modellist.searchConditions=this.searchConditions,this.modellist.searchTerm=this.searchTerm,this.modellist.loadFilteredList(this.listFields)},ObjectModalModuleDBLookup.prototype.triggerSearch=function(e){var t=this;switch(e.key){case"Enter":0<this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.doSearch()},1e3)}},ObjectModalModuleDBLookup.prototype.onScroll=function(e){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreFilteredList()},ObjectModalModuleDBLookup.prototype.closePopup=function(e){this.self.destroy(),e.preventDefault()},ObjectModalModuleDBLookup.prototype.getSelectedCount=function(){return this.modellist.getSelectedCount()},ObjectModalModuleDBLookup.prototype.selectItems=function(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.self.destroy()},ObjectModalModuleDBLookup.prototype.clickRow=function(e,t){this.selectedItems.emit([t]),this.self.destroy()},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModalModuleDBLookup.prototype,"tablecontent",void 0),__decorate([core_1.ViewChild("modalcontent",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModalModuleDBLookup.prototype,"modalcontent",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ObjectModalModuleDBLookup.prototype,"selectedItems",void 0),ObjectModalModuleDBLookup=__decorate([core_1.Component({selector:"object-modal-module-db-lookup",template:'<system-modal size="large"><system-modal-header (close)="closePopup()">{{language.getLabel(\'LBL_SEARCH\')}}: {{language.getModuleName(model.module, true)}}</system-modal-header><system-modal-content #modalcontent margin="none"><div class="slds-lookup" data-select="multi" data-scope="single" data-typeahead="true"><div class="slds-form-element slds-p-top--medium slds-p-horizontal--medium slds-m-bottom--small"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right"><system-utility-icon [icon]="\'search\'" [size]="\'x-small\'" [addclasses]="\'slds-input__icon\'"></system-utility-icon><input type="text" id="lookup" class="slds-input" [(ngModel)]="searchTerm" (keyup)="triggerSearch($event)" [placeholder]="language.getModuleName(model.module)"></div></div><div class="slds-theme--shade slds-p-around--x-small slds-border--top">{{modellist.listData.totalcount}} Results, sorted by {{language.getFieldDisplayName(modellist.module, modellist.sortfield)}}, selected {{modellist.getSelectedCount()}}</div><div style="height:75vh; overflow-y: auto;" #tablecontent (scroll)="onScroll($event)" [ngStyle]="contentStyle()"><table class="slds-table slds-table--bordered slds-table--cell-buffer" [ngClass]="{\'slds-no-row-hover\':multiselect,\'singleselect\':!multiselect}" role="listbox"><thead><tr><th *ngIf="multiselect" class="slds-cell-shrink" scope="col"><label class="slds-checkbox"><input type="checkbox" name="options" [(ngModel)]="checkbox"> <span class="slds-checkbox--faux"></span> <span class="slds-assistive-text">Select All</span></label></th><th *ngFor="let displayField of displayFields" scope="col"><div class="slds-truncate" title="Account Name"><field-label [fieldname]="displayField.field"></field-label></div></th></tr></thead><tbody><ng-container *ngIf="!multiselect"><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="displayFields" [listItem]="listItem" [showActionMenu]="false" [rowselect]="multiselect" [displaylinks]="false" class="slds-hint-parent" (click)="clickRow($event, listItem)"></tr></ng-container><ng-container *ngIf="multiselect"><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listFields]="displayFields" [listItem]="listItem" [showActionMenu]="false" [rowselect]="multiselect" [displaylinks]="false" class="slds-hint-parent"></tr></ng-container></tbody></table><system-spinner *ngIf="modellist.isLoading"></system-spinner></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closePopup($event)">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button *ngIf="multiselect" class="slds-button slds-button--brand" [disabled]="getSelectedCount() == 0" (click)="selectItems()">{{language.getLabel(\'LBL_SELECT\')}}</button></system-modal-footer></system-modal>',providers:[services_1.view,services_1.model,services_1.modellist]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.modellist,services_1.metadata])],ObjectModalModuleDBLookup)}();exports.ObjectModalModuleDBLookup=ObjectModalModuleDBLookup;var ObjectActionOutputBeanModal=function(){function ObjectActionOutputBeanModal(e,t,i,s,o,l){this.language=e,this.model=t,this.modal=i,this.view=s,this.backend=o,this.sanitizer=l,this.self=void 0,this.templates=[],this._selected_template=null,this.compiled_selected_template="",this.loading_output=!1}return ObjectActionOutputBeanModal.prototype.ngOnInit=function(){var t=this,e={searchfields:{join:"AND",conditions:[{field:"module_name",operator:"=",value:this.model.module}]}};this.backend.all("OutputTemplates",e).subscribe(function(e){t.templates=e})},Object.defineProperty(ObjectActionOutputBeanModal.prototype,"selected_template",{get:function(){return this._selected_template},set:function(e){var t=this;this.loading_output=!0,this._selected_template=e,this.backend.getRequest("OutputTemplates/"+this.selected_template.id+"/compile/"+this.model.id).subscribe(function(e){t.compiled_selected_template=e.content,t.loading_output=!1},function(e){t.loading_output=!0})},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectActionOutputBeanModal.prototype,"sanitizedTemplated",{get:function(){return this.sanitizer.bypassSecurityTrustHtml(this.compiled_selected_template)},enumerable:!0,configurable:!0}),ObjectActionOutputBeanModal.prototype.close=function(){this.self.destroy()},ObjectActionOutputBeanModal.prototype.download=function(){var e=this,i=this.model.module+"_"+this.model.data.summary_text+".pdf";this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="MSG_GENERATING_PDF",e.backend.downloadFile({route:"OutputTemplates/"+e.selected_template.id+"/convert/"+e.model.id+"/to/pdf"},i).subscribe(function(e){t.instance.self.destroy()},function(e){t.instance.self.destroy()})})},ObjectActionOutputBeanModal=__decorate([core_1.Component({selector:"object-action-output-bean-modal",template:'<div role="dialog" class="slds-modal slds-fade-in-open slds-modal_large"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" (click)="close()"><system-button-icon [icon]="\'close\'" [size]="\'large\'" [inverse]="true"></system-button-icon></button><h2 class="slds-text-heading--medium">{{language.getLabel(\'LBL_OUTPUT_TEMPLATE\')}}</h2></div><div class="slds-modal__content slds-theme--default slds-p-around--medium slds-p-bottom--xx-small"><div class="slds-form-element__control"><label class="slds-form-element__label">{{language.getLabel(\'LBL_TEMPLATE\')}}</label><select class="slds-select" [(ngModel)]="selected_template" [disabled]="templates.length == 0"><option *ngFor="let templ of templates" [ngValue]="templ">{{templ.name}} ({{templ.language}})</option></select></div><div class="slds-p-vertical--small slds-m-top--small slds-border--top slds-border--right slds-border--left slds-border--bottom" style="height: 60vh;"><iframe *ngIf="selected_template && !loading_output" frameBorder="0" style="width: 100%;height: 100%;" [srcdoc]="sanitizedTemplated"></iframe><div *ngIf="loading_output" class="slds-align--absolute-center" style="height: 100%;"><system-spinner></system-spinner></div><div *ngIf="!selected_template && !loading_output" class="slds-align--absolute-center" style="height: 100%;">{{language.getLabel(\'LBL_SELECT_TEMPLATE\')}}</div></div></div><div class="slds-modal__footer"><div class="slds-col"><ng-container *ngIf="!is_downloading_template"><button [disabled]="!selected_template" class="slds-button slds-button--brand" (click)="download()">{{language.getLabel(\'LBL_DOWNLOAD\')}}</button></ng-container></div></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.modal,services_1.view,services_1.backend,platform_browser_1.DomSanitizer])],ObjectActionOutputBeanModal)}();exports.ObjectActionOutputBeanModal=ObjectActionOutputBeanModal;var ObjectActionOutputBeanButton=function(){function ObjectActionOutputBeanButton(e,t,i,s){this.language=e,this.model=t,this.modal=i,this.viewContainerRef=s}return ObjectActionOutputBeanButton.prototype.execute=function(){this.modal.openModal("ObjectActionOutputBeanModal",!0,this.viewContainerRef.injector)},ObjectActionOutputBeanButton=__decorate([core_1.Component({selector:"object-action-output-bean-button",template:"<span>{{language.getLabel('LBL_PRINT')}}</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.modal,core_1.ViewContainerRef])],ObjectActionOutputBeanButton)}();exports.ObjectActionOutputBeanButton=ObjectActionOutputBeanButton;var ObjectKeyValuesPipe=function(){function e(){}return e.prototype.transform=function(e,t){var i=[];for(var s in e)i.push({key:s,value:e[s]});return i},e=__decorate([core_1.Pipe({name:"objectkeyvalues"})],e)}();exports.ObjectKeyValuesPipe=ObjectKeyValuesPipe;var ObjectTableRow=function(){function e(e,t,i){this.language=e,this.model=t,this.view=i,this.fields=[],this.selected=!1,this.select$=new core_1.EventEmitter,this.unselect$=new core_1.EventEmitter,this.selectable=!1,this.view.isEditable=!1}return e.prototype.ngOnInit=function(){this.selectable=null!==this.attr_selectable},e.prototype.toggleSelection=function(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selected",void 0),__decorate([core_1.Output("select"),__metadata("design:type",Object)],e.prototype,"select$",void 0),__decorate([core_1.Output("unselect"),__metadata("design:type",Object)],e.prototype,"unselect$",void 0),__decorate([core_1.Input("selectable"),__metadata("design:type",String)],e.prototype,"attr_selectable",void 0),e=__decorate([core_1.Component({selector:"[object-table-row]",template:'<td *ngIf="selectable" class="slds-cell-shrink" [attr.data-label]="language.getLabel(\'LBL_SELECT_ROW\')"><system-checkbox (click)="toggleSelection()" [checked]="selected" [label]="\'LBL_SELECT_ROW\'"></system-checkbox></td><td *ngFor="let field of fields" [attr.data-label]="language.getFieldDisplayName(model.module, field.field, field.fieldconfig)"><div class="slds-truncate"><field-container [fieldname]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></td>',providers:[services_1.view],host:{class:"slds-hint-parent"}}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.view])],e)}();exports.ObjectTableRow=ObjectTableRow;var ObjectTable=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.fields=[],this.objects=[],this.selected_objects=[],this.selected_objects$=new core_1.EventEmitter,this.max_selections=0,this.select$=new core_1.EventEmitter,this.selectable=!1,this.multiselect=!1,this.selectable=null!==i,this.multiselect=null!==s}return e.prototype.ngOnInit=function(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{var e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error("No fields given, nor found for module "+this.module);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)},e.prototype.toggleAll=function(){this.selected_objects.length<this.objects.length?this.selected_objects=this.objects.slice():this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)},e.prototype.select=function(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))},e.prototype.unselect=function(t){var e=this.selected_objects.findIndex(function(e){return e.id==t.id});-1<e&&(this.selected_objects.splice(e,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))},e.prototype.isObjectSelected=function(e){return!!this.findSelectedObject(e)},e.prototype.areAllObjectsSelected=function(){return this.selected_objects.length==this.objects.length},e.prototype.findSelectedObject=function(t){return this.selected_objects.find(function(e){return e.id==t.id})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"objects",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selected_objects",void 0),__decorate([core_1.Input("fieldset_id"),__metadata("design:type",String)],e.prototype,"fieldset_id",void 0),__decorate([core_1.Input("module"),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Output("selected_objectsChange"),__metadata("design:type",Object)],e.prototype,"selected_objects$",void 0),__decorate([core_1.Input("max-selections"),__metadata("design:type",Object)],e.prototype,"max_selections",void 0),__decorate([core_1.Output("select"),__metadata("design:type",Object)],e.prototype,"select$",void 0),e=__decorate([core_1.Component({selector:"object-table",template:'<table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_fixed-layout"><thead><tr class="slds-text-title--caps"><th *ngIf="selectable" class="slds-cell-shrink" scope="col"><span class="slds-assistive-text" id="check-group-header">{{language.getLabel(\'LBL_CHOOSE_ROWS_TO_SELECT\')}}</span><system-checkbox [checked]="areAllObjectsSelected()" (click)="toggleAll()" [disabled]="objects.length > max_selections"></system-checkbox></th><th *ngFor="let field of fields" scope="col"><div *ngIf="!field.fieldconfig || !field.fieldconfig.hidelabel" class="slds-truncate">{{language.getFieldDisplayName(module, field.field, field.fieldconfig)}}</div></th></tr></thead><tbody><tr object-table-row *ngFor="let object of objects" [fields]="fields" [modelProvider]="{module:module, data:object}" [selectable]="selectable ? true : null" (select)="select($event)" (unselect)="unselect($event)" [selected]="isObjectSelected(object)"></tr></tbody></table>'}),__param(2,core_1.Attribute("selectable")),__param(3,core_1.Attribute("multiselect")),__metadata("design:paramtypes",[services_1.language,services_1.metadata,String,String])],e)}();exports.ObjectTable=ObjectTable;var ObjectModelPopover=function(){function ObjectModelPopover(e,t,i){this.model=e,this.view=t,this.metadata=i,this.popovermodule="",this.popoverid="",this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.fields=[],this.fieldset="",this.componentset="",this.headercomponentset="",this.heightcorrection=30,this.widthcorrection=30,this.view.displayLinks=!1}return Object.defineProperty(ObjectModelPopover.prototype,"relatedStyle",{get:function(){return{"max-height":"calc(100vh - "+(this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5)+"px)"}},enumerable:!0,configurable:!0}),ObjectModelPopover.prototype.goDetail=function(){this.model.goDetail()},ObjectModelPopover.prototype.onMouseOver=function(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)},ObjectModelPopover.prototype.onMouseOut=function(){this.closePopover(!0)},Object.defineProperty(ObjectModelPopover.prototype,"popoverStyle",{get:function(){var e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&0<e.top-t.height+this.heightcorrection?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})},enumerable:!0,configurable:!0}),ObjectModelPopover.prototype.ngOnInit=function(){this.model.module=this.popovermodule,this.model.id=this.popoverid,this.model.getData();var e=this.metadata.getComponentConfig("ObjectModelPopover",this.popovermodule);(e.fieldset||e.componentset)&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset),this.fieldset||(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.popovermodule)).fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset),this.styles=this.popoverStyle},ObjectModelPopover.prototype.getNubbinClass=function(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos},ObjectModelPopover.prototype.closePopover=function(e){var t=this;void 0===e&&(e=!1),e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout(function(){return t.self.destroy()},500)},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModelPopover.prototype,"popover",void 0),__decorate([core_1.ViewChild("relatedcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ObjectModelPopover.prototype,"relatedContainer",void 0),ObjectModelPopover=__decorate([core_1.Component({template:'<div class="slds-popover slds-popover_large slds-popover--panel slds-is-fixed" style="transition: .5s;" [ngStyle]="popoverStyle" [ngClass]="getNubbinClass()" role="dialog" (mouseenter)="onMouseOver()" (mouseleave)="onMouseOut()"><button class="slds-button slds-button_icon slds-button_icon slds-button_icon-small slds-float_right slds-popover__close" (click)="closePopover(true)"><system-button-icon icon="close"></system-button-icon></button><div #popover><div class="slds-popover__header"><system-componentset *ngIf="headercomponentset" [componentset]="headercomponentset"></system-componentset><header *ngIf="!headercomponentset" class="slds-media slds-media_center slds-m-bottom_small slds-p-right--large"><system-icon [module]="popovermodule" size="small"></system-icon><div class="slds-media__body"><system-stencil *ngIf="model.isLoading"></system-stencil><h2 class="slds-text-heading_small slds-hyphenate"><a href="javascript:void(0);" (click)="goDetail()">{{model.data.summary_text}}</a></h2>{{popoverpos}}</div></header><footer class="slds-grid slds-wrap slds-p-right--large"><div class="slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small" *ngFor="let field of fields"><dl><dt><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></dt><dd><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></dl></div></footer></div><div class="slds-popover__body slds-scrollable--y spicecrm-scrollbar"><div #relatedcontainer class="slds-popover__body slds-scrollable--y spicecrm-scrollbar" [ngStyle]="relatedStyle"><system-componentset [componentset]="componentset"></system-componentset></div></div></div></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.metadata])],ObjectModelPopover)}();exports.ObjectModelPopover=ObjectModelPopover;var ObjectModelPopoverField=function(){function ObjectModelPopoverField(e,t){this.model=e,this.view=t,this.componentconfig={}}return Object.defineProperty(ObjectModelPopoverField.prototype,"hidden",{get:function(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectModelPopoverField.prototype,"fieldname",{get:function(){return this.componentconfig.field?this.componentconfig.field:""},enumerable:!0,configurable:!0}),ObjectModelPopoverField=__decorate([core_1.Component({template:'<div *ngIf="fieldname" class="slds-p-vertical--xx-small slds-p-horizontal--large" [ngClass]="{\'slds-hide\' : hidden}"><field-label [fieldname]="fieldname"></field-label><field-container [fieldname]="fieldname"></field-container></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view])],ObjectModelPopoverField)}();exports.ObjectModelPopoverField=ObjectModelPopoverField;var ObjectModelPopoverRelated=function(a){function ObjectModelPopoverRelated(e,t,i,s,o){var l=a.call(this,e,t,i,s)||this;return l.language=e,l.metadata=t,l.relatedmodels=i,l.model=s,l.router=o,l}return __extends(ObjectModelPopoverRelated,a),Object.defineProperty(ObjectModelPopoverRelated.prototype,"canViewAll",{get:function(){return 0<this.relatedmodels.count&&this.relatedmodels.count>this.relatedmodels.loaditems},enumerable:!0,configurable:!0}),ObjectModelPopoverRelated.prototype.showAll=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])},ObjectModelPopoverRelated=__decorate([core_1.Component({selector:"object-model-popover-related",template:'<dl *ngIf="this.aclAccess()" class="slds-popover__body-list"><dt class="slds-m-bottom_small"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon [module]="module" size="small"></system-icon></div><div class="slds-media__body"><p class="slds-text-heading_small slds-hyphenate">{{language.getLabel(panelTitle)}}<ng-container *ngIf="!relatedmodels.isloading">&nbsp;({{relatedmodels.count}})</ng-container></p></div></div></dt><div *ngIf="relatedmodels.isloading" class="slds-align_absolute-center"><system-spinner size="12"></system-spinner></div><object-model-popover-related-item *ngFor="let relateditem of relatedmodels.items" [module]="relatedmodels.relatedModule" [item]="relateditem" [fields]="listfields"></object-model-popover-related-item><dd *ngIf="canViewAll" class="slds-m-top_x-small slds-text-align_right"><a href="javascript:void(0);" (click)="showAll()">{{language.getLabel(\'LBL_VIEWALL\')}}</a></dd></dl>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,router_1.Router])],ObjectModelPopoverRelated)}(ObjectRelatedlistList);exports.ObjectModelPopoverRelated=ObjectModelPopoverRelated;var ObjectModelPopoverRelatedItem=function(){function e(e,t,i,s){this.language=e,this.metadata=t,this.model=i,this.view=s,this.module="",this.item={},this.fields=[]}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.item.id,this.model.data=this.item},e.prototype.goDetail=function(){this.model.goDetail()},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"fields",void 0),e=__decorate([core_1.Component({selector:"object-model-popover-related-item",template:'<dd class="slds-m-top_x-small"><p class="slds-truncate" [title]="model.displayname"><a href="javascript:void(0);" (click)="goDetail()">{{model.displayname}}</a></p><dl class="slds-list_horizontal slds-wrap slds-text-body_small"><ng-container *ngFor="let field of fields"><dt class="slds-item_label slds-text-color_weak slds-truncate"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></dt><dd class="slds-item_detail slds-text-color_weak slds-truncate" title="$500,000"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></dd>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view])],e)}();exports.ObjectModelPopoverRelatedItem=ObjectModelPopoverRelatedItem;var ObjectComponents=function(){function ObjectComponents(e,t){this.metadata=e,this.vms=t,this.version="1.0",this.build_date="2019-02-27",this.vms.registerModule(this)}return ObjectComponents=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,globalcomponents_1.GlobalComponents,systemcomponents_1.SystemComponents,directives_1.DirectivesModule,router_1.RouterModule.forRoot([{path:"module/:module",component:ObjectListViewContainer,canActivate:[services_1.loginCheck,services_1.aclCheck]},{path:"module/:module/import",component:ObjectImport,canActivate:[services_1.loginCheck]},{path:"module/:module/:id",component:ObjectRecordViewContainer,canActivate:[services_1.loginCheck]},{path:"module/:module/:id/:related/:link",component:ObjectRelatedlistAll,canActivate:[services_1.loginCheck]},{path:"module/:module/:id/:related/:link/:fieldset",component:ObjectRelatedlistAll,canActivate:[services_1.loginCheck]},{path:"**",redirectTo:"module/Home",canActivate:[services_1.loginCheck]}])],declarations:[ObjectIcon,ObjectListViewContainer,ObjectListView,ObjectListTypes,ObjectListViewHeader,ObjectListViewHeaderListSelector,ObjectList,ObjectListHeader,ObjectListHeaderActionMenu,ObjectListItem,ObjectListItemField,ObjectActionMenu,ObjectActionsetMenu,ObjectActionsetMenuContainer,ObjectActionsetMenuContainerEdit,ObjectActionsetMenuContainerDelete,ObjectListViewAggregatesPanel,ObjectListViewAggregate,ObjectListViewAggregateItem,ObjectListViewFilterPanel,ObjectListViewFilterPanelExportButton,ObjectListViewFilterPanelExportTargetlist,ObjectListViewFilterPanelFilterMyItems,ObjectListViewFilterPanelFilterItem,ObjectListViewFilterPanelFilterText,ObjectListViewFilterPanelFilterEnum,ObjectListViewFilterPanelFilterBool,ObjectListViewFilterPanelFilterDate,ObjectListViewSettings,ObjectListViewSettingsAddlistModal,ObjectListViewSettingsDeletelistModal,ObjectListViewSettingsSetfieldsModal,ObjectActionContainer,ObjectActionContainerItem,ObjectActionEditButton,ObjectActionSaveButton,ObjectActionDeleteButton,ObjectActionAuditlogButton,ObjectActionAuditlogModal,ObjectGDPRModal,ObjectActionNewButton,ObjectActionDuplicateButton,ObjectActionNewrelatedButton,ObjectActionImportButton,ObjectActionSelectButton,ObjectEditModal,ObjectEditModalWReference,ObjectEditModalDialogContainer,ObjectEditModalDialogDuplicates,ObjectOptimisticLockingModal,ObjectOptimisticLockingModalDataField,ObjectOptimisticLockingModalChange,ObjectRecordViewContainer,ObjectRecordView,ObjectRecordViewDetail1,ObjectRecordViewDetail2and1,ObjectRecordViewDetailsplit,ObjectPageHeader,ObjectPageHeaderTags,ObjectPageHeaderTagPicker,ObjectPageHeaderDetails,ObjectPageHeaderDetailRow,ObjectPageHeaderDetailRowField,ObjectTabContainer,ObjectTabContainerItem,ObjectTabContainerItemHeader,ObjectVerticalTabContainer,ObjectVerticalTabContainerItem,ObjectVerticalTabContainerItemHeader,ObjectRelateContainer,ObjectRelatedlistHeader,ObjectRelatedlistFooter,ObjectRelatedlistList,ObjectRelatedListItem,ObjectRelatedlistTiles,ObjectRelatedCardTile,ObjectRelatedlistFiles,ObjectRelatedCardFile,ObjectRelatedDuplicates,ObjectRelatedDuplicateTile,ObjectRelatedlistAll,ObjectRelatedlistTable,ObjectRelatedlistSequenced,ObjectRelatedlistSequencedTable,ObjectRelatedListSequencedItem,ObjectFileActionMenu,ObjectActivitiyTimeline,ObjectActivityTimelineFilter,ObjectActivitiyTimelineContainer,ObjectActivitiyTimelineItemContainer,ObjectActivitiyTimelineAddTabContainer,ObjectActivitiyTimelineCall,ObjectActivitiyTimelineEvent,ObjectActivitiyTimelineEmail,ObjectActivitiyTimelineTask,ObjectActivitiyTimelineNote,ObjectActivitiyTimelineAddContainer,ObjectActivitiyTimelineAddItem,ObjectActivitiyTimelineAddCall,ObjectActivitiyTimelineAddMeeting,ObjectActivitiyTimelineAddTask,ObjectActivitiyTimelineAddEmail,ObjectActivitiyTimelineAddNote,ObjectActivitiyTimelineSummary,ObjectActivitiyTimelineSummaryButton,ObjectActivitiyTimelineSummaryModal,ObjectRecordDetails,ObjectRecordDetailsTab,ObjectRecordAdministrationTab,ObjectRecordDetailsTabRow,ObjectRecordDetailsTabRowField,ObjectRecordChecklist,ObjectRecordChecklistItem,ObjectRecordTabbedDetails,ObjectRecordTabbedDetailsTab,ObjectModalModuleLookup,ObjectSelectButton,ObjectReminderButton,ObjectActionBeanToMailButton,ObjectActionMailModal,ObjectImport,ObjectImportSelect,ObjectImportMap,ObjectImportFixed,ObjectImportCheck,ObjectImportUpdate,ObjectImportResult,ObjectMergeButton,ObjectMergeModal,ObjectMergeModalRecords,ObjectMergeModalData,ObjectMergeModalDataField,ObjectMergeModalExecute,ObjectNotes,ObjectNote,ObjectAddresses,ObjectAddressesPipe,ObjectAddress,ObjectPopoverHeader,ObjectPopoverBodyItem,ObjectRecordFieldset,ObjectRecordFieldsetField,ObjectRecordFieldsetHorizontalList,ObjectRowItemComponent,ObjectModalModuleDBLookup,ObjectActionOutputBeanModal,ObjectActionOutputBeanButton,ObjectStatusNetworkButton,ObjectStatusNetworkButtonItem,ObjectKeyValuesPipe,ObjectTableRow,ObjectTable,ObjectModelPopover,ObjectModelPopoverField,ObjectModelPopoverRelated,ObjectModelPopoverRelatedItem],entryComponents:[ObjectIcon,ObjectListViewHeader,ObjectListView,ObjectList,ObjectPageHeader,ObjectPageHeaderDetails,ObjectPageHeaderDetailRow,ObjectPageHeaderDetailRowField,ObjectTabContainer,ObjectTabContainerItem,ObjectRelateContainer,ObjectRelatedlistList,ObjectRelatedlistTiles,ObjectRelatedCardTile,ObjectRelatedlistFiles,ObjectRelatedDuplicates,ObjectActivitiyTimeline,ObjectActivitiyTimelineContainer,ObjectActivitiyTimelineCall,ObjectActivitiyTimelineEvent,ObjectActivitiyTimelineEmail,ObjectActivitiyTimelineTask,ObjectActivitiyTimelineAddContainer,ObjectRecordView,ObjectRecordViewDetail1,ObjectRecordViewDetail2and1,ObjectRecordDetails,ObjectRecordDetailsTab,ObjectRecordDetailsTabRow,ObjectRecordDetailsTabRowField,ObjectActionEditButton,ObjectActionDeleteButton,ObjectActionNewButton,ObjectActionNewrelatedButton,ObjectActionImportButton,ObjectActionSelectButton,ObjectActionBeanToMailButton,ObjectNotes],exports:[ObjectListViewHeader,ObjectList,ObjectListItem,ObjectIcon,ObjectPageHeader,ObjectPageHeaderDetails,ObjectPageHeaderDetailRow,ObjectActionMenu,ObjectActionsetMenu,ObjectSelectButton,ObjectRelatedListItem,ObjectPopoverHeader,ObjectPopoverBodyItem,ObjectActionContainer,ObjectRecordFieldset,ObjectRecordFieldsetHorizontalList,ObjectRowItemComponent,ObjectTabContainerItemHeader,ObjectTableRow,ObjectTable,ObjectActivitiyTimelineItemContainer]}),__metadata("design:paramtypes",[services_1.metadata,services_1.VersionManagerService])],ObjectComponents)}();exports.ObjectComponents=ObjectComponents;